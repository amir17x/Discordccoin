import { 
  ButtonInteraction, 
  ActionRowBuilder, 
  ButtonBuilder, 
  ButtonStyle, 
  EmbedBuilder, 
  StringSelectMenuBuilder, 
  StringSelectMenuOptionBuilder,
  MessageComponentInteraction
} from 'discord.js';

// منوی راهنمای جدید و تعاملی
export async function helpMenu(
  interaction: ButtonInteraction | MessageComponentInteraction,
  category: string = 'main'
) {
  try {
    // راه‌اندازی پاسخ با تاخیر (defer) برای جلوگیری از خطای تایم‌اوت
    if (!interaction.deferred && !interaction.replied) {
      await interaction.deferReply({ ephemeral: true });
    }
    
    // انتخاب کتگوری مورد نظر برای نمایش
    let embed: EmbedBuilder;
    
    switch (category) {
      case 'economy':
        embed = getEconomyHelpEmbed();
        break;
      case 'games':
        embed = getGamesHelpEmbed();
        break;
      case 'shop':
        embed = getShopHelpEmbed();
        break;
      case 'clan':
        embed = getClanHelpEmbed();
        break;
      case 'missions':
        embed = getMissionsHelpEmbed();
        break;
      case 'social':
        embed = getSocialHelpEmbed();
        break;
      case 'tips':
        embed = getTipsHelpEmbed();
        break;
      default:
        embed = getMainHelpEmbed();
    }
    
    // ایجاد منوی کشویی برای انتخاب بخش مورد نظر
    const selectMenu = new StringSelectMenuBuilder()
      .setCustomId('help_category')
      .setPlaceholder('💡 انتخاب بخش راهنما')
      .addOptions(
        new StringSelectMenuOptionBuilder()
          .setLabel('📋 راهنمای اصلی')
          .setValue('main')
          .setDescription('مرور کلی امکانات و دستورات')
          .setEmoji('📋')
          .setDefault(category === 'main'),
        new StringSelectMenuOptionBuilder()
          .setLabel('💰 بخش اقتصادی')
          .setValue('economy')
          .setDescription('کیف پول، بانک، سرمایه‌گذاری و کسب درآمد')
          .setEmoji('💰')
          .setDefault(category === 'economy'),
        new StringSelectMenuOptionBuilder()
          .setLabel('🎮 بازی‌ها')
          .setValue('games')
          .setDescription('بازی‌های تکی، رقابتی و شانسی')
          .setEmoji('🎮')
          .setDefault(category === 'games'),
        new StringSelectMenuOptionBuilder()
          .setLabel('🛒 فروشگاه')
          .setValue('shop')
          .setDescription('خرید و فروش آیتم‌ها و مدیریت انبار')
          .setEmoji('🛒')
          .setDefault(category === 'shop'),
        new StringSelectMenuOptionBuilder()
          .setLabel('🏰 کلن‌ها')
          .setValue('clan')
          .setDescription('سیستم کلن، رقابت‌های گروهی و امکانات کلن')
          .setEmoji('🏰')
          .setDefault(category === 'clan'),
        new StringSelectMenuOptionBuilder()
          .setLabel('🎯 ماموریت‌ها')
          .setValue('missions')
          .setDescription('کوئست‌ها، دستاوردها و رویدادها')
          .setEmoji('🎯')
          .setDefault(category === 'missions'),
        new StringSelectMenuOptionBuilder()
          .setLabel('👥 اجتماعی')
          .setValue('social')
          .setDescription('دوستی‌ها، رتبه‌بندی و تعاملات')
          .setEmoji('👥')
          .setDefault(category === 'social'),
        new StringSelectMenuOptionBuilder()
          .setLabel('💡 نکات و ترفندها')
          .setValue('tips')
          .setDescription('راهنمایی‌های کاربردی و ترفندهای پیشرفته')
          .setEmoji('💡')
          .setDefault(category === 'tips'),
      );
    
    const selectRow = new ActionRowBuilder<StringSelectMenuBuilder>()
      .addComponents(selectMenu);
    
    // دکمه‌های پایین راهنما
    const row = new ActionRowBuilder<ButtonBuilder>()
      .addComponents(
        new ButtonBuilder()
          .setCustomId('menu')
          .setLabel('🏠 منوی اصلی')
          .setStyle(ButtonStyle.Success),
      );
    
    // ارسال پاسخ
    await interaction.editReply({
      embeds: [embed],
      components: [selectRow, row]
    });
  } catch (error) {
    console.error(`Error in help menu (${category}):`, error);
    
    // در صورت خطا
    try {
      if (!interaction.replied) {
        await interaction.reply({ 
          content: '⚠️ خطا در نمایش راهنما! لطفاً دوباره تلاش کنید.', 
          ephemeral: true 
        });
      } else if (interaction.deferred) {
        await interaction.editReply({ 
          content: '⚠️ خطا در نمایش راهنما! لطفاً دوباره تلاش کنید.' 
        });
      }
    } catch (err) {
      console.error("Failed to send error message:", err);
    }
  }
}

// Embeds برای هر بخش راهنما
function getMainHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#FFFF99') // زرد روشن
    .setTitle('📋 راهنمای جامع ربات Ccoin 🌟')
    .setDescription('به دنیای مجازی اقتصاد و سرگرمی Ccoin خوش آمدید! در این راهنما می‌توانید با تمام امکانات ربات آشنا شوید. لطفا از منوی کشویی بالا بخش مورد نظر خود را انتخاب کنید.')
    .addFields(
      { 
        name: '🔸 **دستورات اصلی**', 
        value: '`/menu` - منوی اصلی با تمام امکانات (اقتصاد، بازی‌ها، فروشگاه و...)\n' +
              '`/balance` - بررسی سریع موجودی حساب\n' +
              '`/daily` - دریافت پاداش روزانه (هر 24 ساعت یکبار)\n' +
              '`/help` - نمایش این راهنما\n' +
              '`/admin` - پنل مدیریت (مخصوص ادمین‌ها)\n' +
              '`/ping` - بررسی وضعیت اتصال به ربات'
      },
      { 
        name: '🌈 **بخش‌های اصلی**', 
        value: '1️⃣ **بخش اقتصادی** - مدیریت کیف پول، بانک، سرمایه‌گذاری و کسب درآمد\n' +
              '2️⃣ **بخش بازی‌ها** - انواع بازی‌های تکی، رقابتی و شانسی\n' +
              '3️⃣ **بخش فروشگاه** - خرید، فروش و مدیریت آیتم‌ها\n' +
              '4️⃣ **بخش کلن‌ها** - عضویت در کلن، رقابت‌های گروهی و همکاری\n' +
              '5️⃣ **بخش ماموریت‌ها** - کوئست‌های روزانه، هفتگی و دستاوردها\n' +
              '6️⃣ **بخش اجتماعی** - دوستی‌ها، رتبه‌بندی و تعاملات\n' +
              '7️⃣ **نکات و ترفندها** - راهکارهای مفید برای پیشرفت سریع‌تر'
      },
      { 
        name: '💡 **راهنمایی سریع**', 
        value: '• برای شروع، از دستور `/menu` استفاده کنید\n' +
              '• هر روز پاداش روزانه خود را با `/daily` دریافت کنید\n' +
              '• از منوی کشویی بالا، بخش موردنظر راهنما را انتخاب کنید\n' +
              '• برای هر سوال یا مشکل، با ادمین‌های سرور در ارتباط باشید'
      }
    )
    .setFooter({ 
      text: 'از Ccoin Bot v1.5.0 لذت ببرید! | برای اطلاعات بیشتر بخش مورد نظر را انتخاب کنید'
    })
    .setThumbnail('https://img.icons8.com/fluency/48/menu--v1.png')
    .setTimestamp();
}

function getEconomyHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#85BB65') // رنگ سبز پول
    .setTitle('💰 راهنمای بخش اقتصادی Ccoin')
    .setDescription('در این بخش با سیستم‌های مختلف مدیریت پول و کسب درآمد آشنا می‌شوید:')
    .addFields(
      { 
        name: '💳 **کیف پول (والت)**', 
        value: '• **موجودی**: نمایش میزان Ccoin فعلی شما\n' +
              '• **انتقال**: ارسال Ccoin به دوستان (کارمزد: 5%)\n' +
              '• **محدودیت انتقال روزانه**: 2000 Ccoin\n' + 
              '• **سقف نگهداری**: 100,000 Ccoin',
        inline: false 
      },
      { 
        name: '🏦 **بانک**', 
        value: '• **سود روزانه**: 2% (نیاز به ورود روزانه)\n' +
              '• **برداشت بدون جریمه**: پس از 24 ساعت\n' +
              '• **برداشت آنی**: با 10% جریمه\n' +
              '• **سطوح حساب**: عادی (50,000)، طلایی (100,000)، الماسی (نامحدود)',
        inline: false
      },
      { 
        name: '📈 **سرمایه‌گذاری و بورس**', 
        value: '• **سهام**: خرید و فروش سهام شرکت‌ها با نوسان قیمت\n' +
              '• **اوراق قرضه**: سرمایه‌گذاری با سود ثابت (1، 3 و 7 روزه)\n' +
              '• **بازار ارز**: معامله ارزهای مجازی با نوسان قیمت\n' +
              '• **کارمزد معاملات**: 2%',
        inline: false 
      },
      { 
        name: '🧑‍💼 **شغل‌ها و کسب درآمد**', 
        value: '• **کارهای روزانه**: ماهیگیری (20-100)، معدن‌کاری (30-150)، شکار (25-120)، کشاورزی (15-80) Ccoin\n' +
              '• **شغل‌های دائمی**: پزشک، وکیل، تاجر، مربی\n' +
              '• **سیستم مهارت**: 5 سطح برای هر شغل، با افزایش سطح درآمد بیشتر می‌شود',
        inline: false 
      },
      { 
        name: '✅ **نکات کاربردی**', 
        value: '• پول خود را در بانک نگهداری کنید تا از سرقت در امان باشد\n' +
              '• سرمایه‌گذاری‌های کم‌ریسک برای شروع توصیه می‌شود\n' +
              '• سود بانکی از مالیات معاف است\n' +
              '• برای انتقال مبالغ بالا نیاز به تأیید دو مرحله‌ای دارید',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'برای اطلاعات بیشتر، بخش‌های دیگر راهنما را بررسی کنید' 
    })
    .setThumbnail('https://img.icons8.com/fluency/48/bank.png')
    .setTimestamp();
}

function getGamesHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#E74C3C') // قرمز
    .setTitle('🎮 راهنمای بخش بازی‌های Ccoin')
    .setDescription('در این بخش با انواع بازی‌های مختلف، قوانین و جوایز آنها آشنا می‌شوید:')
    .addFields(
      { 
        name: '🎲 **بازی‌های شانسی (کازینو)**', 
        value: '• **اسلات ماشین**: شانس برد 20%، ضریب 1.5 تا 10 برابر\n' +
              '• **بلک جک**: نیازمند مهارت، ضریب 1.2 تا 2 برابر\n' +
              '• **رولت**: شانس متغیر، ضریب 1.5 تا 35 برابر\n' +
              '• **شیر یا خط**: شانس 50%، ضریب 1.9 برابر\n' +
              '• **پوکر**: نیازمند مهارت بالا، ضریب متغیر',
        inline: false 
      },
      { 
        name: '⚔️ **بازی‌های رقابتی دو نفره**', 
        value: '• **دوئل (⚔️)**: مبارزه تن به تن، ورودی 50، جایزه 80 Ccoin\n' +
              '• **تاس دو نفره (🎲)**: رقابت شانسی، ورودی 50، جایزه 80 Ccoin\n' +
              '• **پوکر سریع (🃏)**: بازی کارتی، ورودی 100، جایزه 180 Ccoin\n' +
              '• **مسابقه تایپ (⌨️)**: سرعت تایپ، ورودی 20، جایزه 35 Ccoin\n' +
              '• **دارت رقابتی (🎯)**: دقت و مهارت، ورودی 30، جایزه 50 Ccoin',
        inline: false 
      },
      { 
        name: '🏆 **مسابقات و تورنومنت‌ها**', 
        value: '• **روزانه**: ورودی 100 Ccoin، جایزه برای 3 نفر برتر\n' +
              '• **هفتگی**: ورودی 250 Ccoin، جایزه برای 5 نفر برتر\n' +
              '• **ماهانه**: ورودی 500 Ccoin، جایزه برای 10 نفر برتر\n' +
              '• **VIP**: بدون ورودی، فقط برای کاربران ویژه\n' +
              '• **انواع مسابقات**: حذفی، گروهی، امتیازی',
        inline: false 
      },
      { 
        name: '⚙️ **سیستم مچ‌میکینگ**', 
        value: '• **جستجوی تصادفی**: یافتن رقیب تصادفی در کمتر از 30 ثانیه\n' +
              '• **دعوت مستقیم**: دعوت از دوستان برای بازی\n' +
              '• **رتبه‌بندی**: قرار گرفتن در مقابل بازیکنان هم‌سطح',
        inline: false 
      },
      { 
        name: '✅ **نکات کاربردی**', 
        value: '• در صورت قطع اتصال، 30 ثانیه فرصت برای بازگشت دارید\n' +
              '• محدودیت شرط در هر دست: 5 تا 500 Ccoin\n' +
              '• محدودیت شرط روزانه: 1000 Ccoin\n' +
              '• امکان گزارش تقلب در تمام بازی‌ها وجود دارد',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'برای شرکت در بازی‌ها، از بخش بازی‌ها در منوی اصلی استفاده کنید' 
    })
    .setThumbnail('https://img.icons8.com/fluency/48/controller.png')
    .setTimestamp();
}

function getShopHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#9B59B6') // بنفش
    .setTitle('🛒 راهنمای بخش فروشگاه و آیتم‌های Ccoin')
    .setDescription('در این بخش با سیستم فروشگاه، خرید و فروش آیتم‌ها و مدیریت انبار آشنا می‌شوید:')
    .addFields(
      { 
        name: '🏪 **فروشگاه رسمی**', 
        value: '• **آیتم‌های دائمی**: بج‌ها، عناوین، اسلحه‌ها و تجهیزات\n' +
              '• **آیتم‌های محدود**: آیتم‌های فصلی و مناسبتی با تاریخ انقضا\n' +
              '• **آیتم‌های VIP**: فقط قابل خرید با ارز واقعی یا برای کاربران ویژه',
        inline: false 
      },
      { 
        name: '💹 **بازار آزاد بین کاربران**', 
        value: '• **خرید و فروش**: معامله آیتم‌ها بین کاربران\n' +
              '• **تعیین قیمت**: امکان تعیین قیمت دلخواه توسط فروشنده\n' +
              '• **چانه‌زنی**: امکان پیشنهاد قیمت توسط خریدار\n' +
              '• **کارمزد معاملات**: 5% برای هر معامله',
        inline: false 
      },
      { 
        name: '🔨 **حراجی‌ها**', 
        value: '• **حراجی زمان‌دار**: با قیمت پایه و زمان محدود\n' +
              '• **حراجی مخفی**: پنهان بودن قیمت‌های پیشنهادی سایر کاربران\n' +
              '• **حراجی VIP**: مخصوص کاربران ویژه با آیتم‌های خاص',
        inline: false 
      },
      { 
        name: '🎒 **مدیریت انبار (اینونتوری)**', 
        value: '• **ظرفیت**: محدودیت تعداد آیتم‌ها (قابل ارتقا)\n' +
              '• **مرتب‌سازی**: بر اساس نوع، ارزش یا تاریخ خرید\n' +
              '• **استفاده**: فعال‌سازی و استفاده از آیتم‌ها\n' +
              '• **انتقال**: امکان هدیه دادن برخی آیتم‌ها به دوستان',
        inline: false 
      },
      { 
        name: '✅ **نکات کاربردی**', 
        value: '• برخی آیتم‌ها قابلیت فروش مجدد ندارند\n' +
              '• هر کاربر می‌تواند حداکثر 5 آیتم همزمان در بازار بفروشد\n' +
              '• آیتم‌های خریداری شده با ارز واقعی کارمزد بالاتری دارند\n' +
              '• تخفیف‌های ویژه در رویدادهای فصلی ارائه می‌شوند',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'برای دسترسی به فروشگاه، از دکمه "فروشگاه" در منوی اصلی استفاده کنید' 
    })
    .setThumbnail('https://img.icons8.com/fluency/48/shop.png')
    .setTimestamp();
}

function getClanHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#3498DB') // آبی
    .setTitle('🏰 راهنمای سیستم کلن‌های Ccoin')
    .setDescription('در این بخش با سیستم کلن‌ها، رقابت‌های گروهی و امکانات کلن‌ها آشنا می‌شوید:')
    .addFields(
      { 
        name: '🏗️ **ایجاد و مدیریت کلن**', 
        value: '• **هزینه ایجاد**: 5000 Ccoin\n' +
              '• **سطوح کلن**: امکانات بیشتر با ارتقای سطح\n' +
              '• **خزانه مشترک**: جمع‌آوری سرمایه کلن\n' +
              '• **چت اختصاصی**: ارتباط با اعضای کلن',
        inline: false 
      },
      { 
        name: '👥 **اعضا و رده‌بندی**', 
        value: '• **حداکثر اعضا**: 30 نفر در هر کلن\n' +
              '• **رده‌ها**: Leader (رهبر)، Co-Leader (معاون)، Elder (بزرگ)، Member (عضو)\n' +
              '• **دسترسی‌ها**: سطوح مختلف دسترسی برای هر رده\n' +
              '• **پذیرش**: عمومی یا با تأیید رهبر',
        inline: false 
      },
      { 
        name: '⚔️ **جنگ کلن‌ها (Clan War)**', 
        value: '• **زمان**: مسابقات 48 ساعته\n' +
              '• **ورودی**: 5000 Ccoin از خزانه کلن\n' +
              '• **جایزه**: 10,000 Ccoin برای کلن برنده\n' +
              '• **سیستم امتیازدهی**: بر اساس عملکرد اعضا',
        inline: false 
      },
      { 
        name: '🏝️ **سرزمین کلن**', 
        value: '• **ارتقا**: با 5000 Ccoin\n' +
              '• **سود روزانه**: 100 Ccoin برای هر عضو\n' +
              '• **ساختمان‌ها**: ارتقای سرزمین با ساخت بناهای مختلف\n' +
              '• **منابع**: جمع‌آوری منابع برای ارتقای بناها',
        inline: false 
      },
      { 
        name: '✅ **نکات کاربردی**', 
        value: '• عضویت در کلن فعال 10% بونوس در تمام درآمدها دارد\n' +
              '• هزینه هفتگی نگهداری کلن: 1000 Ccoin\n' +
              '• کلن غیرفعال پس از 2 هفته منحل می‌شود\n' +
              '• همکاری در فعالیت‌های گروهی امتیازات ویژه دارد',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'برای ایجاد یا پیوستن به کلن، از بخش "کلن‌ها" در منوی اصلی استفاده کنید' 
    })
    .setThumbnail('https://img.icons8.com/fluency/48/castle.png')
    .setTimestamp();
}

function getMissionsHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#F1C40F') // زرد طلایی
    .setTitle('🎯 راهنمای ماموریت‌ها و دستاوردهای Ccoin')
    .setDescription('در این بخش با سیستم ماموریت‌ها، دستاوردها و رویدادهای ویژه آشنا می‌شوید:')
    .addFields(
      { 
        name: '📆 **ماموریت‌های روزانه**', 
        value: '• **تعداد**: 3 ماموریت در روز\n' +
              '• **پاداش**: 10-50 Ccoin برای هر ماموریت\n' +
              '• **مثال‌ها**: ارسال 10 پیام، انجام 5 بازی، خرید از فروشگاه\n' +
              '• **بونوس**: پاداش اضافی برای تکمیل همه ماموریت‌های روزانه',
        inline: false 
      },
      { 
        name: '🗓️ **ماموریت‌های هفتگی**', 
        value: '• **تعداد**: 5 ماموریت در هفته\n' +
              '• **پاداش**: 50-200 Ccoin برای هر ماموریت\n' +
              '• **مثال‌ها**: 5 برد رقابتی، سرمایه‌گذاری، ارتقای مهارت\n' +
              '• **بونوس**: پاداش ویژه برای تکمیل همه ماموریت‌های هفتگی',
        inline: false 
      },
      { 
        name: '📅 **ماموریت‌های ماهانه**', 
        value: '• **تعداد**: 3 ماموریت در ماه\n' +
              '• **پاداش**: 1000 Ccoin برای هر ماموریت\n' +
              '• **مثال‌ها**: پس‌انداز 2000 Ccoin، رسیدن به رتبه خاص در رده‌بندی\n' +
              '• **جوایز ویژه**: آیتم‌های کمیاب علاوه بر Ccoin',
        inline: false 
      },
      { 
        name: '🏅 **دستاوردها**', 
        value: '• **انواع**: اقتصادی، مهارتی، اجتماعی و بازی\n' +
              '• **سطوح**: برنز، نقره، طلا و الماس\n' +
              '• **پاداش‌ها**: Ccoin، XP و عناوین مخصوص\n' +
              '• **مثال‌ها**: سرمایه‌دار (10,000 Ccoin بانک)، قهرمان بازی‌ها (100 برد)',
        inline: false 
      },
      { 
        name: '🎊 **رویدادهای ویژه**', 
        value: '• **فصلی**: رویدادهای مخصوص عید، کریسمس و...\n' +
              '• **قرعه‌کشی‌ها**: خرید بلیط برای شانس برنده شدن\n' +
              '• **چالش‌های محدود**: ماموریت‌های خاص با پاداش بالا\n' +
              '• **تخفیف‌های ویژه**: فروشگاه‌های موقت با آیتم‌های خاص',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'برای مشاهده ماموریت‌ها و دستاوردها، به بخش "ماموریت‌ها" در منوی اصلی مراجعه کنید' 
    })
    .setThumbnail('https://img.icons8.com/fluency/48/flag.png')
    .setTimestamp();
}

function getSocialHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#2ECC71') // سبز
    .setTitle('👥 راهنمای بخش اجتماعی Ccoin')
    .setDescription('در این بخش با سیستم دوستی‌ها، رتبه‌بندی و تعاملات اجتماعی آشنا می‌شوید:')
    .addFields(
      { 
        name: '👬 **سیستم دوستی**', 
        value: '• **محدودیت**: حداکثر 100 دوست برای هر کاربر\n' +
              '• **سطوح دوستی**: تازه، عادی، صمیمی، بهترین\n' +
              '• **تعاملات**: ارسال هدیه روزانه، همکاری در فعالیت‌ها، چت خصوصی\n' +
              '• **افزایش سطح**: با تعامل بیشتر و ارسال هدیه',
        inline: false 
      },
      { 
        name: '📊 **رتبه‌بندی و لیدربورد**', 
        value: '• **انواع رتبه‌بندی**: ثروت، سطح، تعداد بردها، دستاوردها\n' +
              '• **بازه‌های زمانی**: روزانه، هفتگی، ماهانه، کلی\n' +
              '• **جوایز**: پاداش برای نفرات برتر در هر دوره\n' +
              '• **عناوین افتخاری**: برای نفرات برتر رتبه‌بندی',
        inline: false 
      },
      { 
        name: '📨 **سیستم پیام و چت**', 
        value: '• **پیام‌های خصوصی**: ارتباط مستقیم با دوستان\n' +
              '• **چت گروهی**: در کلن یا گروه‌های ویژه\n' +
              '• **محدودیت‌ها**: فیلتر محتوا و سیستم گزارش\n' +
              '• **ایموجی‌ها**: استفاده از ایموجی‌های اختصاصی ربات',
        inline: false 
      },
      { 
        name: '🤝 **تعاملات و همکاری**', 
        value: '• **معاملات**: خرید و فروش بین دوستان با کارمزد کمتر\n' +
              '• **هدیه روزانه**: ارسال 10 Ccoin به دوستان\n' +
              '• **همکاری**: بونوس 5% در بازی‌های مشترک با دوستان\n' +
              '• **قرض**: امکان قرض دادن Ccoin به دوستان صمیمی',
        inline: false 
      },
      { 
        name: '✅ **نکات کاربردی**', 
        value: '• محدودیت ارسال درخواست: 10 درخواست در روز\n' +
              '• سیستم بلاک کردن برای کاربران مزاحم\n' +
              '• امکان گزارش رفتارهای نامناسب\n' +
              '• تخفیف در معاملات بین دوستان',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'برای مدیریت دوستان و مشاهده رتبه‌بندی، به بخش "اجتماعی" در منوی اصلی مراجعه کنید' 
    })
    .setThumbnail('https://img.icons8.com/fluency/48/group.png')
    .setTimestamp();
}

function getTipsHelpEmbed(): EmbedBuilder {
  return new EmbedBuilder()
    .setColor('#F39C12') // نارنجی
    .setTitle('💡 نکات و ترفندهای طلایی Ccoin')
    .setDescription('در این بخش با نکات کاربردی، ترفندها و راهکارهای پیشرفت سریع‌تر آشنا می‌شوید:')
    .addFields(
      { 
        name: '💰 **نکات اقتصادی**', 
        value: '• سپرده‌گذاری در بانک بهترین راه برای افزایش ثروت مداوم است\n' +
              '• انجام کوئست‌های روزانه می‌تواند تا 150 Ccoin در روز درآمد ایجاد کند\n' +
              '• معامله با دوستان کارمزد کمتری نسبت به معامله با غریبه‌ها دارد\n' +
              '• سرمایه‌گذاری در سهام ریسک بالا اما سود بالایی نیز دارد\n' +
              '• سهام را در زمان کاهش قیمت بخرید و در زمان افزایش بفروشید',
        inline: false 
      },
      { 
        name: '🎮 **ترفندهای بازی**', 
        value: '• در بازی دوئل، شروع با حمله قوی همیشه بهترین استراتژی نیست\n' +
              '• برای پیروزی در تاس، شانس مهم است اما استراتژی ریسک بیشتر!\n' +
              '• در مسابقات تایپ، دقت مهم‌تر از سرعت است\n' +
              '• بیشتر بازیکنان در بازی پوکر ابتدا با شرط‌های کوچک شروع می‌کنند\n' +
              '• بازی‌های رتبه‌بندی شده جوایز بهتری نسبت به بازی‌های عادی دارند',
        inline: false 
      },
      { 
        name: '🏦 **مدیریت سرمایه**', 
        value: '• موجودی خود را به سه بخش تقسیم کنید: خرج روزانه، پس‌انداز و سرمایه‌گذاری\n' +
              '• هرگز بیش از 30% دارایی خود را در یک مورد سرمایه‌گذاری نکنید\n' +
              '• همیشه بخشی از درآمد روزانه خود را (حداقل 20%) پس‌انداز کنید\n' +
              '• خرید آیتم‌های دائمی بهتر از آیتم‌های موقت است\n' +
              '• هزینه کردن برای ارتقای ظرفیت‌ها سرمایه‌گذاری بلندمدت محسوب می‌شود',
        inline: false 
      },
      { 
        name: '🏰 **راهکارهای کلن**', 
        value: '• عضویت در کلن‌های فعال می‌تواند درآمد روزانه شما را تا 30% افزایش دهد\n' +
              '• قبل از جنگ کلن‌ها، منابع خود را ذخیره کنید\n' +
              '• کمک به اعضای تازه‌وارد کلن باعث افزایش وفاداری آنها می‌شود\n' +
              '• مشارکت در فعالیت‌های کلن می‌تواند رتبه شما را در کلن بالا ببرد\n' +
              '• برای پیشرفت سریع‌تر کلن، بخشی از درآمد روزانه را به خزانه اهدا کنید',
        inline: false 
      },
      { 
        name: '😄 **طنز آموزشی**', 
        value: '• آیا می‌دانستید کاربرانی که در بانک سپرده‌گذاری می‌کنند، کمتر دچار سرقت می‌شوند؟ سارقان هم ترجیح می‌دهند کارشان راحت باشد! 🦹‍♂️\n' +
              '• بیشترین تقلب در بازی تاس، فوت کردن روی تاس‌هاست! خوب شد دیسکورد قابلیت فوت کردن ندارد! 🎲\n' +
              '• برخی کاربران آنقدر در بانک پول دارند که رئیس بانک را استخدام کرده‌اند تا پول‌هایشان را بشمارد! 💸\n' +
              '• سرقت از یک سارق، جرم نیست؛ یک سرویس خدماتی محسوب می‌شود! 🤣',
        inline: false 
      }
    )
    .setFooter({ 
      text: 'این نکات بر اساس تجربه کاربران حرفه‌ای جمع‌آوری شده است'
    })
    .setThumbnail('https://img.icons8.com/fluency/48/idea.png')
    .setTimestamp();
}