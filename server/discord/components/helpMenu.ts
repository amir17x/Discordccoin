import { 
  ButtonInteraction, 
  ChatInputCommandInteraction, 
  EmbedBuilder, 
  ActionRowBuilder, 
  ButtonBuilder, 
  ButtonStyle, 
  StringSelectMenuBuilder, 
  StringSelectMenuInteraction,
  StringSelectMenuOptionBuilder
} from 'discord.js';
import { log } from '../../vite';

/**
 * ููู ุฑุงูููุง ุฌุงูุน ุจุง ุฏุณุชูโุจูุฏ
 * @param interaction ุชุนุงูู ฺฉุงุฑุจุฑ
 * @param category ุฏุณุชูโุจูุฏ (ุงุฎุชุงุฑ)
 */
export async function helpMenu(
  interaction: ButtonInteraction | ChatInputCommandInteraction | StringSelectMenuInteraction, 
  category?: string
) {
  // ูุงฺฏ ุงุทูุงุนุงุช ุนุจโุงุจ
  log(`helpMenu called with category: ${category || 'undefined'}`, 'info');
  log(`Interaction type: ${interaction.constructor.name}, customId: ${(interaction as any).customId || 'N/A'}`, 'info');
  try {
    // ุงุฌุงุฏ ููู ุงูุชุฎุงุจ ุฏุณุชูโุจูุฏ
    const categorySelect = new StringSelectMenuBuilder()
      .setCustomId('help_category_select')
      .setPlaceholder('๐ ุฏุณุชูโุจูุฏ ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ')
      .addOptions(
        new StringSelectMenuOptionBuilder()
          .setLabel('ุฑุงูููุง ฺฉู')
          .setDescription('ุงุทูุงุนุงุช ฺฉู ุฏุฑุจุงุฑู ุฑุจุงุช ู ูุฑูุงูโูุง ุงุตู')
          .setValue('general')
          .setEmoji('๐'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุณุณุชู ุงูุชุตุงุฏ')
          .setDescription('ุฑุงูููุง ุจุงูฺฉุ ุงูุชูุงู ูพููุ ฺฉุณุจ ุฏุฑุขูุฏ ู ุฎุฑุฏ ู ูุฑูุด')
          .setValue('economy')
          .setEmoji('๐ฐ'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุจุงุฒโูุง ู ุณุฑฺฏุฑู')
          .setDescription('ุฑุงูููุง ุจุงุฒโูุง ูุฎุชูู ู ูุญูู ฺฉุณุจ ุฌุงุฒู')
          .setValue('games')
          .setEmoji('๐ฎ'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ฺฉููโูุง ู ฺฏุฑููโูุง')
          .setDescription('ุฑุงูููุง ุณุงุฎุช ู ูุฏุฑุช ฺฉููโูุง ู ูุนุงูุชโูุง ฺฏุฑูู')
          .setValue('clans')
          .setEmoji('๐ฐ'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุณุณุชู ุฏูุณุช')
          .setDescription('ุฑุงูููุง ุณุณุชู ุฏูุณุชุ ูุนุงูุชโูุง ูุดุชุฑฺฉ ู ูุฏุฑุช ุฏูุณุชุงู')
          .setValue('friends')
          .setEmoji('๐ฅ'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ูุฃููุฑุชโูุง ู ุฌูุงุฒ')
          .setDescription('ุฑุงูููุง ูุฃููุฑุชโูุง ุฑูุฒุงููุ ููุชฺฏ ู ุฏุณุชุงูุฑุฏูุง')
          .setValue('quests')
          .setEmoji('๐ฏ'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ูุฑูุดฺฏุงู ู ุขุชูโูุง')
          .setDescription('ุฑุงูููุง ูุฑูุดฺฏุงูุ ฺฉูููโูพุดุช ู ุงุณุชูุงุฏู ุงุฒ ุขุชูโูุง')
          .setValue('shop')
          .setEmoji('๐'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ููุด ูุตููุน CCOIN AI')
          .setDescription('ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ูุงุจูุชโูุง ููุด ูุตููุน ุจุงุช')
          .setValue('ai')
          .setEmoji('๐ง'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุณุณุชู ุณูุงู ู ุจุงุฒุงุฑ')
          .setDescription('ุฑุงูููุง ุฎุฑุฏ ู ูุฑูุด ุณูุงูุ ุชุญูู ุจุงุฒุงุฑ ู ุณุฑูุงูโฺฏุฐุงุฑ')
          .setValue('stocks')
          .setEmoji('๐'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุจุงุฒุงุฑ ูุนุงููุงุช ฺฉุงุฑุจุฑุงู')
          .setDescription('ุฑุงูููุง ุฎุฑุฏ ู ูุฑูุด ุจู ฺฉุงุฑุจุฑุงูุ ูุฒุงุฏู ู ูุนุงููุงุช')
          .setValue('market')
          .setEmoji('๐น'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุฑูุฏุงุฏูุง ู ูุฑุนูโฺฉุดโูุง')
          .setDescription('ุฑุงูููุง ุดุฑฺฉุช ุฏุฑ ุฑูุฏุงุฏูุงุ ูุฑุนูโฺฉุดโูุง ู ุฌูุงุฒ ูฺู')
          .setValue('events')
          .setEmoji('๐๏ธ'),
        new StringSelectMenuOptionBuilder()
          .setLabel('ุณุณุชู ุดุฎุตโุณุงุฒ')
          .setDescription('ุฑุงูููุง ุดุฎุตโุณุงุฒ ูพุฑููุงูุ ุงุนูุงูโูุง ู ุชูุธูุงุช')
          .setValue('profile')
          .setEmoji('โ๏ธ'),
      );
      
    const selectRow = new ActionRowBuilder<StringSelectMenuBuilder>()
      .addComponents(categorySelect);
    
    let embed = new EmbedBuilder()
      .setColor('#8A2BE2') // ุฑูฺฏ ุจููุด ุชุฑู ุจุฑุง ููุงููฺฏ ุจุง ููู ุงุตู
      .setFooter({ 
        text: 'ุงุฒ Ccoin Bot ุจุง ููุด ูุตููุน ุงุฎุชุตุงุต CCOIN AI ูุฐุช ุจุจุฑุฏ! | ุจุฑุง ูุดุงูุฏู ููู ุงุตู ุงุฒ /menu ุงุณุชูุงุฏู ฺฉูุฏ', 
        iconURL: interaction.client.user?.displayAvatarURL() 
      })
      .setTimestamp();
    
    // ููุงุด ุฏุณุชูโุจูุฏ ุงูุชุฎุงุจ ุดุฏู ุง ุฏุณุชูโุจูุฏ ูพุดโูุฑุถ
    if (category === 'economy') {
      embed = createEconomyHelpEmbed(embed);
    } else if (category === 'games') {
      embed = createGamesHelpEmbed(embed);
    } else if (category === 'clans') {
      embed = createClansHelpEmbed(embed);
    } else if (category === 'friends') {
      embed = createFriendsHelpEmbed(embed);
    } else if (category === 'quests') {
      embed = createQuestsHelpEmbed(embed);
    } else if (category === 'shop') {
      embed = createShopHelpEmbed(embed);
    } else if (category === 'ai') {
      embed = createAIHelpEmbed(embed);
    } else if (category === 'stocks') {
      embed = createStocksHelpEmbed(embed);
    } else if (category === 'market') {
      embed = createMarketHelpEmbed(embed);
    } else if (category === 'events') {
      embed = createEventsHelpEmbed(embed);
    } else if (category === 'profile') {
      embed = createProfileHelpEmbed(embed);
    } else {
      // ุฏุณุชูโุจูุฏ ูพุดโูุฑุถ: ุฑุงูููุง ฺฉู
      embed = createGeneralHelpEmbed(embed);
    }
    
    // ุฏฺฉููโูุง ูุงูุจุฑ
    const navButtonsRow = new ActionRowBuilder<ButtonBuilder>()
      .addComponents(
        new ButtonBuilder()
          .setCustomId('menu')
          .setLabel('ููู ุงุตู')
          .setEmoji('๐')
          .setStyle(ButtonStyle.Secondary),
        new ButtonBuilder()
          .setCustomId('feedback')
          .setLabel('ุงุฑุณุงู ุจุงุฒุฎูุฑุฏ')
          .setEmoji('๐ฌ')
          .setStyle(ButtonStyle.Danger)
      );
    
    // ุงุฑุณุงู ูพุงุณุฎ ุจุง ูุงฺฏ ุจุดุชุฑ ุจุฑุง ุฏุจุงฺฏ
    if (interaction.deferred) {
      log(`Interaction is deferred, using editReply`, 'info');
      await interaction.editReply({
        embeds: [embed],
        components: [selectRow, navButtonsRow]
      }).catch((err: Error) => {
        log(`Error in editReply: ${err.message}`, 'error');
      });
    } else if ('update' in interaction && typeof interaction.update === 'function') {
      log(`Interaction has update function, using update method`, 'info');
      try {
        // ูฺฉุชู ููู: ุฏุฑ ุงูุฌุง ุชุงูพ ุฑุง ุจู StringSelectMenuInteraction ุชุจุฏู ูโฺฉูู ู ุงุฒ ูุชุฏ update ุงุณุชูุงุฏู ูโฺฉูู
        const selectMenuInteraction = interaction as StringSelectMenuInteraction;
        await selectMenuInteraction.update({
          embeds: [embed],
          components: [selectRow, navButtonsRow]
        }).catch((err: Error) => {
          log(`Error in update: ${err.message}`, 'error');
          throw err; // ุจุงุฒูพุฎุด ุฎุทุง ุจุฑุง ูพุฑุฏุงุฒุด ุฏุฑ ุจููฺฉ catch ุจุนุฏ
        });
      } catch (e) {
        log(`Falling back to reply due to error: ${e}`, 'warn');
        if (!interaction.replied) {
          await interaction.reply({
            embeds: [embed],
            components: [selectRow, navButtonsRow],
            ephemeral: true
          }).catch((err: Error) => {
            log(`Error in reply fallback: ${err.message}`, 'error');
          });
        }
      }
    } else {
      log(`Using regular reply`, 'info');
      if (!interaction.replied) {
        await interaction.reply({
          embeds: [embed],
          components: [selectRow, navButtonsRow],
          ephemeral: true
        }).catch((err: Error) => {
          log(`Error in regular reply: ${err.message}`, 'error');
        });
      }
    }
  } catch (error) {
    console.error('Error in helpMenu:', error);
    if (interaction.deferred) {
      await interaction.editReply({ content: 'โ ุฎุทุง ุฏุฑ ููุงุด ุฑุงูููุง ุฑุฎ ุฏุงุฏ.' });
    } else if (!interaction.replied) {
      await interaction.reply({ content: 'โ ุฎุทุง ุฏุฑ ููุงุด ุฑุงูููุง ุฑุฎ ุฏุงุฏ.', ephemeral: true });
    }
  }
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ฺฉู
 */
function createGeneralHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ ุฑุงูููุง ุฌุงูุน ุฑุจุงุช Ccoin ๐')
    .setDescription('ุจู ุฏูุง ูุฌุงุฒ ุงูุชุตุงุฏ ู ุณุฑฺฏุฑู Ccoin ุฎูุด ุขูุฏุฏ! ุฏุฑ ุงู ุจุฎุด ุจุง ุงุทูุงุนุงุช ฺฉู ู ุฏุณุชูุฑุงุช ุงุตู ุฑุจุงุช ุขุดูุง ูโุดูุฏ.')
    .setThumbnail('https://img.icons8.com/fluency/48/help.png')
    .addFields(
      { 
        name: '๐ **ุฏุณุชูุฑุงุช ุงุตู**', 
        value: '`/menu` - ููุงุด ููู ุงุตู ู ุฏุณุชุฑุณ ุจู ููู ุจุฎุดโูุง\n' +
              '`/help` - ููุงุด ููู ุฑุงูููุง ุฌุงูุน\n' +
              '`/daily` - ุฏุฑุงูุช ุฌุงุฒู ุฑูุฒุงูู\n' +
              '`/profile` - ูุดุงูุฏู ูพุฑููุงู ุฎูุฏ\n' +
              '`/balance` - ูุดุงูุฏู ููุฌูุฏ ุญุณุงุจ\n' +
              '`/shop` - ุฏุณุชุฑุณ ุจู ูุฑูุดฺฏุงู\n' +
              '`/inventory` - ุฏุณุชุฑุณ ุจู ฺฉูููโูพุดุช ู ุขุชูโูุง',
        inline: false
      },
      { 
        name: '๐ฐ **ุดุฑูุน ฺฉุงุฑ ุจุง ุฑุจุงุช**', 
        value: '1๏ธโฃ ุจุง ุฏุณุชูุฑ `/menu` ุงููู ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุฑุง ุงุฌุงุฏ ฺฉูุฏ\n' +
              '2๏ธโฃ ุฌุงุฒู ุฑูุฒุงูู ุฎูุฏ ุฑุง ุจุง ุฏุณุชูุฑ `/daily` ุฏุฑุงูุช ฺฉูุฏ\n' +
              '3๏ธโฃ ุจุฑุง ฺฉุณุจ ุฏุฑุขูุฏ ุจุดุชุฑ ุฏุฑ ูุฃููุฑุชโูุง ู ุจุงุฒโูุง ุดุฑฺฉุช ฺฉูุฏ\n' +
              '4๏ธโฃ ุงุฒ ุฏุณุชูุฑ `/help` ุจุฑุง ุงุทูุงุน ุงุฒ ุจุฎุดโูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉูุฏ',
        inline: false
      },
      { 
        name: '๐ค **ุณูุงูุงุช ูุชุฏุงูู**', 
        value: '**ฺฺฏููู ูพูู ฺฉุณุจ ฺฉููุ**\n' +
              'ุงุฒ ุทุฑู ุฏุฑุงูุช ุฌุงุฒู ุฑูุฒุงููุ ุดุฑฺฉุช ุฏุฑ ูุฃููุฑุชโูุงุ ุจุฑุฏ ุฏุฑ ุจุงุฒโูุง ู ูุนุงูุช ุฏุฑ ุณุฑูุฑ\n\n' +
              '**ฺฺฏููู ุณฺฉูโูุงู ุฑุง ุฐุฎุฑู ฺฉููุ**\n' +
              'ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุฎุด ุจุงูฺฉ ุฏุฑ ููู ุงูุชุตุงุฏ ูโุชูุงูุฏ ุณฺฉูโูุง ุฑุง ุจู ุตูุฑุช ุงูู ูฺฏูุฏุงุฑ ฺฉูุฏ\n\n' +
              '**ุขุง ูโุชูุงูู ุจุง ุฏูุณุชุงูู ุจุงุฒ ฺฉููุ**\n' +
              'ุจููุ ุจุงุฒโูุง ุฏู ููุฑู ู ฺฏุฑููุ ุณุณุชู ุฏูุณุช ู ฺฉููโูุง ุจุฑุง ููู ููุธูุฑ ุทุฑุงุญ ุดุฏูโุงูุฏ',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ุงูุชุตุงุฏ
 */
function createEconomyHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ฐ ุฑุงูููุง ุณุณุชู ุงูุชุตุงุฏ Ccoin')
    .setDescription('ุขุดูุง ุจุง ูุฏุฑุช ุณฺฉูโูุงุ ฺฉุณุจ ุฏุฑุขูุฏุ ุจุงูฺฉโุฏุงุฑ ู ุณุงุฑ ูฺฺฏโูุง ุงูุชุตุงุฏ ุฑุจุงุช')
    .setThumbnail('https://img.icons8.com/fluency/48/money-bag.png')
    .addFields(
      { 
        name: '๐ฒ **ููุงูู ูพุงู**', 
        value: '**ุณฺฉู (Ccoin)**: ูุงุญุฏ ูพูู ุงุตู ุฏุฑ ุฑุจุงุช\n' +
              '**ฺฉู ูพูู**: ูุญู ูฺฏูุฏุงุฑ ุณฺฉูโูุง ุจุฑุง ุฎุฑุฌ ฺฉุฑุฏู (ุฏุฑ ูุนุฑุถ ุฏุฒุฏ)\n' +
              '**ุจุงูฺฉ**: ูุญู ูฺฏูุฏุงุฑ ุงูู ุณฺฉูโูุง ุจุง ุณูุฏ ูุดุฎุต (ุงูู ุฏุฑ ุจุฑุงุจุฑ ุฏุฒุฏ)\n' +
              '**ฺฉุฑุณุชุงู**: ุงุฑุฒ ูฺู ู ูุงุฏุฑ ุจุฑุง ุฎุฑุฏ ุขุชูโูุง ุฎุงุต',
        inline: false
      },
      { 
        name: '๐ฆ **ุณุณุชู ุจุงูฺฉ**', 
        value: '**ูุงุฑุฒ ุจู ุจุงูฺฉ**: ุงูุชูุงู ุณฺฉู ุงุฒ ฺฉู ูพูู ุจู ุจุงูฺฉ (ฺฉุงุฑูุฒุฏ: 1%)\n' +
              '**ุจุฑุฏุงุดุช ุงุฒ ุจุงูฺฉ**: ุงูุชูุงู ุณฺฉู ุงุฒ ุจุงูฺฉ ุจู ฺฉู ูพูู (ุจุฏูู ฺฉุงุฑูุฒุฏ)\n' +
              '**ุณูุฏ ุจุงูฺฉ**: 2% ูุงูุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ\n' +
              '**ุญุฏุงฺฉุซุฑ ููุฌูุฏ**: ุณูู ุจุงูฺฉ ู ฺฉู ูพูู ุจุง ุงูุฒุงุด ุณุทุญุ ุงูุฒุงุด ูโุงุจุฏ',
        inline: false
      },
      { 
        name: '๐ธ **ุฑูุดโูุง ฺฉุณุจ ุฏุฑุขูุฏ**', 
        value: '**ุฌุงุฒู ุฑูุฒุงูู**: 50 ุณฺฉู ูพุงู + ุจูููุณ ุญุถูุฑ ูุชูุงู (ูุฑ 7 ุฑูุฒ: +200 ุณฺฉู)\n' +
              '**ุจุงุฒโูุง**: ุดุฑฺฉุช ู ุจุฑุฏ ุฏุฑ ุจุงุฒโูุง ูุฎุชูู (ุดุฑ ุง ุฎุทุ ุญุฏุณ ุนุฏุฏ ู...)\n' +
              '**ูุฃููุฑุชโูุง**: ุงูุฌุงู ูุฃููุฑุชโูุง ุฑูุฒุงูู ู ููุชฺฏ\n' +
              '**ุณุฑูุงูโฺฏุฐุงุฑ**: ุณุฑูุงูโฺฏุฐุงุฑ ุจุง ุฑุณฺฉโูุง ูุฎุชูู ู ุณูุฏูุง ูุชูุงูุช\n' +
              '**ูุฑูุด ุขุชู**: ูุฑูุด ุขุชูโูุง ฺฉูููโูพุดุช ุฏุฑ ุจุงุฒุงุฑ\n' +
              '**ุดุฑฺฉุช ุฏุฑ ูุฑุนูโฺฉุด**: ุดุงูุณ ุจุฑูุฏู ุดุฏู ุฌูุงุฒ ุจุฒุฑฺฏ',
        inline: false
      },
      { 
        name: '๐ **ุงูุชูุงู ูพูู ู ุชุฑุงฺฉูุดโูุง**', 
        value: '**ุงูุชูุงู ุจู ฺฉุงุฑุจุฑุงู**: ุงุฑุณุงู ุณฺฉู ุจู ุฏูุณุชุงู (ฺฉุงุฑูุฒุฏ: 5%)\n' +
              '**ุชุจุฏู ุณฺฉู ุจู ฺฉุฑุณุชุงู**: 1000 ุณฺฉู = 10 ฺฉุฑุณุชุงู (ฺฉุงุฑูุฒุฏ: 5%)\n' +
              '**ูุญุฏูุฏุช ุงูุชูุงู ุฑูุฒุงูู**: 5000 ุณฺฉู\n' +
              '**ุชุงุฑุฎฺู ุชุฑุงฺฉูุดโูุง**: ูุงุจู ูุดุงูุฏู ุฏุฑ ููู ูพุฑููุงู',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ุจุงุฒโูุง
 */
function createGamesHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ฎ ุฑุงูููุง ุจุงุฒโูุง ู ุณุฑฺฏุฑูโูุง Ccoin')
    .setDescription('ุขุดูุง ุจุง ุงููุงุน ุจุงุฒโูุงุ ูุญูู ุดุฑุทโุจูุฏุ ุดุงูุณ ุจุฑุฏ ู ุฌูุงุฒ ูุฎุชูู')
    .setThumbnail('https://img.icons8.com/fluency/48/game-controller.png')
    .addFields(
      { 
        name: '๐ฒ **ุจุงุฒโูุง ุชฺฉโููุฑู**', 
        value: '**ุดุฑ ุง ุฎุท**: ุดุฑุท 20 ุณฺฉูุ ุจุฑุฏ = 40 ุณฺฉู (ุดุงูุณ: 50%)\n' +
              '**ุญุฏุณ ุนุฏุฏ**: ุดุฑุท 30 ุณฺฉูุ ุจุฑุฏ = 100 ุณฺฉู (ุญุฏุณ ุนุฏุฏ 1-10ุ ุดุงูุณ: 10%)\n' +
              '**ฺฏุฑุฏููู ุดุงูุณ**: ูุฒูู 50 ุณฺฉูุ ุฌูุงุฒ ูุชููุน (ููุฏุงุฑ ุณฺฉูุ ุขุชูุ ฺฉุฑุณุชุงู)',
        inline: false
      },
      { 
        name: 'โ๏ธ **ุจุงุฒโูุง ุฑูุงุจุช**', 
        value: '**ุฏูุฆู**: ฺุงูุด ูุณุชูู ุจุง ฺฉุงุฑุจุฑ ุฏฺฏุฑ (ูุฒูู: 100 ุณฺฉู ุจุฑุง ูุฑ ููุฑ)\n' +
              '**ุชุงุณ ุฏู ููุฑู**: ุจุฑุฏ = ูุฌููุน ุนุฏุฏ ุจุฒุฑฺฏุชุฑ (ูุฒูู: 30 ุณฺฉู ุจุฑุง ูุฑ ููุฑ)\n' +
              '**ุณูฺฏ ฺฉุงุบุฐ ูฺ**: ูุณุงุจูู ููุฑ ุจู ููุฑ (ูุฒูู: 20 ุณฺฉู ุจุฑุง ูุฑ ููุฑ)\n' +
              '**ูุณุงุจูู ุชุงูพ**: ุฑูุงุจุช ุฏุฑ ุชุงูพ ุณุฑุน (ูุฑูุฏ: 50 ุณฺฉูุ ูพุงุฏุงุด: 150 ุณฺฉู)',
        inline: false
      },
      { 
        name: '๐ฅ **ุจุงุฒโูุง ฺฏุฑูู**', 
        value: '**ูุงูุง**: ุจุงุฒ ฺฏุฑูู 5+ ููุฑู\n' +
              '**ุญฺฉู**: ุจุงุฒ 4 ููุฑู ุจุง ุดุฑฺฉ\n' +
              '**ุงุชุงู ูุฑุงุฑ**: ูุนูุงูุง ฺฏุฑูู (3-6 ููุฑ)\n' +
              '**ูุฑุนูโฺฉุด**: ุดุฑฺฉุช ุจุง ุฎุฑุฏ ุจูุท (500 ุณฺฉู) ู ุดุงูุณ ุจุฑูุฏู ุดุฏู ุฌฺฉูพุงุช',
        inline: false
      },
      { 
        name: '๐ **ุชูุฑูููุชโูุง ู ุฑูุฏุงุฏูุง**', 
        value: '**ุชูุฑูููุช ููุชฺฏ**: ุฑูุงุจุช ุฏุฑ ุงููุงุน ุจุงุฒโูุง (ูุฒูู ูุฑูุฏ: 200 ุณฺฉู)\n' +
              '**ุฌูุงุฒ ุชูุฑูููุช**: ููุฑ ุงูู: 5000 ุณฺฉู | ุฏูู: 3000 ุณฺฉู | ุณูู: 1000 ุณฺฉู\n' +
              '**ุฑูุฏุงุฏูุง ูุตู**: ุฑูุฏุงุฏูุง ูฺู ุจุง ุฌูุงุฒ ุฎุงุต\n' +
              '**ฺุงูุดโูุง ููุชฺฏ**: ฺุงูุดโูุง ุฎุงุต ุจุง ูพุงุฏุงุดโูุง ููุญุตุฑ ุจู ูุฑุฏ',
        inline: false
      },
      { 
        name: '๐ฏ **ูฺฉุงุช ููู ุจุงุฒโูุง**', 
        value: 'โข ุญุฏุงูู ุดุฑุทโุจูุฏ: 20 ุณฺฉู\n' +
              'โข ุญุฏุงฺฉุซุฑ ุดุฑุทโุจูุฏ: 5000 ุณฺฉู\n' +
              'โข ูุงุจูุช ูุดุงูุฏู ุขูุงุฑ ู ุณุงุจูู ุจุงุฒโูุง ุฏุฑ ูพุฑููุงู\n' +
              'โข ุงูฺฉุงู ุงุฌุงุฏ ูุงุจ ุฎุตูุต ุจุฑุง ุจุงุฒ ุจุง ุฏูุณุชุงู\n' +
              'โข ููุดโูุง ูฺู ูโุชูุงููุฏ ุดุงูุณ ุจุฑุฏ ุฑุง ุงูุฒุงุด ุฏููุฏ',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ฺฉููโูุง
 */
function createClansHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ฐ ุฑุงูููุง ฺฉููโูุง ู ฺฏุฑููโูุง Ccoin')
    .setDescription('ุขุดูุง ุจุง ูุญูู ุณุงุฎุช ู ูุฏุฑุช ฺฉููโูุงุ ุฑุชุจูโุจูุฏ ุงุนุถุงุ ูุฒุงุง ู ูุนุงูุชโูุง ฺฏุฑูู')
    .setThumbnail('https://img.icons8.com/fluency/48/castle.png')
    .addFields(
      { 
        name: '๐ก๏ธ **ูุจุงู ฺฉูู**', 
        value: '**ฺฉูู ฺุณุชุ**: ฺฏุฑูู ุงุฒ ฺฉุงุฑุจุฑุงู ุจุง ุงูุฏุงู ูุดุชุฑฺฉ\n' +
              '**ูุฒูู ุณุงุฎุช ฺฉูู**: 5000 ุณฺฉู\n' +
              '**ุธุฑูุช ุงููู**: 15 ุนุถู (ูุงุจู ุงูุฒุงุด ุชุง 30 ุนุถู)\n' +
              '**ุณุทุญ ฺฉูู**: ุจุง ุงูุฌุงู ูุนุงูุชโูุง ฺฏุฑูู ุงูุฒุงุด ูโุงุจุฏ\n' +
              '**ุจุงูฺฉ ฺฉูู**: ูุญู ุฌูุนโุขูุฑ ุณุฑูุงู ฺฏุฑูู',
        inline: false
      },
      { 
        name: '๐ **ุฑุฏูโุจูุฏ ฺฉูู**', 
        value: '**ุฑูุจุฑ (Leader)**: ุณุงุฒูุฏู ฺฉูู - ูุฏุฑุช ฺฉุงูู\n' +
              '**ูุนุงูู (Co-Leader)**: ููุตูุจ ุดุฏู ุชูุณุท ุฑูุจุฑ - ูุฏุฑุช ุจุงูุง\n' +
              '**ุงุฑุดุฏ (Elder)**: ุงุนุถุง ุงุฑุชูุง ุงูุชู - ูุฏุฑุช ูุชูุณุท\n' +
              '**ุนุถู (Member)**: ุงุนุถุง ุนุงุฏ - ูุฏุฑุช ูุญุฏูุฏ',
        inline: false
      },
      { 
        name: '๐ฏ **ุณุงุฎุชูุงูโูุง ฺฉูู**', 
        value: '**ููุฑ ุงุตู (HQ)**: ุงุฑุชูุง ุธุฑูุช ฺฉูู\n' +
              '**ุฎุฒุงููโุฏุงุฑ (Treasury)**: ุงูุฒุงุด ูุญุฏูุฏุช ุจุงูฺฉ ฺฉูู\n' +
              '**ุณุฑุจุงุฒุฎุงูู (Barracks)**: ุงุฑุชูุง ูุฏุฑุช ุฏุฑ ูุงุฑ ฺฉูู\n' +
              '**ูุฑฺฉุฒ ุชุญููุงุช (Research Center)**: ุฏุณุชุฑุณ ุจู ููุงูุฑโูุง ุฌุฏุฏ\n' +
              '**ุจุฑุฌ ุฏุฏูโุจุงู (Watchtower)**: ุจูุจูุฏ ุฏูุงุน ุฏุฑ ุจุฑุงุจุฑ ุญููุงุช',
        inline: false
      },
      { 
        name: 'โ๏ธ **ูุงุฑ ฺฉููโูุง**', 
        value: '**ูุงุฑ ฺุณุชุ**: ุฑูุงุจุช 48 ุณุงุนุชู ุจู ุฏู ฺฉูู\n' +
              '**ูุฒูู ุดุฑฺฉุช**: 5000 ุณฺฉู ุงุฒ ุจุงูฺฉ ฺฉูู\n' +
              '**ุฌุงุฒู**: 10,000 ุณฺฉู + XP ูุงุจู ุชูุฌู\n' +
              '**ูุญูู ุดุฑฺฉุช**: ุชููุง ุชูุณุท ุฑูุจุฑ ุง ูุนุงูู\n' +
              '**ูุญูู ุงูุชุงุฒฺฏุฑ**: ุงูุฌุงู ุญููุงุช ู ฺฉุณุจ ุงูุชุงุฒ ุชูุณุท ุงุนุถุง',
        inline: false
      },
      { 
        name: '๐๏ธ **ุฌุฒุฑู ฺฉูู**', 
        value: '**ฺฉุงุฑฺฉุฑุฏ**: ููุจุน ุฏุฑุขูุฏ ุบุฑูุนุงู ุจุฑุง ฺฉูู\n' +
              '**ูุฒูู ุงุฑุชูุง**: 5000 ุณฺฉู ุงุฒ ุจุงูฺฉ ฺฉูู\n' +
              '**ุฏุฑุขูุฏ ุฑูุฒุงูู**: 100 ุณฺฉู ร ุณุทุญ ุฌุฒุฑู\n' +
              '**ูุญุฏูุฏุช ุณุทุญ**: ุญุฏุงฺฉุซุฑ ุจุฑุงุจุฑ ุจุง ุณุทุญ ฺฉูู',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ุฏูุณุช
 */
function createFriendsHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ฅ ุฑุงูููุง ุณุณุชู ุฏูุณุช Ccoin')
    .setDescription('ุขุดูุง ุจุง ุณุณุชู ุฏูุณุชุ ูุฏุฑุช ุฏูุณุชุงูุ ุณุทูุญ ุฏูุณุช ู ูุนุงูุชโูุง ูุดุชุฑฺฉ')
    .setThumbnail('https://img.icons8.com/fluency/48/group.png')
    .addFields(
      { 
        name: '๐ค **ูุจุงู ุณุณุชู ุฏูุณุช**', 
        value: '**ุงูุฒูุฏู ุฏูุณุช**: ุงุฒ ุทุฑู ููู ุฏูุณุชุงู ุง ูพุฑููุงู ฺฉุงุฑุจุฑ\n' +
              '**ุธุฑูุช ูุณุช ุฏูุณุชุงู**: 20 ููุฑ (ูุงุจู ุงูุฒุงุด ุจุง ุงุฑุชูุง ุณุทุญ)\n' +
              '**ุณุทุญ ุฏูุณุช**: ุจุง ุงูุฌุงู ูุนุงูุชโูุง ูุดุชุฑฺฉ ุงูุฒุงุด ูโุงุจุฏ\n' +
              '**ุชุฌุฑุจู ุฏูุณุช (XP)**: ูุนุงุฑ ูพุดุฑูุช ุณุทุญ ุฏูุณุช',
        inline: false
      },
      { 
        name: 'โญ **ุณุทูุญ ุฏูุณุช ู ูุฒุงุง**', 
        value: '**ุณุทุญ 1**: ุงูฺฉุงู ฺุช ุฎุตูุต ู ูุฏู ุฑูุฒุงูู (25 ุณฺฉู)\n' +
              '**ุณุทุญ 5**: ฺฉุงูุด ฺฉุงุฑูุฒุฏ ุงูุชูุงู (4% ุจู ุฌุง 5%)\n' +
              '**ุณุทุญ 10**: ุงูุฒุงุด ูุฏู ุฑูุฒุงูู (50 ุณฺฉู) ู ุชุฎูู ฺฏุฑูู\n' +
              '**ุณุทุญ 20**: ูุงุจูุช ุงูุชูุงู ุจุฏูู ฺฉุงุฑูุฒุฏ (1 ุจุงุฑ ุฏุฑ ุฑูุฒ)\n' +
              '**ุณุทุญ 50**: ุฏุฑุงูุช ูุดุงู ุฏูุณุช ุตูู ู ุฌุงุฒู ูฺู',
        inline: false
      },
      { 
        name: '๐ **ูุนุงูุชโูุง ูุดุชุฑฺฉ**', 
        value: '**ูุฏู ุฑูุฒุงูู**: ุงุฑุณุงู ูุฏู ุฑุงฺฏุงู ุจู ุฏูุณุชุงู\n' +
              '**ุจุงุฒ ุฏูุณุชุงูู**: XP ุจุดุชุฑ ุฏุฑ ุจุงุฒโูุง ุฏู ููุฑู\n' +
              '**ุฏุนูุช ุจู ูุงุจ**: ุงุฌุงุฏ ฺฏุฑูู ุจุงุฒ ุฎุตูุต\n' +
              '**ฺุงูุด ุฏูุณุชุงูู**: ุฑูุงุจุช ูุณุชูู ุจุง ุฌุงุฒู\n' +
              '**ูุฃููุฑุชโูุง ูุดุชุฑฺฉ**: ูุฃููุฑุชโูุง ูฺู ุฏู ููุฑู',
        inline: false
      },
      { 
        name: '๐ฌ **ฺุช ุฎุตูุต**', 
        value: '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ููู ุฏูุณุชุงู\n' +
              '**ุงูฺฉุงูุงุช**: ุงุฑุณุงู ูพุงูุ ุงุณุชฺฉุฑ ู ูุงู\n' +
              '**ุชุงุฑุฎฺู ูพุงูโูุง**: 100 ูพุงู ุงุฎุฑ\n' +
              '**ุญุฑู ุฎุตูุต**: ูพุงูโูุง ุชููุง ุจุฑุง ุฏู ุทุฑู ูุงุจู ูุดุงูุฏู ุงุณุช',
        inline: false
      },
      { 
        name: '๐ซ **ูุฏุฑุช ู ุงููุช**', 
        value: '**ูุณุฏูุฏุณุงุฒ**: ุฌููฺฏุฑ ุงุฒ ุงุฑุชุจุงุท ุจุง ฺฉุงุฑุจุฑ ุฎุงุต\n' +
              '**ฺฏุฒุงุฑุด**: ฺฏุฒุงุฑุด ฺฉุงุฑุจุฑ ูุชุฎูู ุจู ุชู ูพุดุชุจุงู\n' +
              '**ุญุฐู ุฏูุณุช**: ูพุงุงู ุฏุงุฏู ุจู ุฑุงุจุทู ุฏูุณุช\n' +
              '**ุญุงูุช ูุฎู**: ุนุฏู ููุงุด ูุถุนุช ุขููุงู ุจู ุฏฺฏุฑุงู',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ูุงููุฑุชโูุง
 */
function createQuestsHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ฏ ุฑุงูููุง ูุฃููุฑุชโูุง ู ุฏุณุชุงูุฑุฏูุง Ccoin')
    .setDescription('ุขุดูุง ุจุง ุงููุงุน ูุฃููุฑุชโูุงุ ูพุงุฏุงุดโูุงุ ุฏุณุชุงูุฑุฏูุง ู ูุญูู ุชฺฉูู ุขููุง')
    .setThumbnail('https://img.icons8.com/fluency/48/trophy.png')
    .addFields(
      { 
        name: '๐ **ูุฃููุฑุชโูุง ุฑูุฒุงูู**', 
        value: '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ููู ูุฃููุฑุชโูุง\n' +
              '**ุชุนุฏุงุฏ ูุฃููุฑุชโูุง**: 3 ูุฃููุฑุช ุฏุฑ ุฑูุฒ\n' +
              '**ูพุงุฏุงุด**: 50-100 ุณฺฉู ุจุฑุง ูุฑ ูุฃููุฑุช\n' +
              '**ููุน ูุนุงูุชโูุง**: ุงุฑุณุงู ูพุงูุ ุงูุฌุงู ุจุงุฒุ ุงุณุชูุงุฏู ุงุฒ ุงูฺฉุงูุงุช ุฑุจุงุช\n' +
              '**ูุซุงู**: ยซ10 ูพุงู ุฏุฑ ุณุฑูุฑ ุงุฑุณุงู ฺฉูุฏยป ุง ยซ3 ุจุงุฑ ุจุงุฒ ุดุฑ ุง ุฎุท ุงูุฌุงู ุฏูุฏยป',
        inline: false
      },
      { 
        name: '๐๏ธ **ูุฃููุฑุชโูุง ููุชฺฏ**', 
        value: '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ููู ูุฃููุฑุชโูุง (ุจุฎุด ููุชฺฏ)\n' +
              '**ุชุนุฏุงุฏ ูุฃููุฑุชโูุง**: 2 ูุฃููุฑุช ุฏุฑ ููุชู\n' +
              '**ูพุงุฏุงุด**: 200-500 ุณฺฉู ุจุฑุง ูุฑ ูุฃููุฑุช\n' +
              '**ููุน ูุนุงูุชโูุง**: ูุนุงูุชโูุง ูพฺุฏูโุชุฑ ู ุฒูุงูโุจุฑุชุฑ\n' +
              '**ูุซุงู**: ยซ5 ุจุงุฑ ุฏุฑ ุจุงุฒ ุฏูุฆู ุจุฑูุฏู ุดูุฏยป ุง ยซ3000 ุณฺฉู ุฏุฑ ุจุงูฺฉ ุฐุฎุฑู ฺฉูุฏยป',
        inline: false
      },
      { 
        name: '๐ **ูุฃููุฑุชโูุง ูุงูุงูู**', 
        value: '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ููู ูุฃููุฑุชโูุง (ุจุฎุด ูุงูุงูู)\n' +
              '**ุชุนุฏุงุฏ ูุฃููุฑุชโูุง**: 1 ูุฃููุฑุช ุฏุฑ ูุงู\n' +
              '**ูพุงุฏุงุด**: 1000-2000 ุณฺฉู + ุขุชู ูฺู\n' +
              '**ููุน ูุนุงูุชโูุง**: ฺุงูุดโูุง ุจุฒุฑฺฏ ู ูุณุชูุฑ\n' +
              '**ูุซุงู**: ยซุจู 50 ฺฉุงุฑุจุฑ ูุฎุชูู ุณฺฉู ุงูุชูุงู ุฏูุฏยป ุง ยซ15 ุฑูุฒ ูุชูุงู ุขููุงู ุจุงุดุฏยป',
        inline: false
      },
      { 
        name: '๐ **ุฏุณุชุงูุฑุฏูุง**', 
        value: '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ููู ูพุฑููุงู (ุจุฎุด ุฏุณุชุงูุฑุฏูุง)\n' +
              '**ูพุงุฏุงุด**: ุณฺฉูุ ูุดุงู ูฺูุ ุนูุงูู ูุฎุตูุต\n' +
              '**ุฏุณุชูโุจูุฏโูุง**: ุงูุชุตุงุฏุ ุจุงุฒุ ุงุฌุชูุงุนุ ุญุฑููโุง\n' +
              '**ูพุดุฑูุช ุชุฏุฑุฌ**: ูุฑ ุฏุณุชุงูุฑุฏ ฺูุฏู ุณุทุญ ุฏุงุฑุฏ ฺฉู ุจู ุชุฏุฑุฌ ุจุงุฒ ูโุดููุฏ\n' +
              '**ูุซุงู**: ยซุณุฑูุงูโุฏุงุฑยป (ุฏุงุดุชู 10,000 ุณฺฉู ุฏุฑ ุจุงูฺฉ) ุง ยซููุฑูุงู ุจุงุฒโูุงยป (100 ุจุฑุฏ)',
        inline: false
      },
      { 
        name: '๐ **ุณุณุชู ูพุดุฑูุช**', 
        value: '**ููุงุฑ ูพุดุฑูุช**: ููุงุด ูุฒุงู ูพุดุฑูุช ุฏุฑ ูุฑ ูุฃููุฑุช ุง ุฏุณุชุงูุฑุฏ\n' +
              '**ุงุทูุงุนโุฑุณุงู**: ุงุนูุงู ุฏุฑ ููฺฏุงู ุชฺฉูู ูุฃููุฑุช ุง ุฏุณุชุงูุฑุฏ\n' +
              '**ูพุงุฏุงุด ุฎูุฏฺฉุงุฑ**: ูุงุฑุฒ ูพุงุฏุงุด ุจู ูุญุถ ุชฺฉูู\n' +
              '**ุขูุงุฑ ฺฉู**: ููุงุด ุฏุฑุตุฏ ฺฉู ูุฃููุฑุชโูุง ู ุฏุณุชุงูุฑุฏูุง ุชฺฉูู ุดุฏู',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ูุฑูุดฺฏุงู
 */
function createShopHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ ุฑุงูููุง ูุฑูุดฺฏุงู ู ุขุชูโูุง Ccoin')
    .setDescription('ุขุดูุง ุจุง ุงููุงุน ุขุชูโูุงุ ูุญูู ุฎุฑุฏ ู ูุฑูุดุ ูุฏุฑุช ฺฉูููโูพุดุช ู ุงุณุชูุงุฏู ุงุฒ ุขุชูโูุง')
    .setThumbnail('https://img.icons8.com/fluency/48/shopping-cart.png')
    .addFields(
      { 
        name: '๐ฌ **ุณุงุฎุชุงุฑ ูุฑูุดฺฏุงู**', 
        value: '**ุฏุณุชูโุจูุฏโูุง**: ูุตุฑูุ ุชุฌูุฒุงุชุ ููุดโูุงุ ุฒุจุงุ ูฺู\n' +
              '**ุงุฑุฒ ุฎุฑุฏ**: ุณฺฉู (Ccoin) ุง ฺฉุฑุณุชุงู (ุงุฑุฒ ูฺู)\n' +
              '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ุฏุณุชูุฑ `/shop` ุง ููู ุงุตู\n' +
              '**ุชุฎููโูุง**: ุชุฎููโูุง ุฏูุฑูโุง ู ูฺู ุงุนุถุง ฺฉููโูุง ู VIP',
        inline: false
      },
      { 
        name: '๐ฆ **ุงููุงุน ุขุชูโูุง**', 
        value: '**ูุตุฑู**: ุขุชูโูุง ฺฉโุจุงุฑ ูุตุฑู ูุงููุฏ ุฌุนุจู ุดุงูุณุ ุจูุท ูุฑุนูโฺฉุด\n' +
              '**ุชุฌูุฒุงุช**: ุขุชูโูุง ุฏุงุฆู ูุงููุฏ ุงุณูุญูุ ุฒุฑู (ุจุฑุง ุจุงุฒโูุง ู ุฏูุฆู)\n' +
              '**ููุดโูุง**: VIPุ ุงูุณุงููโุง (ูุฒุงุง ุฎุงุต ูุงููุฏ ุชุฎูู ู ูพุงุฏุงุด ุจุดุชุฑ)\n' +
              '**ุฒุจุง**: ูพุฑููุงู ฺฉุงุณุชููุ ฺฉุงุฑุชโูุง ููุงุดุ ูุงุจ\n' +
              '**ูฺู**: ูพุชโูุงุ ุขุชูโูุง ูุญุฏูุฏ ู ฺฉูุงุจ',
        inline: false
      },
      { 
        name: '๐ **ุฌุนุจูโูุง ุดุงูุณ**', 
        value: '**ุฌุนุจู ุจุฑูุฒ**: ููุช: 500 ุณฺฉู - ุดุงูุณ ุขุชู ูุงุฏุฑ: 5%\n' +
              '**ุฌุนุจู ููุฑูโุง**: ููุช: 1000 ุณฺฉู - ุดุงูุณ ุขุชู ูุงุฏุฑ: 15%\n' +
              '**ุฌุนุจู ุทูุง**: ููุช: 2000 ุณฺฉู - ุดุงูุณ ุขุชู ูุงุฏุฑ: 30%\n' +
              '**ุฌุนุจู ุงููุงุณ**: ููุช: 20 ฺฉุฑุณุชุงู - ุดุงูุณ ุขุชู ูุงุฏุฑ: 60%',
        inline: false
      },
      { 
        name: '๐ญ **ููุดโูุง ูฺู**', 
        value: '**VIP**: 1000 ุณฺฉู (7 ุฑูุฒ) - ูุฒุงุง: 5% ุชุฎููุ 5% ุดุงูุณ ุจุดุชุฑุ 10% ูพุงุฏุงุด ุจุดุชุฑ\n' +
              '**ุงูุณุงููโุง**: 50 ฺฉุฑุณุชุงู (14 ุฑูุฒ) - ูุฒุงุง: 10% ุชุฎููุ 10% ุดุงูุณ ุจุดุชุฑุ 20% ูพุงุฏุงุด ุจุดุชุฑ\n' +
              '**ูพุงุฏุดุงู**: 100 ฺฉุฑุณุชุงู (30 ุฑูุฒ) - ูุฒุงุง: 15% ุชุฎููุ 15% ุดุงูุณ ุจุดุชุฑุ 30% ูพุงุฏุงุด ุจุดุชุฑ',
        inline: false
      },
      { 
        name: '๐ **ูุฏุฑุช ฺฉูููโูพุดุช**', 
        value: '**ูุญูู ุฏุณุชุฑุณ**: ุงุฒ ุทุฑู ุฏุณุชูุฑ `/inventory` ุง ููู ุงุตู\n' +
              '**ุธุฑูุช**: 20 ุขุชู (ูุงุจู ุงูุฒุงุด ุจุง ุงุฑุชูุง ุณุทุญ)\n' +
              '**ุงุณุชูุงุฏู ุงุฒ ุขุชู**: ุงูุชุฎุงุจ ุขุชู ู ฺฉูฺฉ ุฑู ุฏฺฉูู ยซุงุณุชูุงุฏูยป\n' +
              '**ูุฑูุด ุขุชู**: ูุฑูุด ุขุชูโูุง ุบุฑูุนุงู ุจุง 70% ููุช ุงุตู\n' +
              '**ุงูุชูุงู ุขุชู**: ุงุฑุณุงู ุขุชู ุจู ุฏูุณุชุงู (ุจุฑุฎ ุขุชูโูุง ุบุฑูุงุจู ุงูุชูุงู ูุณุชูุฏ)',
        inline: false
      }
    );
}

/**
 * ุงุฌุงุฏ Embed ุฑุงูููุง ููุด ูุตููุน CCOIN AI
 */
function createAIHelpEmbed(embed: EmbedBuilder): EmbedBuilder {
  return embed
    .setTitle('๐ง ุฑุงูููุง ููุด ูุตููุน CCOIN AI')
    .setDescription('ุขุดูุง ุจุง ูุงุจูุชโูุง ููุด ูุตููุน ุงุฎุชุตุงุต ู ุจูููโุณุงุฒ ุดุฏู ุฑุจุงุชุ ูุญูู ุงุณุชูุงุฏู ู ฺฉุงุฑุจุฑุฏูุง ูุฎุชูู ุขู')
    .setThumbnail('https://img.icons8.com/fluency/48/artificial-intelligence.png')
    .addFields(
      { 
        name: '๐ฎ **ูุนุฑู CCOIN AI**', 
        value: '**CCOIN AI ฺุณุชุ**: ููุด ูุตููุน ุงุฎุชุตุงุต ุฑุจุงุช Ccoin ุจุฑุง ุงุฑุงุฆู ุฎุฏูุงุช ููุดููุฏ\n' +
              '**ูุจุชู ุจุฑ**: ููุงูุฑ ูพุดุฑูุชู ููุด ูุตููุน ุจุง ุจูููโุณุงุฒ ู ุขููุฒุด ุงุฎุชุตุงุต\n' +
              '**ุฒุจุงูโูุง ูพุดุชุจุงู ุดุฏู**: ูุงุฑุณ ู ุงูฺฏูุณ ุจุง ุฏูุช ุจุงูุง\n' +
              '**ุณุฑุนุช ูพุงุณุฎฺฏู**: ุจูููโุณุงุฒ ุดุฏู ุชุง 65% ุณุฑุนโุชุฑ ุงุฒ ูุณุฎูโูุง ูุจู\n' +
              '**ุขููุฒุด ุณูุงุฑุด**: ูุฌูุฒ ุจู Fine-tuning ุจุฑุง ูพุงุณุฎฺฏู ุฏููโุชุฑ ุจู ฺฉุงุฑุจุฑุงู',
        inline: false
      },
      { 
        name: 'โก **ุฏุณุชูุฑุงุช ุงุตู**', 
        value: '**`/askai`**: ฺฏูุชฺฏู ูุณุชูู ุจุง ููุด ูุตููุน CCOIN AI\n' +
              '**`/image-analyze`**: ุชุญูู ู ุชูุตู ุชุตุงูุฑ ุขูพููุฏ ุดุฏู\n' +
              '**`/content-generate`**: ุชููุฏ ูุญุชูุง ูุชู ุงุฎุชุตุงุต\n' +
              '**`/code-assistant`**: ฺฉูฺฉ ุฏุฑ ููุดุชู ู ุฏุจุงฺฏ ฺฉุฏ ุจุฑูุงููโููุณ\n' +
              '**`/learn`**: ุฏุฑุงูุช ุขููุฒุด ุฏุฑ ููุถูุนุงุช ูุฎุชูู\n' +
              '**`/ping`**: ุจุฑุฑุณ ูุถุนุช ุงุชุตุงู ู ูพูฺฏ ููุด ูุตููุน',
        inline: false
      },
      { 
        name: '๐ฏ **ูุงุจูุชโูุง ุงุตู**', 
        value: '**ฺฏูุชฺฏู ููุดููุฏ**: ูพุงุณุฎฺฏู ุจู ุณูุงูุงุช ู ูฺฉุงููู ุทุจุน ุจุง ููู ุฏูู ุจุงูุช\n' +
              '**ุชุญูู ุชุตูุฑ**: ุดูุงุณุง ุงุฌุฒุง ุชุตูุฑุ ุชูุตู ูุญุชูุง ู ุงุณุชุฎุฑุงุฌ ูุชู\n' +
              '**ุชููุฏ ูุญุชูุง**: ุงุฌุงุฏ ูุชูโูุง ุฎูุงูุงููุ ุฏุงุณุชุงูุ ุดุนุฑ ู ูุญุชูุง ุขููุฒุด\n' +
              '**ฺฉูฺฉ ุจุฑูุงููโููุณ**: ููุดุชูุ ุฏุจุงฺฏ ู ุชูุถุญ ฺฉุฏ ุจู ุฒุจุงูโูุง ูุฎุชูู\n' +
              '**ุขููุฒุด**: ุชูุถุญ ููุงูู ูพฺุฏู ุจู ุฒุจุงู ุณุงุฏู ู ุงุฑุงุฆู ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ',
        inline: false
      },
      { 
        name: '๐ **ููุงูุฑโูุง ูพุดุฑูุชู**', 
        value: '**ุงูุชุฎุงุจ ููุดููุฏ ูุฏู**: ุงูุชุฎุงุจ ุฎูุฏฺฉุงุฑ ูุฏู ููุงุณุจ ุจุฑุงุณุงุณ ูพฺุฏฺฏ ุฏุฑุฎูุงุณุช\n' +
              '**ูุฏูโูุง ุจูููโุณุงุฒ ุดุฏู**: ุณู ูุฏู ูุฎุชูู ุจุฑุง ูพุงุณุฎฺฏู ุณุฑุน ู ุฏูู\n' +
              '**ูุฏู Flash**: ุจุฑุง ูพุงุณุฎโูุง ุณุฑุน ุจู ุณูุงูุงุช ุณุงุฏู (315-400ms)\n' +
              '**ูุฏู Pro**: ุจุฑุง ูพุงุณุฎโูุง ุนููโุชุฑ ุจู ุณูุงูุงุช ูพฺุฏู (450-550ms)\n' +
              '**ูุฏู Tuned**: ูุฏู ุขููุฒุดโุฏุฏู ุงุฎุชุตุงุต ุจุฑุง ูพุงุณุฎฺฏู ุฏูู ุจู ุณูุงูุงุช ูุฑุชุจุท ุจุง Ccoin',
        inline: false
      },
      { 
        name: 'โ๏ธ **ุชูุธูุงุช ู ุดุฎุตโุณุงุฒ**', 
        value: '**ุชูุธู ุฒุจุงู**: ุงูุชุฎุงุจ ุฒุจุงู ูพุดโูุฑุถ ุจุฑุง ุชุนุงูู ุจุง AI\n' +
              '**ุณุทุญ ุฌุฒุฆุงุช**: ุชูุธู ูุฒุงู ุชูุถุญุงุช ุฏุฑ ูพุงุณุฎโูุง (ฺฉูุชุงูุ ูุชูุณุทุ ููุตู)\n' +
              '**ุญุงูุช ุฎูุงูุช**: ุชูุธู ูุฒุงู ุฎูุงูุช ู ุชููุน ุฏุฑ ูพุงุณุฎโูุง ุชููุฏ ุดุฏู\n' +
              '**ุฐุฎุฑู ูพุงุณุฎโูุง**: ุงูฺฉุงู ุฐุฎุฑู ูพุงุณุฎโูุง ููุฏ ุจุฑุง ุงุณุชูุงุฏู ุจุนุฏ',
        inline: false
      },
      { 
        name: '๐ก **ูฺฉุงุช ุงุณุชูุงุฏู ุจููู**', 
        value: '**ุณูุงูุงุช ุฏูู**: ูุฑ ฺู ุณูุงู ุดูุง ุฏููโุชุฑ ุจุงุดุฏุ ูพุงุณุฎ ุจูุชุฑ ุฏุฑุงูุช ูโฺฉูุฏ\n' +
              '**ุงุณุชูุงุฏู ุงุฒ ูุฑูุชโูุง**: ุจุฑุง ูุญุชูุง ุณุงุฎุชุงุฑุงูุชูุ ูุฑูุช ููุฑุฏ ูุธุฑ ุฑุง ูุดุฎุต ฺฉูุฏ\n' +
              '**ูุญุฏูุฏุชโูุง**: ุจุฑุฎ ุฏุฑุฎูุงุณุชโูุง ูุงููุฏ ุชููุฏ ูุญุชูุง ูุงููุงุณุจ ูพุฐุฑูุชู ููโุดูุฏ\n' +
              '**ุงุฑุณุงู ุจุงุฒุฎูุฑุฏ**: ุจุง ุงุฑุณุงู ุจุงุฒุฎูุฑุฏ ุจู ูุง ฺฉูฺฉ ฺฉูุฏ ููุด ูุตููุน ุฑุง ุจูุจูุฏ ุฏูู',
        inline: false
      },
      {
        name: '๐ **ฺฉุงุฑุจุฑุฏูุง ูพุดุฑูุชู**',
        value: '**ุชุญูู ุฏุงุฏู**: ุชุญูู ู ุชูุณุฑ ุฏุงุฏูโูุง ุขูุงุฑ ู ุงุทูุงุนุงุช\n' +
              '**ุชุฑุฌูู ูุชูู**: ุชุฑุฌูู ุฏูู ุจู ุฒุจุงูโูุง ูุงุฑุณ ู ุงูฺฏูุณ\n' +
              '**ุฎูุงุตูโุณุงุฒ**: ุฎูุงุตู ฺฉุฑุฏู ูุชูู ุทููุงู ุจุง ุญูุธ ูฺฉุงุช ฺฉูุฏ\n' +
              '**ุทุฑุงุญ ุงุฏู**: ุงุฏูโูพุฑุฏุงุฒ ุจุฑุง ูพุฑูฺูโูุง ู ูุญุชูุง ุฎูุงูุงูู\n' +
              '**ุญู ูุณุงุฆู**: ฺฉูฺฉ ุฏุฑ ุญู ูุณุงุฆู ุนููุ ุฑุงุถ ู ููุทู',
        inline: false
      }
    );
}

/**
 * ุฌุณุชุฌู ุฏุฑ ุฑุงูููุง ุจุฑุงุณุงุณ ฺฉูุฏูุงฺู
 * @param interaction ุชุนุงูู ฺฉุงุฑุจุฑ
 * @param query ฺฉูุฏูุงฺู ุฌุณุชุฌู
 */
export async function searchHelp(interaction: ButtonInteraction | ChatInputCommandInteraction, query: string) {
  try {
    // ูพุฑุฏุงุฒุด ฺฉูุฏูุงฺู ุฌุณุชุฌู
    const searchTerm = query.trim().toLowerCase();
    
    if (searchTerm.length < 2) {
      if (interaction.deferred) {
        await interaction.editReply({ content: 'โ๏ธ ูุทูุงู ุญุฏุงูู 2 ุญุฑู ุจุฑุง ุฌุณุชุฌู ูุงุฑุฏ ฺฉูุฏ.' });
      } else {
        await interaction.reply({ content: 'โ๏ธ ูุทูุงู ุญุฏุงูู 2 ุญุฑู ุจุฑุง ุฌุณุชุฌู ูุงุฑุฏ ฺฉูุฏ.', ephemeral: true });
      }
      return;
    }
    
    // ุงุฌุงุฏ ุงูุจุฏ ูุชุฌู ุฌุณุชุฌู ุจุง ุทุฑุงุญ ุฌุฏุฏ
    const embed = new EmbedBuilder()
      .setColor('#8A2BE2') // ุฑูฺฏ ุจููุด ุชุฑู ุจุฑุง ููุงููฺฏ ุจุง ููู ุงุตู
      .setTitle(`๐ ูุชุงุฌ ุฌุณุชุฌู ุจุฑุง: "${query}"`)
      .setDescription('ููุงุฑุฏ ุฒุฑ ุฏุฑ ุฑุงูููุง ุฑุจุงุช ุงูุช ุดุฏ:')
      .setThumbnail('https://img.icons8.com/fluency/48/search.png')
      .setFooter({ 
        text: 'ุงุฒ Ccoin Bot ุจุง ููุด ูุตููุน ุงุฎุชุตุงุต CCOIN AI ูุฐุช ุจุจุฑุฏ! | ุจุฑุง ูุดุงูุฏู ููู ุงุตู ุงุฒ /menu ุงุณุชูุงุฏู ฺฉูุฏ', 
        iconURL: interaction.client.user?.displayAvatarURL() 
      })
      .setTimestamp();
    
    // ุฌุณุชุฌู ุฏุฑ ุจุฎุดโูุง ูุฎุชูู ุฑุงูููุง
    const results: { category: string; title: string; content: string; }[] = [
      // ููุท ฺูุฏ ููููู ุจุฑุง ุชุณุช
    ];
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ฺฉู
    if (searchTerm.includes('ุฑุงูููุง') || searchTerm.includes('ฺฉูฺฉ') || 
        searchTerm.includes('ุฏุณุชูุฑ') || searchTerm.includes('ฺฉูู') || 
        searchTerm.includes('ุณฺฉู') || searchTerm.includes('ุจุงุช') ||
        searchTerm.includes('ููู') || searchTerm.includes('ุตูุญู') ||
        searchTerm.includes('ุจุฎุด')) {
      results.push({
        category: 'general',
        title: '๐ ุฑุงูููุง ฺฉู',
        content: 'ุฑุงูููุง ุฌุงูุน ุฑุจุงุชุ ุฏุณุชูุฑุงุช ุงุตู ู ูุญูู ุดุฑูุน ฺฉุงุฑ'
      });
    }
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ุงูุชุตุงุฏ
    if (searchTerm.includes('ุจุงูฺฉ') || searchTerm.includes('ุณฺฉู') || 
        searchTerm.includes('ุงูุชุตุงุฏ') || searchTerm.includes('ูพูู') || 
        searchTerm.includes('ุงูุชูุงู') || searchTerm.includes('ฺฉู ูพูู') ||
        searchTerm.includes('ฺฉุฑุณุชุงู')) {
      results.push({
        category: 'economy',
        title: '๐ฐ ุณุณุชู ุงูุชุตุงุฏ',
        content: 'ูุฏุฑุช ุณฺฉูโูุงุ ุจุงูฺฉุ ุงูุชูุงู ูพูู ู ฺฉุณุจ ุฏุฑุขูุฏ'
      });
    }
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ุจุงุฒโูุง
    if (searchTerm.includes('ุจุงุฒ') || searchTerm.includes('ุดุฑุท') || 
        searchTerm.includes('ุฏูุฆู') || searchTerm.includes('ุชูุฑูููุช') || 
        searchTerm.includes('ุฌุงุฒู') || searchTerm.includes('ูุณุงุจูู') ||
        searchTerm.includes('ฺฏุฑุฏููู') || searchTerm.includes('ูุงูุง') || 
        searchTerm.includes('ฺฏุฑฺฏ ููุง')) {
      results.push({
        category: 'games',
        title: '๐ฎ ุจุงุฒโูุง ู ุณุฑฺฏุฑู',
        content: 'ุงููุงุน ุจุงุฒโูุง ุชฺฉโููุฑูุ ุฑูุงุจุช ู ฺฏุฑูู'
      });
    }
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ฺฉููโูุง
    if (searchTerm.includes('ฺฉูู') || searchTerm.includes('ฺฏุฑูู') || 
        searchTerm.includes('ุฑูุจุฑ') || searchTerm.includes('ุนุถู') || 
        searchTerm.includes('ุฌูฺฏ') || searchTerm.includes('ูุงุฑ') ||
        searchTerm.includes('ุงุชุญุงุฏ')) {
      results.push({
        category: 'clans',
        title: '๐ฐ ฺฉููโูุง ู ฺฏุฑููโูุง',
        content: 'ุณุงุฎุช ู ูุฏุฑุช ฺฉููุ ุฑุฏูโุจูุฏ ุงุนุถุง ู ูุนุงูุชโูุง ฺฏุฑูู'
      });
    }
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ุฏูุณุช
    if (searchTerm.includes('ุฏูุณุช') || searchTerm.includes('ุฑูู') || 
        searchTerm.includes('ฺุช') || searchTerm.includes('ูพุงู') || 
        searchTerm.includes('ูุณุฏูุฏ') || searchTerm.includes('ุงุฑุชุจุงุท')) {
      results.push({
        category: 'friends',
        title: '๐ฅ ุณุณุชู ุฏูุณุช',
        content: 'ุงูุฒูุฏู ุฏูุณุชุ ฺุช ุฎุตูุต ู ูุนุงูุชโูุง ูุดุชุฑฺฉ'
      });
    }
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ูุฃููุฑุชโูุง
    if (searchTerm.includes('ูุงููุฑุช') || searchTerm.includes('ูุฃููุฑุช') || 
        searchTerm.includes('ุฏุณุชุงูุฑุฏ') || searchTerm.includes('ุฌุงุฒู') || 
        searchTerm.includes('ููุชฺฏ') || searchTerm.includes('ุฑูุฒุงูู') ||
        searchTerm.includes('ฺฉูุณุช') || searchTerm.includes('ฺุงูุด')) {
      results.push({
        category: 'quests',
        title: '๐ฏ ูุฃููุฑุชโูุง ู ุฏุณุชุงูุฑุฏูุง',
        content: 'ุงููุงุน ูุฃููุฑุชโูุง ุฑูุฒุงููุ ููุชฺฏ ู ูุงูุงูู'
      });
    }
    
    // ุจุฑุฑุณ ุนุจุงุฑุช ุฏุฑ ุฑุงูููุง ูุฑูุดฺฏุงู
    if (searchTerm.includes('ูุฑูุดฺฏุงู') || searchTerm.includes('ุฎุฑุฏ') || 
        searchTerm.includes('ุขุชู') || searchTerm.includes('ฺฉููู') || 
        searchTerm.includes('ุฌุนุจู') || searchTerm.includes('ููุด') ||
        searchTerm.includes('ฺฉู') || searchTerm.includes('ุจฺฉโูพฺฉ') ||
        searchTerm.includes('ูุฑูุด')) {
      results.push({
        category: 'shop',
        title: '๐ ูุฑูุดฺฏุงู ู ุขุชูโูุง',
        content: 'ุฎุฑุฏ ู ูุฑูุด ุขุชูโูุงุ ูุฏุฑุช ฺฉูููโูพุดุช'
      });
    }
    
    // ุงูุฒูุฏู ูุชุงุฌ ุจู ุงูุจุฏ
    if (results.length > 0) {
      results.forEach((result, index) => {
        embed.addFields({
          name: `${index + 1}. ${result.title}`,
          value: `${result.content}\n*ุจุฑุง ูุดุงูุฏู ฺฉุงูู ุงู ุจุฎุดุ ุงุฒ ุฏฺฉูู ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ.*`,
          inline: false
        });
      });
    } else {
      embed.setDescription('โ๏ธ ูฺ ูุชุฌูโุง ุจุฑุง ุฌุณุชุฌู ุดูุง ุงูุช ูุดุฏ. ูุทูุงู ุงุฒ ฺฉูุฏูุงฺูโูุง ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ ุง ุจู ููู ุฑุงูููุง ุงุตู ูุฑุงุฌุนู ฺฉูุฏ.');
    }
    
    // ุงุฌุงุฏ ุฏฺฉููโูุง ูุชุงุฌ
    const buttonRows: ActionRowBuilder<ButtonBuilder>[] = [];
    
    if (results.length > 0) {
      const resultButtons = new ActionRowBuilder<ButtonBuilder>();
      
      results.slice(0, Math.min(5, results.length)).forEach((result, index) => {
        const emoji = result.title.split(' ')[0]; // ุงุณุชุฎุฑุงุฌ ุงููุฌ ุงุฒ ุนููุงู
        resultButtons.addComponents(
          new ButtonBuilder()
            .setCustomId(`help_view_${result.category}`)
            .setLabel(`${result.title.split(' ')[1]}`) // ุญุฐู ุดูุงุฑู ฺฏุฐุงุฑ ุจุฑุง ุฒุจุง ุจุดุชุฑ
            .setEmoji(emoji) // ุงูุฒูุฏู ุงููุฌ ุจู ุฏฺฉูู
            .setStyle(ButtonStyle.Primary)
        );
      });
      
      buttonRows.push(resultButtons);
    }
    
    // ุฏฺฉููโูุง ููู ุจุง ุทุฑุงุญ ุฌุฏุฏ
    const menuButtons = new ActionRowBuilder<ButtonBuilder>()
      .addComponents(
        new ButtonBuilder()
          .setCustomId('help')
          .setLabel('ุจุงุฒฺฏุดุช ุจู ุฑุงูููุง')
          .setEmoji('๐')
          .setStyle(ButtonStyle.Secondary),
        new ButtonBuilder()
          .setCustomId('menu')
          .setLabel('ููู ุงุตู')
          .setEmoji('๐')
          .setStyle(ButtonStyle.Primary)
      );
    
    buttonRows.push(menuButtons);
    
    // ุงุฑุณุงู ูพุงุณุฎ
    if (interaction.deferred) {
      await interaction.editReply({
        embeds: [embed],
        components: buttonRows
      });
    } else {
      await interaction.reply({
        embeds: [embed],
        components: buttonRows,
        ephemeral: true
      });
    }
  } catch (error) {
    console.error('Error in searchHelp:', error);
    if (interaction.deferred) {
      await interaction.editReply({ content: 'โ ุฎุทุง ุฏุฑ ุฌุณุชุฌู ุฑุงูููุง ุฑุฎ ุฏุงุฏ.' });
    } else if (!interaction.replied) {
      await interaction.reply({ content: 'โ ุฎุทุง ุฏุฑ ุฌุณุชุฌู ุฑุงูููุง ุฑุฎ ุฏุงุฏ.', ephemeral: true });
    }
  }
}