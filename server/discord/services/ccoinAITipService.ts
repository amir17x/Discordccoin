/**
 * ุณุฑูุณ ุชููุฏ ูฺฉุงุช ุจุง ุงุณุชูุงุฏู ุงุฒ CCOIN AI
 * ุงู ูุงู ุฌุงฺฏุฒู ูุงฺฏูฺฏ ูุณ ุดุฏู ู ุงุฒ ุณุฑูุณ CCOIN AI (Gemini) ุงุณุชูุงุฏู ูโฺฉูุฏ
 */

import { generateAIResponse } from './aiService';
import { log } from '../../vite';

// ูุฌููุนู ููุถูุนุงุช ุชุฎุตุต ุจุฑุง ุชููุฏ ูฺฉุงุช - ุฏุณุชูโุจูุฏ ุฏููโุชุฑ ู ููุธูโุชุฑ
export const tipTopics = [
  // ูุฏุฑุช ุงูุชุตุงุฏ
  "ุณุณุชู ุจุงูฺฉ Ccoin",  
  "ูุฏุฑุช ุณฺฉูโูุง ู ุฐุฎุฑูโุณุงุฒ",
  "ุฑุงูฺฉุงุฑูุง ุงูุฒุงุด ุฏุฑุขูุฏ ุฑูุฒุงูู",
  "ููุงุจุน ฺฉุณุจ Ccoin ู ฺฉุฑุณุชุงู",
  "ุณุฑูุงูโฺฏุฐุงุฑ ุฏุฑ ุจุงุฒุงุฑ ุณูุงู",
  "ุชุฑููุฏูุง ูุนุงููุงุช ู ุฎุฑุฏ ู ูุฑูุด",
  "ุณุณุชู ูุงูโุฏู ู ูุฑุถ",
  
  // ุณุณุชู ฺฉููโูุง
  "ุชุดฺฉู ู ูุฏุฑุช ฺฉูู",
  "ุงุณุชุฑุงุชฺโูุง ูุจุฑุฏ ฺฉููโูุง",
  "ูุฒุงุง ุนุถูุช ุฏุฑ ฺฉููโูุง",
  "ุงุฑุชูุงุก ฺฉูู ู ุงูุฒุงุด ุณุทุญ",
  "ูฺฉุงุช ููู ุจุฑุง ุฑูุจุฑุงู ฺฉูู",
  "ุฑุชุจูโุจูุฏ ฺฉููโูุง ู ุฑูุงุจุช",
  
  // ุจุงุฒโูุง ุชุนุงูู
  "ุงุณุชุฑุงุชฺโูุง ููููุช ุฏุฑ ุจุงุฒ ฺฏุฑฺฏูู",
  "ุชุงฺฉุชฺฉโูุง ุจุฑูุฏู ุดุฏู ุฏุฑ ุจุงุฒ ูุงูุง",
  "ุชุฑููุฏูุง ุจุงุฒ ุจูฺฏู",
  "ฺุงูุดโูุง ูุฎู ู ุฌูุงุฒ ูฺู",
  "ุฑุงูููุง ููโฺฏูโูุง ู ุจุงุฒโูุง ุดุงูุณ",
  
  // ุณุณุชู ุงุฌุชูุงุน
  "ฺฏุณุชุฑุด ุฑูุงุจุท ุฏูุณุช ุฏุฑ Ccoin",
  "ุณุณุชู ูุฏูโุฏู ุจู ุฏูุณุชุงู",
  "ฺุชโูุง ูุงุดูุงุณ ู ุงุตูู ุงุณุชูุงุฏู",
  "ุณุงุฎุชู ุดุจฺฉู ุงุฌุชูุงุน ุฏุฑ Ccoin",
  
  // ุงูฺฉุงูุงุช ูพุดุฑูุชู
  "ุฌูุงูโูุง ููุงุฒ ู ฺฉุงุฑุจุฑุฏ ุขููุง",
  "ูพุชโูุง ูุฌุงุฒ ู ูุญูู ุงุฑุชูุงุก ุขููุง",
  "ุขุชูโูุง ฺฉูุงุจ ู ุฑูุดโูุง ุฏุณุชุงุจ",
  "ุณุณุชู ุฏุณุชุงูุฑุฏูุง ู ูุดุงูโูุง",
  
  // ุจุฑุง ุชุงุฒูโูุงุฑุฏุงู
  "ุดุฑูุน ูุฏุฑุชููุฏ ุฏุฑ Ccoin",
  "ุฏุณุชูุฑุงุช ุงุณุงุณ ุจุฑุง ุชุงุฒูโูุงุฑุฏุงู",
  "ูุณุฑ ูพุดุฑูุช ุณุฑุน ุฏุฑ ุจุงุฒ",
  
  // ุงููุช ู ุชูุธูุงุช
  "ูุญุงูุธุช ุงุฒ ุญุณุงุจ ู ุณฺฉูโูุง",
  "ุชูุธูุงุช ูพุดุฑูุชู ูพุฑููุงู",
  "ุดุฎุตโุณุงุฒ ุชุฌุฑุจู ุจุงุฒ"
];

/**
 * ุณุฑูุณ ูฺฉุงุช CCOIN AI
 */
export class CcoinAITipService {
  /**
   * ุชููุฏ ฺฉ ูฺฉุชู ุงุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ CCOIN AI
   * @returns ููู ุจุฑุง ุฏุฑุงูุช ฺฉ ูฺฉุชู ุชููุฏ ุดุฏู ุชูุณุท ููุด ูุตููุน
   */
  async generateRandomTip(): Promise<string> {
    try {
      // ุงูุชุฎุงุจ ฺฉ ููุถูุน ุงุชูุงู ุงุฒ ูุณุช ููุถูุนุงุช
      const randomTopic = tipTopics[Math.floor(Math.random() * tipTopics.length)];
      
      // ูุงฺฏ ฺฉุฑุฏู ููุถูุน ุงูุชุฎุงุจ ุดุฏู
      log(`๐ฒ ููุถูุน ุงุชูุงู ุจุฑุง ุชููุฏ ูฺฉุชู: ${randomTopic}`, 'discord');
      
      return this.generateTopicTip(randomTopic);
    } catch (error) {
      log(`โ ุฎุทุง ุฏุฑ ุชููุฏ ูฺฉุชู ููุดููุฏ ุงุชูุงู: ${error}`, 'error');
      
      // ุฏุฑ ุตูุฑุช ุฎุทุงุ ฺูุฏ ูฺฉุชู ูพุดโูุฑุถ ุฌุฐุงุจ ุจุง ุงููุฌโูุง ูุชููุน ู ุธุงูุฑ ุจูุชุฑ
      const defaultTips = [
        "๐ฅ๐ฐ ุฑููุง! ุจุง ุฏุณุชูุฑ `/daily` ูุฑ ุฑูุฒ ู ุฌุงุฒู ุฎูู ุจฺฏุฑู ู ุงฺฏู ท ุฑูุฒ ูพุดุช ุณุฑ ูู ุจุงูุ ุฌูุงุฒ ูฺูโุง ุงูุชุธุงุฑุชูู ุฑู ูฺฉุดู! ๐โจ ุงุณุชุฑฺฉ ุฎูุฏุชูู ุฑู ุญูุธ ฺฉูู ู ูุฌูุฏ ุจุงุดู! ๐ฏ",
        "๐๐ฆ ุขุง ูโุฏููุณุช ุจุง ุฐุฎุฑู ฺฉุฑุฏู ุณฺฉูโูุงุช ุชู ุจุงูฺฉ ุจุง ุฏุณุชูุฑ `/bank deposit`ุ ูุฑ ุณุงุนุช ุณูุฏ ุฏุฑุงูุช ูโฺฉูุ ๐ ูพูู ููุดููุฏ ุฑู ููุดููุฏุงูู ุณุฑูุงูโฺฏุฐุงุฑ ฺฉู! ๐ง๐ธ",
        "โ๏ธ๐ก๏ธ ุฏูุณุชุงู! ุจุง ุดุฑฺฉุช ุฏุฑ ุฏูุฆูโูุง ูโุชููุฏ ุณฺฉูโูุง ุฑูุจโุชูู ุฑู ุจู ุฏุณุช ุจุงุฑุฏ! ููุท ฺฉุงูู ุฏุณุชูุฑ `/duel` ุฑู ูุงุฑุฏ ฺฉูุฏ ู ุญุฑู ุฎูุฏุชูู ุฑู ุจู ูุจุงุฑุฒู ุฏุนูุช ฺฉูุฏ! ๐๐ฅ",
        "๐ฎ๐ฏ ุขุง ุงุฒ ุจุงุฒโูุง ฺฏุฑูู ูุซู ฺฏุฑฺฏูู ู ูุงูุง ุฎุจุฑ ุฏุงุฑุ ุงุฒ ููู ุจุงุฒโูุง ุงุณุชูุงุฏู ฺฉู ู ู ุฌูุณู ุจุงุฒ ุจุง ุฏูุณุชุงุช ุฑุงู ุจูุฏุงุฒ! ๐บ๐ต๏ธโโ๏ธ ุณุฑฺฏุฑู ู ูุฌุงู ุฏุฑ ุงูุชุธุงุฑุชู!",
        "๐๐ฐ ูโุฏููุณุช ูโุชูู ุจุง ุฏูุณุชุงุช ู ฺฉูู ุชุดฺฉู ุจุฏ ู ุฏุฑ ุฑูุงุจุชโูุง ุจู ฺฉูู ุดุฑฺฉุช ฺฉูุ ุจุง ุฏุณุชูุฑ `/clan create` ุดุฑูุน ฺฉู ู ุจู ูุฏุฑุช ุดูุงุฑู ฺฉ ุณุฑูุฑ ุชุจุฏู ุดู! ๐๐ช"
      ];
      
      // ฺฉ ูฺฉุชู ุงุชูุงู ุงูุชุฎุงุจ ฺฉู
      return defaultTips[Math.floor(Math.random() * defaultTips.length)];
    }
  }

  /**
   * ุชููุฏ ฺฉ ูฺฉุชู ุฏุฑ ููุฑุฏ ููุถูุน ูุดุฎุต
   * @param topic ููุถูุน ุจุฑุง ุชููุฏ ูฺฉุชู
   * @returns ููู ุจุฑุง ุฏุฑุงูุช ฺฉ ูฺฉุชู ุชููุฏ ุดุฏู ุชูุณุท ููุด ูุตููุน
   */
  async generateTopicTip(topic: string): Promise<string> {
    try {
      // ุงููุฌโูุง ุชุฎุตุต ุจุฑ ุงุณุงุณ ููุถูุน - ุจุฑุง ุบูโุชุฑ ฺฉุฑุฏู ุฎุฑูุฌ
      const topicEmojis: {[key: string]: string} = {
        // ูุฏุฑุช ุงูุชุตุงุฏ
        "ุณุณุชู ุจุงูฺฉ Ccoin": "๐ฆ๐ฐ๐ต๐๐๐๐งฎ",
        "ูุฏุฑุช ุณฺฉูโูุง ู ุฐุฎุฑูโุณุงุฒ": "๐ฐ๐ฆ๐ต๐น๐๐๐ธ",
        "ุฑุงูฺฉุงุฑูุง ุงูุฒุงุด ุฏุฑุขูุฏ ุฑูุฒุงูู": "๐๐ธ๐ฐโฑ๏ธ๐นโจ๐ต",
        "ููุงุจุน ฺฉุณุจ Ccoin ู ฺฉุฑุณุชุงู": "๐๐ฐ๐ฎโจ๐๐ต๐งฟ",
        "ุณุฑูุงูโฺฏุฐุงุฑ ุฏุฑ ุจุงุฒุงุฑ ุณูุงู": "๐๐๐๐น๐ข๐ผ๐ฐ",
        "ุชุฑููุฏูุง ูุนุงููุงุช ู ุฎุฑุฏ ู ูุฑูุด": "๐ค๐ฑ๐ฐ๐๐๐๐น",
        "ุณุณุชู ูุงูโุฏู ู ูุฑุถ": "๐ตโ๏ธ๐ฐ๐โฑ๏ธ๐๐ฆ",
        
        // ุณุณุชู ฺฉููโูุง
        "ุชุดฺฉู ู ูุฏุฑุช ฺฉูู": "๐ฐ๐๐ฅ๐ช๐ก๏ธโ๏ธ๐ฏ",
        "ุงุณุชุฑุงุชฺโูุง ูุจุฑุฏ ฺฉููโูุง": "โ๏ธ๐ก๏ธ๐๐ฅ๐ฅ๐ฏ๐ฅ",
        "ูุฒุงุง ุนุถูุช ุฏุฑ ฺฉููโูุง": "๐ฐ๐ค๐ฐ๐๐ฅ๐ก๏ธ๐",
        "ุงุฑุชูุงุก ฺฉูู ู ุงูุฒุงุด ุณุทุญ": "๐ฐโฌ๏ธ๐ช๐โจ๐๐",
        "ูฺฉุงุช ููู ุจุฑุง ุฑูุจุฑุงู ฺฉูู": "๐๐ฐ๐ฅ๐ง๐ผ๐ฃ๏ธ๐ข",
        "ุฑุชุจูโุจูุฏ ฺฉููโูุง ู ุฑูุงุจุช": "๐๐ฅ๐ฅ๐ฅ๐๐ฐโ๏ธ",
        
        // ุจุงุฒโูุง ุชุนุงูู
        "ุงุณุชุฑุงุชฺโูุง ููููุช ุฏุฑ ุจุงุฒ ฺฏุฑฺฏูู": "๐บ๐๐๐๏ธ๐ญ๐ฒ๐ฒ",
        "ุชุงฺฉุชฺฉโูุง ุจุฑูุฏู ุดุฏู ุฏุฑ ุจุงุฒ ูุงูุง": "๐ต๏ธโโ๏ธ๐ซ๐ญ๐ง๐๐ฅ๐",
        "ุชุฑููุฏูุง ุจุงุฒ ุจูฺฏู": "๐ฎ๐ฏ๐ฒ๐ช๐ฐ๐ญโจ",
        "ฺุงูุดโูุง ูุฎู ู ุฌูุงุฒ ูฺู": "๐๐๐ฏ๐ฎ๐๐โจ",
        "ุฑุงูููุง ููโฺฏูโูุง ู ุจุงุฒโูุง ุดุงูุณ": "๐ฒ๐ฎ๐ฏ๐ช๐ฐ๐ญ๐",
        
        // ุณุณุชู ุงุฌุชูุงุน
        "ฺฏุณุชุฑุด ุฑูุงุจุท ุฏูุณุช ุฏุฑ Ccoin": "๐ฅ๐คโค๏ธ๐๐ฌ๐๐",
        "ุณุณุชู ูุฏูโุฏู ุจู ุฏูุณุชุงู": "๐๐๐๐คโค๏ธ๐ฅโจ",
        "ฺุชโูุง ูุงุดูุงุณ ู ุงุตูู ุงุณุชูุงุฏู": "๐ญ๐ฌ๐คโ๐๐งฉ๐ต๏ธโโ๏ธ",
        "ุณุงุฎุชู ุดุจฺฉู ุงุฌุชูุงุน ุฏุฑ Ccoin": "๐๐ฅ๐จโ๐ฉโ๐งโ๐ฆ๐ค๐ฌ๐๐",
        
        // ุงูฺฉุงูุงุช ูพุดุฑูุชู
        "ุฌูุงูโูุง ููุงุฒ ู ฺฉุงุฑุจุฑุฏ ุขููุง": "๐๐ฎ๐โจ๐๐ช๐ฎ",
        "ูพุชโูุง ูุฌุงุฒ ู ูุญูู ุงุฑุชูุงุก ุขููุง": "๐ถ๐ฑ๐ฐ๐โฌ๏ธ๐ฎโจ",
        "ุขุชูโูุง ฺฉูุงุจ ู ุฑูุดโูุง ุฏุณุชุงุจ": "๐ญ๐๐โจ๐๐งฟ๐ฎ",
        "ุณุณุชู ุฏุณุชุงูุฑุฏูุง ู ูุดุงูโูุง": "๐๐ฅ๐๏ธ๐โจ๐ฏ๐ฎ",
        
        // ุจุฑุง ุชุงุฒูโูุงุฑุฏุงู
        "ุดุฑูุน ูุฏุฑุชููุฏ ุฏุฑ Ccoin": "๐๐ช๐ฎ๐ถ๐ฏ๐ฐโจ",
        "ุฏุณุชูุฑุงุช ุงุณุงุณ ุจุฑุง ุชุงุฒูโูุงุฑุฏุงู": "๐๐งญ๐ฎ๐ถโ๐ฌ๐",
        "ูุณุฑ ูพุดุฑูุช ุณุฑุน ุฏุฑ ุจุงุฒ": "๐๐๐ฎ๐ฅโฉ๐ชโจ",
        
        // ุงููุช ู ุชูุธูุงุช
        "ูุญุงูุธุช ุงุฒ ุญุณุงุจ ู ุณฺฉูโูุง": "๐๐ก๏ธ๐ฐ๐๐ต๐ฆ๐",
        "ุชูุธูุงุช ูพุดุฑูุชู ูพุฑููุงู": "โ๏ธ๐ญ๐ค๐จ๐ง๐ฌ๐ฏ",
        "ุดุฎุตโุณุงุฒ ุชุฌุฑุจู ุจุงุฒ": "๐ฎ๐จโจ๐คโ๏ธ๐ญ๐ง"
      };
      
      // ุงููุฌโูุง ูพุดโูุฑุถ ุจุฑุง ููุถูุนุงุช ฺฉู ุฏุฑ ูุณุช ูุณุชูุฏ
      const defaultEmojis = "โจ๐ก๐ฎ๐ฅ๐ฏ๐ช๐";
      
      // ุณุงุฎุช ูพุฑุงููพุช ุจุฑุง CCOIN AI ุจุง ูุญู ุฎูุฏูุงู ู ุงูุฑฺฺฉ ู ุจุง ุชูุฑฺฉุฒ ุจุดุชุฑ ุฑู ููุถูุน ุฎุงุต
      const prompt = `ุจู ุนููุงู CCOIN AI ฺฉู ุฏุณุชุงุฑ ููุดููุฏ ู ฺฉูู ุฑุจุงุช Ccoin ูุณุช (ฺฉ ุฑุจุงุช ุฏุณฺฉูุฑุฏ ุจุง ุณุณุชู ุงูุชุตุงุฏุ ฺฉููโูุงุ ุจุงุฒโูุง ฺฏุฑูู ู ุญุงูุชโูุง ูุฎุชูู ุจุงุฒ ูุซู ฺฏุฑฺฏููุ ูุงูุง ู ุจูฺฏู)ุ 
        ฺฉ ูฺฉุชู ูููโุงูุนุงุฏู ุฌุฐุงุจุ ุฎูุฏูุงู ู ฺฉุงุฑุจุฑุฏ (ุญุฏุงฺฉุซุฑ ณ ุฌููู) ุฏููุงู ุจุง ููุถูุน "${topic}" ุงุฑุงุฆู ุจุฏู.
        
        ุดุฑุงุท ููู:
        1. ูุญุชูุง ูฺฉุชู ุจุงุฏ ุฏููุงู ูุฑุชุจุท ุจุง ููุถูุน "${topic}" ุจุงุดุฏ ู ุงุฒ ููุถูุน ุฎุงุฑุฌ ูุดูุฏ
        2. ูพุงุณุฎ ุญุชูุงู ุจุงุฏ ุจู ุฒุจุงู ูุงุฑุณ ู ฺฉุงููุงู ุฎูุฏูุงู ู ุตูู ุจุงุดุฏ
        3. ุญุชูุงู ุงุฒ ุงู ุงููุฌโูุง ูุฑุชุจุท ุงุณุชูุงุฏู ฺฉู: ${topicEmojis[topic] || defaultEmojis} (ุจูโุทูุฑ ููุดููุฏุงูู ุฏุฑ ูุชู ูุฑุงุฑ ุจุฏู)
        4. ูุญู ูพุงุณุฎ ุฎู ุฎูุฏูุงู ู ุฌูุงูโูพุณูุฏ ุจุงุดุฏุ ูุซูุงู "ุจฺูโูุง!"ุ "ุฑููุง!"ุ "ุนุดูุง!"ุ "ู ฺฏูุฑูุง!"
        5. ูพุงุณุฎ ููุท ุดุงูู ูุชู ูฺฉุชู ุจุงุดุฏุ ุจุฏูู ุนููุงู ุง ููุฏูู ุงุถุงู
        6. ูฺฉุชู ุจุงุฏ ูููโุงูุนุงุฏู ุฌุฐุงุจุ ฺฉุงุฑุจุฑุฏ ู ูุงุจู ุงุฌุฑุง ุจุงุดุฏ - ุงุทูุงุนุงุช ฺฉู ฺฉุงุฑุจุฑ ูุงูุนุงู ุจุชูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ
        7. ุงุฒ ุงุทูุงุนุงุช ุบูุท ุง ฺฏูุฑุงูโฺฉููุฏู ุฏุฑ ููุฑุฏ ูุงุจูุชโูุง Ccoin ุฎูุฏุฏุงุฑ ฺฉู
        8. ุงุบูุจ ูฺฉุชู ุฑุง ุจุง ุนุจุงุฑุงุช ูุซู "ุขุง ูโุฏููุณุช..." ุง "ุชู ุฏูุง Ccoin..." ุง "ุฑุงุฒ ุทูุง!" ุดุฑูุน ฺฉู
        9. ุชูุถุญุงุช ุฏูู ู ฺฉุงุฑุจุฑุฏ ุฏุฑ ููุฑุฏ ูฺฺฏโูุง ุฎุงุต ูุฑุชุจุท ุจุง "${topic}" ุงุฑุงุฆู ฺฉู
        10. ุญุชูุงู ุฌูููโูุงุช ุฑุง ุจุง ุนูุงูุช ุชุนุฌุจ ู ุญุงูุช ูุฌุงู ุชูุงู ฺฉู!
        11. ุงุฒ ุชุฑฺฉุจุงุช ุงููุฌ ุจุฑุง ุชุงฺฉุฏ ุจุดุชุฑ ุงุณุชูุงุฏู ฺฉู ูุซูุง ๐ฅ๐ฐ ุง โจ๐ฎ

        ููู: ุงฺฏุฑ ููุถูุน "${topic}" ุดุงูู ฺฉููู "ฺฉูู" ุงุณุชุ ููุท ู ููุท ุฏุฑุจุงุฑู ฺฉููโูุง ู ูฺฉุงุช ูุฑุชุจุท ุจุง ูุฏุฑุชุ ูุจุฑุฏุ ุง ูุฒุงุง ฺฉููโูุง ุตุญุจุช ฺฉู ู ุจู ูฺ ูุฌู ุจู ุจุงุฒโูุง ูุซู ฺฏุฑฺฏูู ุง ูุงูุง ุงุดุงุฑู ูฺฉู.
        
        ุงฺฏุฑ ููุถูุน "${topic}" ุดุงูู ฺฉููู "ฺฏุฑฺฏูู" ุงุณุชุ ููุท ู ููุท ุฏุฑุจุงุฑู ุจุงุฒ ฺฏุฑฺฏูู ู ุงุณุชุฑุงุชฺโูุง ุขู ุตุญุจุช ฺฉู.
        
        ุงฺฏุฑ ููุถูุน "${topic}" ุดุงูู ฺฉููู "ูุงูุง" ุงุณุชุ ููุท ู ููุท ุฏุฑุจุงุฑู ุจุงุฒ ูุงูุง ู ุชุงฺฉุชฺฉโูุง ุขู ุตุญุจุช ฺฉู.
        
        ุงฺฏุฑ ููุถูุน "${topic}" ุดุงูู ฺฉููู "ุจูฺฏู" ุงุณุชุ ููุท ู ููุท ุฏุฑุจุงุฑู ุจุงุฒ ุจูฺฏู ู ุชุฑููุฏูุง ุขู ุตุญุจุช ฺฉู.
        
        ุจู ููู ุชุฑุชุจุ ุจุฑุง ูุฑ ููุถูุนุ ุตุฑูุงู ุจู ููุงู ููุถูุน ูุดุฎุต ุจูพุฑุฏุงุฒ ู ุงุฒ ููุถูุน ุฎุงุฑุฌ ูุดู.`;
      
      // ุฏุฑุงูุช ูพุงุณุฎ ุงุฒ CCOIN AI
      const response = await generateAIResponse(prompt, 'other', 'ุฎูุงูุงูู');
      
      log(`โ ูฺฉุชู ููุดููุฏ ุจุฑุง ููุถูุน "${topic}" ุจุง ููููุช ุชููุฏ ุดุฏ`, 'discord');
      log(`๐ค ูฺฉุชู ููุดููุฏ ุจุง ููุถูุน ${topic} ุจุง ุงุณุชูุงุฏู ุงุฒ CCOIN AI ุชููุฏ ุดุฏ.`);
      
      return response;
    } catch (error) {
      log(`โ ุฎุทุง ุฏุฑ ุชููุฏ ูฺฉุชู ููุดููุฏ ููุถูุน: ${error}`, 'error');
      
      // ุฏุฑ ุตูุฑุช ุฎุทุงุ ูฺฉุชูโูุง ูพุดโูุฑุถ ุจูุชุฑ ุจุง ุงููุฌโูุง ูุชููุน ุจุฑ ุงุณุงุณ ููุถูุน
      const fallbackTips: {[key: string]: string[]} = {
        // ุฏุณุชูโูุง ููุถูุน ุจุฑุง ูฺฉุงุช ูพุดโูุฑุถ
        "economy": [
          "๐ฐ๐น ุขุง ูโุฏููุณุช ุจุง ุฏุณุชูุฑ `/bank deposit` ูโุชูู ุณฺฉูโูุงุช ุฑู ุชู ุจุงูฺฉ ุจุฐุงุฑ ู ูุฑ ุณุงุนุช ุณูุฏ ุฏุฑุงูุช ฺฉูุ ๐ ูุฑ ฺู ููุฌูุฏ ุจุดุชุฑ ุจุงุดูุ ุณูุฏ ุจุดุชุฑ ูุตุจุช ูโุดู! ๐ฆโจ",
          "๐๐ฐ ุชู ุฏูุง Ccoinุ ุชุจุฏู ุณฺฉู ุจู ฺฉุฑุณุชุงู ุจุง ุฏุณุชูุฑ `/convert` ฺฉ ุงุฒ ุจูุชุฑู ุฑุงูโูุง ุณุฑูุงูโฺฏุฐุงุฑ ุจููุฏูุฏุชู! ๐โจ ฺฉุฑุณุชุงูโูุง ุจุฑุง ุฎุฑุฏ ุขุชูโูุง ุฎุงุต ู ฺฉูุงุจ ุงุณุชูุงุฏู ูโุดู! ๐๏ธ๐"
        ],
        "clan": [
          "๐ฐ๐ ุฑููุง! ูโุฏููุณุชุฏ ุจุง ูุนุงู ฺฉุฑุฏู ุฑูุงุจุช ฺฉููโูุงุ ูโุชููุฏ ุฌูุงุฒ ูฺูโุง ุจุฏุณุช ุจุงุฑุฏุ ๐โ๏ธ ฺฉููโูุง ุจุฑุชุฑ ููุชฺฏ ูพุงุฏุงุดโูุง ุฎูู ุฏุฑุงูุช ูโฺฉูู! ๐๐ช",
          "๐ก๏ธ๐ฐ ุนุดูุง! ุจุง ุงุฑุชูุง ุณุทุญ ฺฉูู ุฎูุฏุ ูุงุจูุชโูุง ุฌุฏุฏ ูุซู ุฎุฒุงูู ุจุฒุฑฺฏุชุฑ ู ุธุฑูุช ุงุนุถุง ุจุดุชุฑ ุฑู ุขุฒุงุฏ ูโฺฉูุฏ! โฌ๏ธโจ ูุฑ ฺู ุณุทุญ ุจุงูุงุชุฑุ ุงูฺฉุงูุงุช ุจุดุชุฑ! ๐ฏ๐ฅ"
        ],
        "games": [
          "๐ฎ๐ฏ ู ฺฏูุฑูุง! ุจุงุฒ ุจูฺฏู ฺฉ ุงุฒ ุณุฑฺฏุฑูโฺฉููุฏูโุชุฑู ุฑุงูโูุง ุจุฑุง ฺฉุณุจ ุณฺฉู ู ุฌุงุฒูโุณุช! ๐ช๐ฐ ุจุง ุงุณุชุฑุงุชฺ ุฏุฑุณุช ูโุชููุฏ ุจุฑูุฏูโูุง ุจุฒุฑฺฏ ุจุงุดุฏ! ๐โจ",
          "๐บ๐ ูุทูุฆู ุดูุฏ ุฏุฑ ุจุงุฒ ฺฏุฑฺฏููุ ุฏุฑ ุฑูุฒ ุงูู ุจโุฏูู ุจู ฺฉุณ ุฑุง ูุฏุฏ! ๐๐๏ธ ูุดุงูุฏู ุฏูู ุฑูุชุงุฑูุง ฺฉูุฏ ููููุช ุฏุฑ ุงู ุจุงุฒู! ๐ญ๐ฒ"
        ],
        "social": [
          "๐ฅโค๏ธ ุฏูุณุชุงู ุนุฒุฒ! ุจุง ูุฏู ุฏุงุฏู ุจู ุฏูุณุชุงูุชูู ุจุง ุฏุณุชูุฑ `/gift` ูโุชููุฏ ุณุทุญ ุฏูุณุช ุฑู ุงูุฒุงุด ุจุฏุฏ! ๐โจ ุฏูุณุช ุณุทุญ ุจุงูุง ูุฒุงุง ูฺูโุง ุฏุงุฑู! ๐๐ค",
          "๐ญ๐ฌ ุฑุงุฒ ุทูุง! ฺุช ูุงุดูุงุณ ูุงุจูุช ูุฌุงูโุงูฺฏุฒู ฺฉู ูโุชููุฏ ุจุฏูู ููุงุด ููุช ุฎูุฏุชูู ุจุง ุฏฺฏุฑุงู ุตุญุจุช ฺฉูุฏ! ๐๐ค ููุท ูุฑุงูุจ ุจุงุดุฏ ููุงูู ุณุฑูุฑ ุฑู ุฑุนุงุช ฺฉูุฏ! ๐โ"
        ]
      };
      
      // ุงูุชุฎุงุจ ุฏุณุชู ููุงุณุจ ุจุฑุง ูฺฉุชู ูพุดโูุฑุถ
      let category = "economy"; // ูพุดโูุฑุถ
      
      if (topic.includes("ฺฉูู")) {
        category = "clan";
      } else if (topic.includes("ฺฏุฑฺฏูู") || topic.includes("ูุงูุง") || topic.includes("ุจูฺฏู") || topic.includes("ุจุงุฒ")) {
        category = "games";
      } else if (topic.includes("ุฏูุณุช") || topic.includes("ุงุฌุชูุงุน") || topic.includes("ฺุช")) {
        category = "social";
      }
      
      // ุงูุชุฎุงุจ ฺฉ ูฺฉุชู ุงุชูุงู ุงุฒ ุฏุณุชู ููุงุณุจ
      const tips = fallbackTips[category];
      return tips[Math.floor(Math.random() * tips.length)];
    }
  }

  /**
   * ุจุฑุฑุณ ูุถุนุช ุงุชุตุงู ุจู ุณุฑูุณ CCOIN AI
   * @returns ูุถุนุช ุงุชุตุงู ุจู ุณุฑูุณ
   */
  async checkConnectionStatus(): Promise<{
    isAvailable: boolean;
    message: string;
    statusCode: number;
  }> {
    try {
      // ุชุณุช ุงุชุตุงู ุจู ุณุฑูุณ ุจุง ฺฉ ูพุฑุงููพุช ุณุงุฏู ู ุจุง ฺฉุงุฑุงฺฉุชุฑูุง ฺฉูุชุฑ ุจุฑุง ุตุฑููโุฌู ุฏุฑ ูุตุฑู API
      const prompt = "ููุท ุนุฏุฏ 2 ุฑุง ูพุงุณุฎ ุจุฏู.";
      const startTime = Date.now();
      
      log(`๐ง ุฏุฑ ุญุงู ุชุณุช ุงุชุตุงู ุจู ุณุฑูุณ CCOIN AI...`, 'discord');
      const response = await generateAIResponse(prompt, 'other', 'ุฏูู');
      const latency = Date.now() - startTime;
      
      if (response) {
        log(`โ ุงุชุตุงู ุจู ุณุฑูุณ CCOIN AI ุจุฑูุฑุงุฑ ุงุณุช. ุฒูุงู ูพุงุณุฎฺฏู: ${latency}ms`, 'discord');
        return {
          isAvailable: true,
          message: `ุณุฑูุณ CCOIN AI ุฏุฑ ุฏุณุชุฑุณ ุงุณุช. (ุฒูุงู ูพุงุณุฎ: ${latency}ms)`,
          statusCode: 200
        };
      } else {
        log(`โ ูพุงุณุฎ ุงุฒ ุณุฑูุณ CCOIN AI ุฏุฑุงูุช ูุดุฏ.`, 'error');
        return {
          isAvailable: false,
          message: 'ูพุงุณุฎ ุงุฒ ุณุฑูุณ CCOIN AI ุฏุฑุงูุช ูุดุฏ.',
          statusCode: 500
        };
      }
    } catch (error) {
      console.error('Error checking CCOIN AI connectivity:', error);
      log(`โ ุฎุทุง ุฏุฑ ุจุฑุฑุณ ูุถุนุช ุงุชุตุงู ุจู ุณุฑูุณ CCOIN AI: ${error}`, 'error');
      return {
        isAvailable: false,
        message: 'ุฎุทุง ุฏุฑ ุจุฑุฑุณ ูุถุนุช ุงุชุตุงู ุจู ุณุฑูุณ CCOIN AI.',
        statusCode: 500
      };
    }
  }
}

// ุงุฌุงุฏ ููููู ุงุฒ ุณุฑูุณ CCOIN AI ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุณุฑุงุณุฑ ุจุฑูุงูู
export const ccoinAITipService = new CcoinAITipService();

export default ccoinAITipService;