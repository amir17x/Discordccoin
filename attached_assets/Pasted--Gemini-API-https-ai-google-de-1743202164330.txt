با توجه به درخواست شما برای مستندسازی دقیق و کامل از مستندات Gemini API در آدرس https://ai.google.dev/gemini-api/docs، من یک مستند جامع و ساختارمند برای شما آماده می‌کنم. این مستند بر اساس اطلاعات موجود در وب (تا تاریخ 28 مارس 2025) و با تمرکز بر جزئیات فنی، نحوه استفاده، و قابلیت‌های Gemini API نوشته شده است. هدف این است که یک راهنمای کامل و کاربردی برای توسعه‌دهندگان ارائه شود که شامل توضیحات، مثال‌های کد، و نکات مهم باشد. بیایید شروع کنیم! 🚀

---

## 📜 مستندات جامع Gemini API (Google AI for Developers)

### 🎯 مقدمه
Gemini API یک رابط برنامه‌نویسی (API) قدرتمند از گوگل است که به توسعه‌دهندگان امکان دسترسی به مدل‌های مولد هوش مصنوعی پیشرفته (Generative AI) از خانواده Gemini را می‌دهد. این API برای ساخت برنامه‌های خلاقانه و هوشمند طراحی شده و قابلیت‌های چندوجهی (Multimodal) را ارائه می‌دهد، به این معنا که می‌تواند ورودی‌هایی مثل متن، تصویر، و در نسخه‌های جدیدتر حتی صدا و ویدیو را پردازش کند و خروجی‌های متنی تولید کند. این API هم از طریق Google AI Studio و هم از طریق Vertex AI در دسترس است و برای توسعه‌دهندگانی که می‌خواهند برنامه‌های مقیاس‌پذیر و خلاقانه بسازند، گزینه‌ای ایده‌آل است.

#### اهداف این مستند
- ارائه یک راهنمای کامل برای شروع کار با Gemini API.
- توضیح ساختار درخواست‌ها و پاسخ‌ها.
- ارائه مثال‌های کد در زبان‌های مختلف (پایتون، جاوااسکریپت، و REST).
- پوشش قابلیت‌های جدید مثل Live API، تولید تصویر (Imagen)، و اجرای کد.
- نکات امنیتی و بهترین روش‌ها برای استفاده از API.

---

### 🛠️ پیش‌نیازها
برای شروع کار با Gemini API، به موارد زیر نیاز دارید:

1. **حساب گوگل:**
   - برای دسترسی به Google AI Studio و دریافت کلید API، به یک حساب گوگل نیاز دارید.

2. **کلید API:**
   - از Google AI Studio یک کلید API برای Gemini API دریافت کنید. این کلید برای احراز هویت در درخواست‌ها استفاده می‌شود.

3. **محیط توسعه:**
   - یک IDE مثل VSCode یا PyCharm.
   - نصب پایتون 3.8 یا بالاتر (برای SDK پایتون).
   - نصب Node.js (برای SDK جاوااسکریپت).
   - یا ابزارهایی مثل `curl` برای استفاده از REST API.

4. **نصب SDK (اختیاری):**
   - گوگل دو SDK برای Gemini API ارائه می‌دهد:
     - **google-generativeai (قدیمی):** برای مدل‌های قدیمی‌تر Gemini.
     - **google-genai (جدید):** برای مدل‌های Gemini 2.0 و قابلیت‌های جدیدتر (توصیه می‌شود).
   - نصب SDK پایتون:
     ```bash
     pip install google-generativeai
     ```
     یا برای SDK جدید:
     ```bash
     pip install google-genai
     ```
   - نصب SDK جاوااسکریپت:
     ```bash
     npm install @google/generative-ai
     ```

5. **دسترسی به Vertex AI (اختیاری):**
   - اگر می‌خواهید از Gemini API در Google Cloud استفاده کنید، باید یک پروژه Google Cloud بسازید و Vertex AI API را فعال کنید.

---

### 🔑 دریافت کلید API
برای استفاده از Gemini API، به یک کلید API نیاز دارید. مراحل زیر را دنبال کنید:

1. **ورود به Google AI Studio:**
   - به آدرس https://ai.google.dev بروید و با حساب گوگل خود وارد شوید.

2. **ایجاد کلید API:**
   - در Google AI Studio، روی گزینه "Get API Key" کلیک کنید.
   - می‌توانید کلید را در یک پروژه Google Cloud جدید یا موجود ایجاد کنید.
   - کلید API به شما نمایش داده می‌شود. آن را کپی کنید و در جایی امن ذخیره کنید.

3. **محدودیت‌های کلید API:**
   - به‌طور پیش‌فرض، کلید API تولیدشده توسط Google AI Studio فقط برای Gemini API (Generative Language API) قابل استفاده است.
   - برای امنیت بیشتر، می‌توانید محدودیت‌های اضافی (API Restrictions) در Google Cloud Console اعمال کنید.

#### ⚠️ نکته امنیتی:
- کلید API خود را در کدهای سمت کلاینت (مثل اپلیکیشن‌های وب یا موبایل) قرار ندهید، چون ممکن است افشا شود.
- برای برنامه‌های تولیدی (Production)، از Vertex AI در Firebase استفاده کنید که امنیت بیشتری ارائه می‌دهد.

---

### 🧠 مدل‌های Gemini
Gemini API به مدل‌های مختلفی از خانواده Gemini دسترسی می‌دهد. این مدل‌ها برای کاربردهای خاص بهینه‌سازی شده‌اند:

#### ۱. انواع مدل‌ها
- **Gemini 1.5 Flash:**
  - یک مدل سریع و چندوجهی برای کارهای مقیاس‌پذیر.
  - مناسب برای وظایف ساده و پرتکرار.
  - پشتیبانی از ورودی‌های متن، تصویر، و در نسخه‌های جدیدتر صدا و ویدیو.
- **Gemini 1.5 Pro:**
  - یک مدل میان‌رده برای وظایف پیچیده‌تر و استدلالی.
  - قابلیت پردازش داده‌های بزرگ (مثلاً ۲ ساعت ویدیو، ۱۹ ساعت صدا، یا ۶۰,۰۰۰ خط کد).
- **Gemini 1.5 Flash-8B:**
  - یک مدل کوچک برای وظایف با هوش کمتر.
- **Gemini 2.0 (جدید):**
  - پیشرفته‌ترین مدل Gemini با قابلیت‌های استدلالی بهبودیافته.
  - پشتیبانی از Live API (پخش صدا و ویدیو)، تولید تصویر (Imagen)، و اجرای کد.

#### ۲. نسخه‌های مدل
- **آخرین نسخه (Latest):** مثلاً `gemini-1.5-pro-latest`. این نسخه به‌صورت خودکار به آخرین مدل پایدار اشاره می‌کند.
- **نسخه پایدار (Stable):** مثلاً `gemini-1.5-pro-002`. برای برنامه‌های تولیدی توصیه می‌شود.
- **نسخه آزمایشی (Experimental):** مثلاً `gemini-1.5-pro-exp-0827`. فقط برای تست و آزمایش.

#### ۳. قابلیت‌های چندوجهی
- مدل‌های Gemini می‌توانند ورودی‌های متن، تصویر، صدا (در نسخه‌های جدیدتر)، و ویدیو را پردازش کنند.
- خروجی‌ها همیشه به‌صورت متن هستند.

---

### 📋 ساختار درخواست و پاسخ

#### ۱. ساختار درخواست (Request)
یک درخواست به Gemini API معمولاً شامل موارد زیر است:
- **مدل:** نام مدل (مثلاً `gemini-1.5-flash`).
- **محتوا (Contents):** شامل نقش (Role) و بخش‌ها (Parts).
  - نقش‌ها: `user` (کاربر) یا `model` (مدل).
  - بخش‌ها: می‌تواند متن (`text`)، تصویر (`inlineData` یا `fileData`)، یا فایل‌های چندرسانه‌ای باشد.
- **پارامترها (اختیاری):** مثل `max_tokens`، `temperature`، و غیره.

**مثال درخواست (JSON):**
```json
{
  "contents": [
    {
      "role": "user",
      "parts": [
        { "text": "توضیح بده که هوش مصنوعی چطور کار می‌کنه؟" }
      ]
    }
  ],
  "generationConfig": {
    "maxOutputTokens": 150,
    "temperature": 0.7
  }
}
```

#### ۲. ساختار پاسخ (Response)
پاسخ معمولاً شامل موارد زیر است:
- **متن تولیدشده:** در فیلد `candidates[0].content.parts[0].text`.
- **اطلاعات اضافی:** مثل `usageMetadata` (برای تعداد توکن‌های استفاده‌شده).

**مثال پاسخ (JSON):**
```json
{
  "candidates": [
    {
      "content": {
        "parts": [
          { "text": "هوش مصنوعی با استفاده از الگوریتم‌ها و مدل‌های ریاضی داده‌ها رو تحلیل می‌کنه..." }
        ],
        "role": "model"
      }
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 10,
    "candidatesTokenCount": 50,
    "totalTokenCount": 60
  }
}
```

---

### 🚀 شروع سریع (Quickstart)

#### ۱. استفاده از REST API
برای ارسال درخواست با `curl`:

```bash
curl https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=YOUR_API_KEY \
  -H 'Content-Type: application/json' \
  -X POST \
  -d '{
    "contents": [
      {
        "role": "user",
        "parts": [
          { "text": "یه داستان کوتاه درباره یه ربات بنویس." }
        ]
      }
    ]
  }'
```

**پاسخ نمونه:**
```
{
  "candidates": [
    {
      "content": {
        "parts": [
          { "text": "یه روز یه ربات کوچیک به اسم آرتو توی یه شهر بزرگ روشن شد..." }
        ]
      }
    }
  ]
}
```

#### ۲. استفاده از SDK پایتون
**نصب SDK:**
```bash
pip install google-genai
```

**مثال کد:**
```python
import google.generativeai as genai

# تنظیم کلید API
genai.configure(api_key="YOUR_API_KEY")

# انتخاب مدل
model = genai.GenerativeModel("gemini-1.5-flash")

# ارسال درخواست
response = model.generate_content("یه داستان کوتاه درباره یه ربات بنویس.")

# چاپ پاسخ
print(response.text)
```

**خروجی نمونه:**
```
یه روز یه ربات کوچیک به اسم آرتو توی یه شهر بزرگ روشن شد...
```

#### ۳. استفاده از SDK جاوااسکریپت
**نصب SDK:**
```bash
npm install @google/generative-ai
```

**مثال کد:**
```javascript
const { GoogleGenerativeAI } = require("@google/generative-ai");

// تنظیم کلید API
const genAI = new GoogleGenerativeAI("YOUR_API_KEY");

// انتخاب مدل
const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

// ارسال درخواست
async function run() {
  const prompt = "یه داستان کوتاه درباره یه ربات بنویس.";
  const result = await model.generateContent(prompt);
  const response = await result.response;
  console.log(response.text());
}

run();
```

**خروجی نمونه:**
```
یه روز یه ربات کوچیک به اسم آرتو توی یه شهر بزرگ روشن شد...
```

---

### 🌟 قابلیت‌های پیشرفته

#### ۱. Live API (پخش صدا و ویدیو)
- Gemini 2.0 قابلیت Live API را معرفی کرده که امکان پخش صدا و ویدیو را فراهم می‌کند.
- می‌توانید فایل‌های صوتی یا ویدیویی را آپلود کنید و سؤالاتی درباره بخش خاصی از آن بپرسید (مثلاً تبدیل صدا به متن یا Transcribe).

**مثال (پایتون):**
```python
import google.generativeai as genai

genai.configure(api_key="YOUR_API_KEY")
model = genai.GenerativeModel("gemini-2.0-flash-001")

# آپلود فایل صوتی
audio_file = genai.upload_file("path/to/audio.mp3")

# ارسال درخواست
response = model.generate_content([
  "فایل صوتی رو به متن تبدیل کن.",
  {"file_uri": audio_file.uri, "mime_type": "audio/mp3"}
])

print(response.text)
```

#### ۲. تولید تصویر (Imagen)
- با استفاده از Imagen، می‌توانید تصاویر تولید کنید.

**مثال (پایتون):**
```python
import google.generativeai as genai

genai.configure(api_key="YOUR_API_KEY")
model = genai.GenerativeModel("imagen")

response = model.generate_content("یه تصویر از یه ربات توی جنگل بکش.")
# تصویر تولیدشده به‌صورت URL یا داده باینری برگردانده می‌شود.
```

#### ۳. اجرای کد (Code Execution)
- Gemini می‌تواند کد پایتون تولید و اجرا کند.

**مثال (پایتون):**
```python
import google.generativeai as genai

genai.configure(api_key="YOUR_API_KEY")
model = genai.GenerativeModel("gemini-2.0-flash-001")

response = model.generate_content("یه کد پایتون برای رسم یه نمودار دایره‌ای بنویس.")
print(response.text)
```

**خروجی نمونه:**
```
import matplotlib.pyplot as plt

labels = ['A', 'B', 'C']
sizes = [30, 40, 30]
plt.pie(sizes, labels=labels)
plt.show()
```

#### ۴. ورودی چندوجهی (Multimodal Input)
- می‌توانید متن و تصویر را ترکیب کنید.

**مثال (پایتون):**
```python
import google.generativeai as genai

genai.configure(api_key="YOUR_API_KEY")
model = genai.GenerativeModel("gemini-1.5-flash")

# آپلود تصویر
image_file = genai.upload_file("path/to/image.jpg")

# ارسال درخواست
response = model.generate_content([
  "این تصویر چیه؟",
  {"file_uri": image_file.uri, "mime_type": "image/jpeg"}
])

print(response.text)
```

---

### 🛡️ نکات امنیتی و بهترین روش‌ها
1. **امنیت کلید API:**
   - کلید API را در کدهای سمت کلاینت قرار ندهید.
   - برای برنامه‌های تولیدی، از Vertex AI در Firebase استفاده کنید.

2. **محدودیت نرخ (Rate Limit):**
   - در Google AI Studio، quota رایگان ۶۰ درخواست در دقیقه است.
   - برای Vertex AI، تا زمان عرضه عمومی (اوایل ۲۰۲۵) رایگان است، اما بعد از آن هزینه بر اساس تعداد کاراکترها یا تصاویر محاسبه می‌شود.

3. **مدیریت داده‌ها:**
   - اندازه پرامپت‌ها نباید از ۲۰ مگابایت بیشتر شود.
   - برای فایل‌های بزرگ‌تر، از File API برای آپلود موقت استفاده کنید.

4. **مسئولیت‌پذیری:**
   - از راهنمای طراحی مسئولانه (Responsible AI) گوگل پیروی کنید.
   - از مدل‌ها برای تولید محتوای مضر یا غیرقانونی استفاده نکنید.

---

### 📊 مقایسه با Vertex AI
| ویژگی                  | Google AI Studio (Gemini API)       | Vertex AI                     |
|-----------------------|-------------------------------------|-------------------------------|
| **هدف**              | پروتوتایپ و تست سریع              | برنامه‌های تولیدی و مقیاس‌پذیر |
| **احراز هویت**      | کلید API                          | Identity and Access Management |
| **هزینه**            | رایگان (تا ۶۰ درخواست/دقیقه)       | هزینه‌بر (بعد از عرضه عمومی)  |
| **امنیت**           | مناسب برای تست                    | امنیت بالا با Firebase App Check |
| **پشتیبانی چندوجهی** | بله (متن، تصویر، صدا، ویدیو)       | بله، با قابلیت‌های پیشرفته‌تر   |

#### توصیه:
- برای پروتوتایپ و تست: از Google AI Studio و Gemini API استفاده کنید.
- برای برنامه‌های تولیدی: به Vertex AI مهاجرت کنید.

---

### 💡 ایده‌های کاربردی
1. **ساخت چت‌بات چندوجهی:**
   - از Gemini برای ساخت چت‌باتی استفاده کنید که هم متن و هم تصویر را پردازش کند.
2. **تحلیل داده‌ها:**
   - داده‌های متنی یا تصویری را آپلود کنید و از Gemini برای تحلیل بخواهید.
3. **تولید محتوای خلاقانه:**
   - داستان، شعر، یا حتی کد تولید کنید.
4. **اتوماسیون توسعه:**
   - از قابلیت اجرای کد برای تولید و اجرای اسکریپت‌ها استفاده کنید.

---

### 🐞 عیب‌یابی
- **خطای 401 (Unauthorized):** کلید API اشتباه است یا منقضی شده. کلید را بررسی کنید.
- **خطای 429 (Too Many Requests):** محدودیت نرخ را رد کردید. تعداد درخواست‌ها را کاهش دهید.
- **پاسخ خالی:** مطمئن شوید که پرامپت شما معتبر است و مدل انتخاب‌شده از ورودی پشتیبانی می‌کند.

---

### 🎉 نتیجه
Gemini API یک ابزار قدرتمند برای توسعه‌دهندگانی است که می‌خواهند برنامه‌های هوشمند و خلاقانه بسازند. با قابلیت‌های چندوجهی، پشتیبانی از مدل‌های پیشرفته مثل Gemini 2.0، و ادغام آسان با Google AI Studio و Vertex AI، این API می‌تواند نیازهای مختلف توسعه را برآورده کند. با این مستند، شما می‌توانید به‌راحتی شروع به کار کنید، قابلیت‌های پیشرفته را کاوش کنید، و برنامه‌های خلاقانه‌ای بسازید.

اگر سؤالی دارید یا نیاز به جزئیات بیشتری دارید، بفرمایید! 🌟