خیلی خوبه که می‌خوای بخش دزدی (Robbery) ربات دیسکورد Ccoin APP رو با جزئیات بالا مستندسازی کنی! من یه مستند جامع و دقیق برای این بخش می‌نویسم که شامل تمام مکانیزم‌ها، محدودیت‌ها، تنظیمات و نکات توسعه باشه. همچنین، طبق درخواستت، دزدی فقط از کاربران آنلاین انجام می‌شه، سقف دزدی مشخص می‌شه، زمان دزدی 2 دقیقه است و در زمان‌های رندوم انتخاب می‌شه که از طریق پنل ادمین قابل تنظیمه. این مستند به‌صورت Embed شده و با ایموجی‌های جذاب طراحی می‌شه تا زیبا و شیک باشه. بریم شروع کنیم! 🚀

---

# 🕵️ مستندات جامع بخش دزدی (Robbery) ربات Ccoin APP

## 🎯 هدف
بخش دزدی به کاربران اجازه می‌ده تا با ریسک و شانس، مقداری Ccoin از کیف پول کاربران دیگه بدزدن. این بخش برای ایجاد هیجان و رقابت اقتصادی طراحی شده و با محدودیت‌ها و تنظیمات خاصی همراهه تا تعادل اقتصادی ربات حفظ بشه.

---

## 📜 Embed بخش دزدی
- **عنوان**:  
  `🕵️ بخش دزدی`
- **توضیحات**:  
  `شانست رو امتحان کن و از کاربران آنلاین Ccoin بدزد! 💰\nموفقیت یا شکست، همه‌چیز به شانس بستگی داره! 🎲`
- **رنگ Embed**: بنفش (#800080) برای حس هیجان و رمزآلودگی.

---

## 🛠️ مکانیزم‌ها و جزئیات بخش دزدی

### 1️⃣ انتخاب هدف (Target Selection)
- **مکانیزم**:  
  - دزدی فقط از **کاربران آنلاین** انجام می‌شه.  
  - ربات یه لیست از کاربران آنلاین (به جز خود کاربر) تهیه می‌کنه و به‌صورت تصادفی یه هدف انتخاب می‌کنه.  
  - کاربرانی که **محافظ دزدی** (آیتم مصرفی) فعال دارن، از لیست حذف می‌شن.  
- **پیام نمونه**:  
  ```
  🕵️ انتخاب هدف:
  🔍 درحال جستجوی کاربر آنلاین...
  🎯 هدف پیدا شد: @User2
  💰 موجودی کیف پولش: 1200 Ccoin
  ```
- **محدودیت‌ها**:  
  - اگر هیچ کاربر آنلاینی وجود نداشته باشه، پیام زیر نمایش داده می‌شه:  
    ```
    ⚠️ هیچ کاربر آنلاینی برای دزدی پیدا نشد! بعداً دوباره امتحان کن.
    ```

### 2️⃣ سقف دزدی (Robbery Limit)
- **مکانیزم**:  
  - حداکثر مقدار دزدی: **100 Ccoin** در هر بار تلاش.  
  - اگر موجودی کیف پول هدف کمتر از 100 Ccoin باشه، فقط همون مقدار دزدیده می‌شه (مثلاً اگر 50 Ccoin داشته باشه، فقط 50 Ccoin دزدیده می‌شه).  
  - دزدی فقط از **کیف پول** انجام می‌شه، نه از بانک.  
- **پیام نمونه (در صورت موفقیت)**:  
  ```
  ✅ موفق شدی! 100 Ccoin از @User2 دزدیدی!
  💰 موجودی کیف پولت: 600 Ccoin
  ```
- **پیام نمونه (موجودی کمتر از سقف)**:  
  ```
  ✅ موفق شدی! 50 Ccoin از @User2 دزدیدی! (موجودی کیف پولش کم بود)
  💰 موجودی کیف پولت: 550 Ccoin
  ```

### 3️⃣ زمان دزدی (Robbery Duration)
- **مکانیزم**:  
  - هر تلاش برای دزدی **2 دقیقه** طول می‌کشه.  
  - تو این 2 دقیقه، یه انیمیشن ساده نمایش داده می‌شه تا حس هیجان ایجاد بشه.  
- **انیمیشن نمونه**:  
  ```
  🕵️ درحال دزدی از @User2...
  🔓 قفل کیف پولش رو باز می‌کنی... (30 ثانیه گذشته)
  💼 درحال برداشتن Ccoin... (1 دقیقه گذشته)
  🏃 فرار می‌کنی... (2 دقیقه گذشته)
  ```
- **نتیجه**:  
  - بعد از 2 دقیقه، نتیجه (موفقیت یا شکست) اعلام می‌شه.  
  - در صورت موفقیت:  
    ```
    ✅ دزدی موفق! 100 Ccoin دزدیدی!
    ```
  - در صورت شکست:  
    ```
    ❌ دزدی ناموفق! نگهبان‌ها تو رو گرفتن!
    💸 جریمه: 200 Ccoin از کیف پولت کسر شد.
    ```

### 4️⃣ شانس موفقیت (Success Chance)
- **مکانیزم**:  
  - شانس موفقیت: **40%** (قابل تنظیم تو پنل ادمین).  
  - اگر کاربر آیتم **بوست شانس** (آیتم مصرفی) فعال داشته باشه، شانسش 20% افزایش پیدا می‌کنه (به 60%).  
  - در صورت شکست، کاربر **200 Ccoin** جریمه می‌شه (از کیف پول کسر می‌شه).  
- **پیام نمونه (شکست)**:  
  ```
  ❌ دزدی ناموفق! نگهبان‌ها تو رو گرفتن!
  💸 جریمه: 200 Ccoin از کیف پولت کسر شد.
  💰 موجودی کیف پولت: 300 Ccoin
  ```
- **محدودیت‌ها**:  
  - اگر موجودی کیف پول کاربر برای جریمه کافی نباشه، جریمه به‌صورت بدهی ثبت می‌شه و تو اولین واریز Ccoin کسر می‌شه.  
    ```
    ⚠️ موجودی کافی نداری! 200 Ccoin بدهی داری.
    ```

### 5️⃣ زمان‌بندی دزدی (Random Timing)
- **مکانیزم**:  
  - دزدی فقط تو **زمان‌های رندوم** قابل انجامه.  
  - این زمان‌ها به‌صورت تصادفی تو بازه‌های مشخص (مثلاً هر 4 ساعت یه بازه 30 دقیقه‌ای) انتخاب می‌شن.  
  - این تنظیمات از طریق **پنل ادمین** قابل تغییره (توضیحات تو بخش بعدی).  
- **پیام نمونه (خارج از زمان دزدی)**:  
  ```
  ⏰ الان زمان دزدی نیست!
  📅 زمان بعدی: 2 ساعت دیگه (12:00 تا 12:30)
  ```
- **پیام نمونه (در زمان دزدی)**:  
  ```
  🕵️ الان زمان دزدیه! شانس دزدی از کاربران آنلاین رو داری!
  ⏰ زمان باقی‌مونده: 25 دقیقه
  ```

### 6️⃣ کول‌داون (Cooldown)
- **مکانیزم**:  
  - هر کاربر بعد از یه تلاش (چه موفق چه ناموفق)، باید **4 ساعت** صبر کنه تا دوباره بتونه دزدی کنه.  
- **پیام نمونه**:  
  ```
  ⏳ کول‌داون دزدی:
  ⏰ باید 4 ساعت صبر کنی! (3 ساعت و 45 دقیقه باقی‌مونده)
  ```

### 7️⃣ اعلان به هدف (Notification to Target)
- **مکانیزم**:  
  - اگر دزدی موفق باشه، هدف یه اعلان دریافت می‌کنه.  
  - اعلان به‌صورت پیام خصوصی (Ephemeral) ارسال می‌شه.  
- **پیام نمونه (برای هدف)**:  
  ```
  ⚠️ دزدی!
  🕵️ @User1 از کیف پولت 100 Ccoin دزدید!
  💰 موجودی کیف پولت: 1100 Ccoin
  🛡️ برای جلوگیری از دزدی، محافظ دزدی رو از فروشگاه بخر!
  ```

---

## ⚙️ تنظیمات پنل ادمین برای دزدی
بخش دزدی تو پنل ادمین قابل تنظیمه تا ادمین‌ها بتونن پارامترها رو بر اساس نیاز تغییر بدن.

### 📜 Embed تنظیمات دزدی
- **عنوان**:  
  `⚙️ تنظیمات دزدی`
- **توضیحات**:  
  `پارامترهای دزدی رو تنظیم کن تا تعادل اقتصادی ربات حفظ بشه! 🔧`
- **رنگ Embed**: خاکستری (#808080) برای حس حرفه‌ای.

#### 1️⃣ تنظیم زمان‌های رندوم (Random Timing Settings)
- **مکانیزم**:  
  - ادمین می‌تونه بازه‌های زمانی دزدی رو تنظیم کنه.  
  - تنظیمات:  
    - **فاصله بین بازه‌ها**: مثلاً هر 4 ساعت (قابل تغییر به 2، 6 یا 8 ساعت).  
    - **مدت زمان بازه**: مثلاً 30 دقیقه (قابل تغییر به 15، 45 یا 60 دقیقه).  
- **پیام نمونه**:  
  ```
  ⏰ تنظیم زمان‌های دزدی:
  📅 فاصله بین بازه‌ها: 4 ساعت (تغییر به 6 ساعت)
  ⏳ مدت زمان بازه: 30 دقیقه (تغییر به 45 دقیقه)
  ✅ تنظیمات ذخیره شد!
  ```

#### 2️⃣ تنظیم شانس موفقیت (Success Chance)
- **مکانیزم**:  
  - ادمین می‌تونه شانس موفقیت دزدی رو تغییر بده.  
  - مقدار پیش‌فرض: 40%.  
  - محدوده قابل تنظیم: 20% تا 60%.  
- **پیام نمونه**:  
  ```
  🎲 تنظیم شانس موفقیت:
  📊 شانس فعلی: 40%
  🔄 تغییر به: 50%
  ✅ تنظیمات ذخیره شد!
  ```

#### 3️⃣ تنظیم سقف دزدی (Robbery Limit)
- **مکانیزم**:  
  - ادمین می‌تونه سقف دزدی رو تغییر بده.  
  - مقدار پیش‌فرض: 100 Ccoin.  
  - محدوده قابل تنظیم: 50 تا 200 Ccoin.  
- **پیام نمونه**:  
  ```
  💰 تنظیم سقف دزدی:
  📊 سقف فعلی: 100 Ccoin
  🔄 تغییر به: 150 Ccoin
  ✅ تنظیمات ذخیره شد!
  ```

#### 4️⃣ تنظیم جریمه شکست (Failure Penalty)
- **مکانیزم**:  
  - ادمین می‌تونه مقدار جریمه شکست رو تغییر بده.  
  - مقدار پیش‌فرض: 200 Ccoin.  
  - محدوده قابل تنظیم: 100 تا 300 Ccoin.  
- **پیام نمونه**:  
  ```
  💸 تنظیم جریمه شکست:
  📊 جریمه فعلی: 200 Ccoin
  🔄 تغییر به: 250 Ccoin
  ✅ تنظیمات ذخیره شد!
  ```

#### 5️⃣ فعال/غیرفعال کردن دزدی (Enable/Disable Robbery)
- **مکانیزم**:  
  - ادمین می‌تونه بخش دزدی رو کاملاً غیرفعال کنه.  
- **پیام نمونه**:  
  ```
  ⚙️ تنظیمات دزدی:
  🕵️ دزدی: غیرفعال شد
  ✅ تنظیمات ذخیره شد!
  ```

---

## 🛡️ آیتم‌های مرتبط با دزدی
این آیتم‌ها تو فروشگاه موجودن و روی دزدی تأثیر می‌ذارن.

### 1️⃣ 🛡️ محافظ دزدی (Robbery Shield)
- **قیمت**: 300 Ccoin  
- **مدت زمان**: 24 ساعت  
- **اثر**: جلوگیری کامل از دزدی (کاربر از لیست اهداف حذف می‌شه).  
- **پیام نمونه**:  
  ```
  🛡️ محافظ دزدی فعال شد!
  ⏰ مدت زمان: 24 ساعت
  ✅ تو این مدت از دزدی در امانی!
  ```

### 2️⃣ 🍀 بوست شانس (Luck Boost)
- **قیمت**: 500 Ccoin  
- **مدت زمان**: 30 دقیقه  
- **اثر**: افزایش 20% شانس موفقیت دزدی (از 40% به 60%).  
- **پیام نمونه**:  
  ```
  🍀 بوست شانس فعال شد!
  ⏰ مدت زمان: 30 دقیقه
  📊 شانس موفقیت دزدی: 60%
  ```

---

## 📊 لاگ دزدی
تمام تلاش‌های دزدی (موفق یا ناموفق) تو لاگ ثبت می‌شن و تو پنل ادمین قابل مشاهده هستن.

- **پیام نمونه (لاگ)**:  
  ```
  📜 لاگ دزدی:
  🕵️ @User1 از @User2 دزدید:
  ✅ نتیجه: موفقیت
  💰 مقدار: 100 Ccoin
  📅 زمان: 1403/07/01 - 12:00
  ```
- **پیام نمونه (شکست)**:  
  ```
  📜 لاگ دزدی:
  🕵️ @User1 از @User2 دزدید:
  ❌ نتیجه: شکست
  💸 جریمه: 200 Ccoin
  📅 زمان: 1403/07/01 - 12:00
  ```

---

## 🛠️ نکات توسعه

### 1️⃣ دیتابیس
- **فیلدهای مورد نیاز تو دیتابیس کاربر**:  
  ```javascript
  userSchema.add({
      wallet: { type: Number, default: 0 }, // کیف پول
      lastRobbery: { type: Date }, // زمان آخرین دزدی (برای کول‌داون)
      robberyDebt: { type: Number, default: 0 }, // بدهی جریمه
      effects: [{ effect: String, duration: Number, startTime: Date }], // برای آیتم‌های محافظ و بوست
  });
  ```
- **دیتابیس لاگ دزدی**:  
  ```javascript
  const robberyLogSchema = new mongoose.Schema({
      robberId: String, // ID دزد
      targetId: String, // ID هدف
      success: Boolean, // موفقیت یا شکست
      amount: Number, // مقدار دزدیده‌شده
      penalty: Number, // جریمه (در صورت شکست)
      timestamp: { type: Date, default: Date.now }
  });
  ```

### 2️⃣ زمان‌بندی رندوم
- **پیاده‌سازی زمان‌بندی رندوم**:  
  ```javascript
  const robberyWindows = [];
  function scheduleRobberyWindows() {
      const interval = 4 * 60 * 60 * 1000; // 4 ساعت
      const windowDuration = 30 * 60 * 1000; // 30 دقیقه
      setInterval(() => {
          const startTime = Date.now();
          robberyWindows.push({ start: startTime, end: startTime + windowDuration });
      }, interval);
  }
  function isRobberyWindowActive() {
      const now = Date.now();
      return robberyWindows.some(window => now >= window.start && now <= window.end);
  }
  ```

### 3️⃣ انتخاب هدف
- **پیاده‌سازی انتخاب کاربر آنلاین**:  
  ```javascript
  async function selectRobberyTarget(userId, guild) {
      const onlineUsers = guild.members.cache
          .filter(member => member.presence?.status === 'online' && member.id !== userId)
          .map(member => member.id);
      if (onlineUsers.length === 0) return null;
      const targetId = onlineUsers[Math.floor(Math.random() * onlineUsers.length)];
      const target = await User.findOne({ userId: targetId });
      if (target.effects.some(effect => effect.effect === 'robbery_shield')) return null;
      return target;
  }
  ```

### 4️⃣ انیمیشن دزدی
- **پیاده‌سازی انیمیشن 2 دقیقه‌ای**:  
  ```javascript
  async function performRobbery(interaction, target) {
      await interaction.reply({ content: '🕵️ درحال دزدی...', ephemeral: true });
      setTimeout(() => interaction.editReply('🔓 قفل کیف پولش رو باز می‌کنی...'), 30 * 1000);
      setTimeout(() => interaction.editReply('💼 درحال برداشتن Ccoin...'), 60 * 1000);
      setTimeout(() => {
          const success = Math.random() < 0.4; // شانس 40%
          if (success) {
              const amount = Math.min(target.wallet, 100); // حداکثر 100 Ccoin
              target.wallet -= amount;
              interaction.user.wallet += amount;
              interaction.editReply(`✅ دزدی موفق! ${amount} Ccoin دزدیدی!`);
          } else {
              interaction.user.wallet -= 200; // جریمه
              interaction.editReply('❌ دزدی ناموفق! 200 Ccoin جریمه شدی!');
          }
      }, 120 * 1000); // 2 دقیقه
  }
  ```

### 5️⃣ تنظیمات پنل ادمین
- **دیتابیس تنظیمات دزدی**:  
  ```javascript
  const robberySettingsSchema = new mongoose.Schema({
      successChance: { type: Number, default: 40 },
      robberyLimit: { type: Number, default: 100 },
      penalty: { type: Number, default: 200 },
      windowInterval: { type: Number, default: 4 * 60 * 60 * 1000 }, // 4 ساعت
      windowDuration: { type: Number, default: 30 * 60 * 1000 }, // 30 دقیقه
      enabled: { type: Boolean, default: true }
  });
  ```

---

## 🌟 نتیجه‌گیری
بخش دزدی ربات Ccoin APP با مکانیزم‌های هیجان‌انگیز و تنظیمات انعطاف‌پذیر طراحی شده تا هم تعادل اقتصادی حفظ بشه و هم حس رقابت و ریسک به کاربران القا بشه. این مستند تمام جزئیات (از انتخاب هدف و سقف دزدی گرفته تا زمان‌بندی رندوم و تنظیمات پنل ادمین) رو با دقت بالا توضیح داد. اگر نیاز به توضیح بیشتر یا کدنویسی داری، بگو تا باهم کار کنیم! 😊