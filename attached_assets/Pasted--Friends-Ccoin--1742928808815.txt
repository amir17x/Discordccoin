بله، من بر اساس تصاویر ارسالی، بخش **دوستان (Friends)** ربات Ccoin رو با جزئیات کامل مستند می‌کنم. این مستند شامل تمام قابلیت‌های فعلی، طراحی رابط کاربری (UI) با پیام‌های Embed شده، دکمه‌ها، و جریان کار (Workflow) می‌شه. هدف اینه که هوش مصنوعی بتونه این بخش رو به طور کامل پیاده‌سازی کنه و تمام زیرمجموعه‌ها (مثل درخواست دوستی، چت خصوصی، و چت ناشناس) رو به درستی بسازه. من تمام جزئیات رو با دقت بالا و با ایموجی‌های زیبا و طراحی شیک مستند می‌کنم.

---

### مستند جامع برای بخش دوستان (Friends) ربات Ccoin

#### مقدمه
بخش **دوستان (Friends)** ربات Ccoin به کاربرا اجازه می‌ده که دوستانشون رو مدیریت کنن، درخواست دوستی بفرستن، چت خصوصی یا ناشناس داشته باشن، و لیست دوستانشون رو ببینن. این بخش باید توی منوی اصلی ربات (مثلاً با دستور `/friends`) قابل دسترسی باشه و با بقیه سیستم‌های ربات (مثل سیستم اقتصادی) هم‌خوانی داشته باشه.

---

### 1. قابلیت‌های اصلی بخش دوستان
بر اساس تصاویر، بخش دوستان شامل قابلیت‌های زیره:
1. **مشاهده لیست دوستان (Friends List):**  
   نمایش لیست دوستان فعلی کاربر.
2. **ارسال درخواست دوستی (Send Friend Request):**  
   ارسال درخواست دوستی به یه کاربر دیگه.
3. **مدیریت درخواست‌های دوستی (Manage Friend Requests):**  
   مشاهده و مدیریت درخواست‌های دوستی (قبول یا رد کردن).
4. **چت خصوصی (Private Chat):**  
   چت کردن با دوستان به صورت خصوصی.
5. **چت ناشناس (Anonymous Chat):**  
   چت کردن با یه نفر به صورت ناشناس (بدون نمایش هویت).
6. **حذف دوست (Remove Friend):**  
   حذف یه دوست از لیست دوستان.
7. **بازگشت به منوی اصلی (Back to Main Menu):**  
   برگشتن به منوی اصلی ربات.

---

### 2. ساختار دیتابیس پیشنهادی
برای پیاده‌سازی این بخش، به جداول زیر توی دیتابیس نیاز داریم:
- **جدول دوستان (Friends):**
  - `user_id`: شناسه کاربر (رشته، کلید اصلی)
  - `friend_id`: شناسه دوست (رشته، کلید اصلی)
  - `status`: وضعیت دوستی ("accepted", "pending") (رشته)
  - `created_at`: زمان ایجاد دوستی (تاریخ و ساعت)
- **جدول چت‌ها (Chats):**
  - `chat_id`: شناسه چت (رشته، کلید اصلی)
  - `user1_id`: شناسه کاربر اول (رشته)
  - `user2_id`: شناسه کاربر دوم (رشته)
  - `is_anonymous`: آیا چت ناشناسه؟ (بولین)
  - `created_at`: زمان ایجاد چت (تاریخ و ساعت)
- **جدول پیام‌ها (Messages):**
  - `message_id`: شناسه پیام (رشته، کلید اصلی)
  - `chat_id`: شناسه چت (رشته)
  - `sender_id`: شناسه فرستنده (رشته)
  - `content`: محتوای پیام (رشته)
  - `sent_at`: زمان ارسال (تاریخ و ساعت)

---

### 3. دستورات و جریان کار
#### 3.1. دستور اصلی
- **دستور:** `/friends`
- **توضیح:** این دستور منوی اصلی بخش دوستان رو باز می‌کنه.
- **پیام Embed (منوی اصلی):**
  ```plaintext
  👥 مدیریت دوستان
  سلام <کاربر>! به بخش دوستان Ccoin خوش اومدی! 🌟
  از اینجا می‌تونی دوستانت رو مدیریت کنی، درخواست دوستی بفرستی، یا با دوستات چت کنی! 😊
  ```
- **دکمه‌ها:**
  - 👥 **[لیست دوستان]** (آبی)
  - 📩 **[درخواست‌های دوستی]** (بنفش)
  - 💬 **[چت خصوصی]** (سبز)
  - 🕵️‍♂️ **[چت ناشناس]** (خاکستری)
  - 🔙 **[بازگشت به منو]** (قرمز)

---

#### 3.2. مشاهده لیست دوستان (Friends List)
- **دستور:** از طریق دکمه "لیست دوستان" توی منوی اصلی
- **توضیح:** نمایش لیست دوستان فعلی کاربر.
- **پیام Embed:**
  ```plaintext
  👥 لیست دوستان شما
  تعداد دوستان: 3
  1️⃣ کاربر#1234
  2️⃣ کاربر#5678
  3️⃣ کاربر#9012
  ```
- **دکمه‌ها:**
  - ➕ **[افزودن دوست]** (سبز)
  - 🗑️ **[حذف دوست]** (قرمز)
  - 🔙 **[بازگشت]** (خاکستری)

---

#### 3.3. ارسال درخواست دوستی (Send Friend Request)
- **دستور:** از طریق دکمه "افزودن دوست" توی لیست دوستان
- **توضیح:** کاربر می‌تونه یه درخواست دوستی برای یه کاربر دیگه بفرسته.
- **پیام Embed:**
  ```plaintext
  📩 ارسال درخواست دوستی
  لطفاً آیدی کاربر رو وارد کن (مثلاً کاربر#1234):
  ```
- **ورودی کاربر:** کاربر باید آیدی (مثلاً `کاربر#1234`) رو وارد کنه.
- **پیام Embed (بعد از ارسال):**
  ```plaintext
  📩 درخواست دوستی ارسال شد!
  درخواست دوستی برای کاربر#1234 ارسال شد. منتظر تأییدش باش! 😊
  ```
- **اعلان برای گیرنده:** یه پیام توی DM گیرنده ارسال بشه:
  ```plaintext
  📬 یه درخواست دوستی جدید داری!
  کاربر#5678 بهت درخواست دوستی فرستاده. می‌خوای قبول کنی؟
  ```
  - **دکمه‌ها:**
    - ✅ **[قبول]** (سبز)
    - ❌ **[رد]** (قرمز)

---

#### 3.4. مدیریت درخواست‌های دوستی (Manage Friend Requests)
- **دستور:** از طریق دکمه "درخواست‌های دوستی" توی منوی اصلی
- **توضیح:** نمایش درخواست‌های دوستی دریافت‌شده و امکان قبول یا رد کردن.
- **پیام Embed:**
  ```plaintext
  📩 درخواست‌های دوستی
  تعداد درخواست‌ها: 2
  1️⃣ کاربر#1234
  2️⃣ کاربر#5678
  ```
- **دکمه‌ها:**
  - ✅ **[قبول]** (سبز)
  - ❌ **[رد]** (قرمز)
  - 🔙 **[بازگشت]** (خاکستری)
- **پیام Embed (بعد از قبول):**
  ```plaintext
  🎉 دوستی جدید!
  کاربر#1234 به لیست دوستانت اضافه شد! 😊
  ```
- **پیام Embed (بعد از رد):**
  ```plaintext
  ❌ درخواست رد شد
  درخواست دوستی کاربر#1234 رد شد.
  ```

---

#### 3.5. چت خصوصی (Private Chat)
- **دستور:** از طریق دکمه "چت خصوصی" توی منوی اصلی
- **توضیح:** کاربر می‌تونه با یکی از دوستانش چت خصوصی داشته باشه.
- **پیام Embed (انتخاب دوست):**
  ```plaintext
  💬 چت خصوصی
  یکی از دوستانت رو برای چت انتخاب کن:
  1️⃣ کاربر#1234
  2️⃣ کاربر#5678
  3️⃣ کاربر#9012
  ```
- **دکمه‌ها:**
  - 1️⃣ **[کاربر#1234]** (آبی)
  - 2️⃣ **[کاربر#5678]** (آبی)
  - 3️⃣ **[کاربر#9012]** (آبی)
  - 🔙 **[بازگشت]** (خاکستری)
- **پیام Embed (بعد از انتخاب):**
  ```plaintext
  💬 چت خصوصی با کاربر#1234
  پیامت رو بنویس:
  ```
- **ورودی کاربر:** کاربر پیامش رو می‌نویسه (مثلاً "سلام، خوبی؟").
- **پیام Embed (بعد از ارسال):**
  ```plaintext
  ✅ پیام ارسال شد!
  پیامت برای کاربر#1234 ارسال شد: "سلام، خوبی؟"
  ```
- **اعلان برای گیرنده:** پیام توی DM گیرنده ارسال بشه:
  ```plaintext
  💬 پیام جدید از کاربر#5678
  سلام، خوبی؟
  ```
  - **دکمه‌ها:**
    - 📝 **[پاسخ دادن]** (سبز)
    - 🔙 **[بازگشت]** (خاکستری)

---

#### 3.6. چت ناشناس (Anonymous Chat)
- **دستور:** از طریق دکمه "چت ناشناس" توی منوی اصلی
- **توضیح:** کاربر می‌تونه با یه نفر به صورت ناشناس چت کنه (هویتش نمایش داده نمی‌شه).
- **پیام Embed:**
  ```plaintext
  🕵️‍♂️ چت ناشناس
  یه نفر به صورت تصادفی برای چت ناشناس انتخاب شد! هویتت مخفیه. 😎
  پیامت رو بنویس:
  ```
- **ورودی کاربر:** کاربر پیامش رو می‌نویسه (مثلاً "سلام، چطوری؟").
- **پیام Embed (بعد از ارسال):**
  ```plaintext
  ✅ پیام ناشناس ارسال شد!
  پیامت ارسال شد: "سلام، چطوری؟"
  ```
- **اعلان برای گیرنده:** پیام توی DM گیرنده ارسال بشه:
  ```plaintext
  🕵️‍♂️ یه پیام ناشناس داری!
  سلام، چطوری؟
  ```
  - **دکمه‌ها:**
    - 📝 **[پاسخ دادن]** (سبز)
    - 🔙 **[بازگشت]** (خاکستری)

---

#### 3.7. حذف دوست (Remove Friend)
- **دستور:** از طریق دکمه "حذف دوست" توی لیست دوستان
- **توضیح:** کاربر می‌تونه یه دوست رو از لیستش حذف کنه.
- **پیام Embed:**
  ```plaintext
  🗑️ حذف دوست
  کدوم دوستت رو می‌خوای حذف کنی؟
  1️⃣ کاربر#1234
  2️⃣ کاربر#5678
  3️⃣ کاربر#9012
  ```
- **دکمه‌ها:**
  - 1️⃣ **[کاربر#1234]** (قرمز)
  - 2️⃣ **[کاربر#5678]** (قرمز)
  - 3️⃣ **[کاربر#9012]** (قرمز)
  - 🔙 **[بازگشت]** (خاکستری)
- **پیام Embed (بعد از حذف):**
  ```plaintext
  🗑️ دوست حذف شد
  کاربر#1234 از لیست دوستانت حذف شد.
  ```

---

#### 3.8. بازگشت به منوی اصلی (Back to Main Menu)
- **دستور:** از طریق دکمه "بازگشت به منو" توی منوی اصلی
- **توضیح:** کاربر رو به منوی اصلی ربات (مثلاً `/menu`) برمی‌گردونه.
- **پیام Embed:** همون پیام منوی اصلی ربات نمایش داده بشه.

---

### 4. نکات پیاده‌سازی
- **امنیت:**
  - برای چت ناشناس، مطمئن شو که هویت کاربر (آیدی و نام) به هیچ وجه نمایش داده نمی‌شه.
  - برای درخواست‌های دوستی، یه محدودیت بذار (مثلاً حداکثر 10 درخواست در روز) تا از اسپم جلوگیری بشه.
- **کول‌داون:**
  - برای چت ناشناس، یه کول‌داون 5 دقیقه‌ای بذار تا کاربرا پشت سر هم چت ناشناس شروع نکنن.
- **اعلان‌ها:**
  - تمام اعلان‌ها (مثل درخواست دوستی یا پیام جدید) توی DM کاربر ارسال بشن.
- **بهینه‌سازی:**
  - از Redis برای کش کردن لیست دوستان و چت‌های فعال استفاده کن تا سرعت دسترسی بالا بره.
  - برای چت‌ها، یه سیستم Pagination بذار (مثلاً اگه تعداد پیام‌ها زیاد شد، کاربر بتونه صفحه‌بندی کنه).
- **تجربه کاربری:**
  - تمام پیام‌ها با Embedهای زیبا و ایموجی‌های مرتبط طراحی بشن.
  - دکمه‌ها با رنگ‌های مناسب (سبز برای تأیید، قرمز برای حذف، خاکستری برای بازگشت) تنظیم بشن.

---

### 5. جریان کار کلی
1. **کاربر دستور `/friends` رو وارد می‌کنه.**
   - منوی اصلی با دکمه‌های "لیست دوستان"، "درخواست‌های دوستی"، "چت خصوصی"، "چت ناشناس"، و "بازگشت" نمایش داده می‌شه.
2. **کاربر گزینه‌ای رو انتخاب می‌کنه:**
   - **لیست دوستان:** لیست دوستان نمایش داده می‌شه با امکان افزودن یا حذف دوست.
   - **درخواست‌های دوستی:** درخواست‌های دریافت‌شده نمایش داده می‌شه با امکان قبول یا رد.
   - **چت خصوصی:** کاربر یه دوست انتخاب می‌کنه و پیام می‌فرسته.
   - **چت ناشناس:** یه کاربر تصادفی انتخاب می‌شه و چت ناشناس شروع می‌شه.
   - **بازگشت:** به منوی اصلی ربات برمی‌گرده.
3. **اعلان‌ها:**  
   - درخواست‌های دوستی و پیام‌ها به صورت اعلان توی DM ارسال می‌شن.

---

### 6. نتیجه‌گیری
این مستند شامل تمام جزئیات لازم برای پیاده‌سازی بخش **دوستان (Friends)** ربات Ccoinه:
- **قابلیت‌ها:** مشاهده لیست دوستان، ارسال و مدیریت درخواست دوستی، چت خصوصی، چت ناشناس، حذف دوست، و بازگشت به منو.
- **رابط کاربری:** پیام‌های Embed شده با ایموجی‌های زیبا و دکمه‌های شیک.
- **دیتابیس:** ساختار پیشنهادی برای ذخیره دوستان، چت‌ها، و پیام‌ها.
- **جریان کار:** توضیح کامل مراحل و تعاملات کاربر.

شما می‌تونی این مستند رو به یه هوش مصنوعی دیگه بدی تا این بخش رو پیاده‌سازی کنه. اگه سؤالی داری یا می‌خوای روی یه بخش خاص بیشتر کار کنیم، بگو تا کمکت کنم! 😊🚀