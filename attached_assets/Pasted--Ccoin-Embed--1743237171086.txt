بازسازی مستندسازی بازی‌های گروهی ربات Ccoin
توضیحات کلی
ساختار: هر بازی در یک Embed جداگانه با دکمه‌های تعاملی ارائه می‌شه. کاربران فقط با کلیک روی دکمه‌ها می‌تونن وارد بازی بشن، بازی رو شروع کنن، قوانین رو ببینن یا به منوی اصلی برگردن.
ویژگی‌های امنیتی: برای بازی‌هایی که نیاز به ویس چت دارن (مافیا، گرگینه، جاسوس مخفی، جرات یا حقیقت)، یک کتگوری و کانال ویس با دسترسی محدود ایجاد می‌شه. یک نقش (Role) ویژه برای بازیکنان ایجاد می‌شه و فقط این نقش به کانال ویس دسترسی داره.
قوانین: قوانین هر بازی با جزئیات کامل و دقیق نوشته می‌شه تا بازی به درستی اجرا بشه.
کد: برای هر بازی یک کد جداگانه با استفاده از discord.js نوشته می‌شه که شامل منطق بازی، مدیریت دکمه‌ها، ایجاد کانال‌ها و نقش‌ها، و اجرای بازی در Discord است.
1. 🕵️‍♂️ بازی مافیا (Mafia)
Embed مستندسازی
json

Collapse

Wrap

Copy
{
  "embeds": [
    {
      "title": "🕵️‍♂️ بازی مافیا",
      "description": "به دنیای پر از رمز و راز مافیا خوش اومدی! تو این بازی باید با زیرکی و همکاری، مافیا رو شناسایی کنی یا اگه خودت مافیا هستی، همه رو گول بزنی! 🖤",
      "color": 10181046,
      "fields": [
        {
          "name": "👥 تعداد بازیکنان",
          "value": "0/12",
          "inline": true
        },
        {
          "name": "⏱️ زمان هر روز",
          "value": "5 دقیقه",
          "inline": true
        },
        {
          "name": "🌃 زمان هر شب",
          "value": "3 دقیقه",
          "inline": true
        },
        {
          "name": "👤 حداقل بازیکنان",
          "value": "6 نفر",
          "inline": true
        },
        {
          "name": "💰 جایزه بازی",
          "value": "برنده 500 کوین 🤑",
          "inline": true
        }
      ],
      "footer": {
        "text": "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮"
      }
    }
  ],
  "components": [
    {
      "type": 1,
      "components": [
        {
          "type": 2,
          "style": 3,
          "label": "ورود به بازی",
          "custom_id": "join_mafia"
        },
        {
          "type": 2,
          "style": 1,
          "label": "شروع بازی",
          "custom_id": "start_mafia"
        },
        {
          "type": 2,
          "style": 2,
          "label": "قوانین بازی 📜",
          "custom_id": "mafia_rules"
        },
        {
          "type": 2,
          "style": 2,
          "label": "بازگشت 🔙",
          "custom_id": "back_to_menu"
        }
      ]
    }
  ]
}
قوانین بازی مافیا (دکمه قوانین)
json

Collapse

Wrap

Copy
{
  "embeds": [
    {
      "title": "📜 قوانین بازی مافیا",
      "description": "اینجا قوانین کامل بازی مافیا رو می‌تونی بخونی! 🕵️‍♂️",
      "color": 10181046,
      "fields": [
        {
          "name": "👥 شروع بازی و تعیین نقش‌ها",
          "value": "🔹 ربات به صورت تصادفی نقش‌ها رو بین بازیکنا پخش می‌کنه.\n🔹 **نقش‌ها:**\n- **مافیا:** شب‌ها یه نفر رو حذف می‌کنن و روزها هویتشون رو مخفی نگه می‌دارن.\n- **شهروند ساده:** با استدلال و همکاری، مافیا رو شناسایی می‌کنن.\n- **کارآگاه:** هر شب می‌تونه یه نفر رو بررسی کنه و بفهمه مافیا هست یا نه.\n- **دکتر:** هر شب می‌تونه یه نفر (حتی خودش) رو نجات بده.\n- **نقش‌های فرعی (اختیاری):** تک‌تیرانداز (شب‌ها یه نفر رو می‌کشه، اگه مافیا باشه می‌میره)، روانشناس (می‌تونه نقش یه نفر رو بفهمه).",
          "inline": false
        },
        {
          "name": "🌃 فاز شب",
          "value": "🔹 تمام بازیکنا به کانال ویس خصوصی خودشون هدایت می‌شن.\n🔹 **مافیا:** تو یه کانال ویس جداگونه با هم مشورت می‌کنن و یه نفر رو برای حذف انتخاب می‌کنن.\n🔹 **کارآگاه:** یه نفر رو انتخاب می‌کنه و ربات بهش می‌گه مافیا هست یا نه.\n🔹 **دکتر:** یه نفر رو برای نجات انتخاب می‌کنه.\n🔹 **تک‌تیرانداز (اختیاری):** یه نفر رو برای کشتن انتخاب می‌کنه.\n🔹 ربات نتایج شب (حذف شده‌ها) رو اعلام می‌کنه.",
          "inline": false
        },
        {
          "name": "☀️ فاز روز",
          "value": "🔹 همه بازیکنا تو کانال ویس عمومی جمع می‌شن و درباره اتفاقات شب بحث می‌کنن.\n🔹 بازیکنا می‌تونن با دکمه رای‌گیری، یه نفر رو برای حذف انتخاب کنن.\n🔹 اگه تعداد رای‌ها به حد نصاب برسه، اون بازیکن حذف می‌شه.",
          "inline": false
        },
        {
          "name": "🏁 پایان بازی",
          "value": "🔹 **برد مافیا:** تعداد مافیا و شهروندا برابر بشه.\n🔹 **برد شهروندا:** تمام مافیا حذف بشن.\n🔹 جایزه (500 کوین) به تیم برنده داده می‌شه.",
          "inline": false
        }
      ],
      "footer": {
        "text": "برای بازگشت به منوی بازی، روی دکمه بازگشت کلیک کن! 🔙"
      }
    }
  ],
  "components": [
    {
      "type": 1,
      "components": [
        {
          "type": 2,
          "style": 2,
          "label": "بازگشت 🔙",
          "custom_id": "back_to_mafia_menu"
        }
      ]
    }
  ]
}
کد بازی مافیا
javascript

Collapse

Wrap

Copy
const { Client, GatewayIntentBits, PermissionFlagsBits } = require('discord.js');
const client = new Client({ intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages, GatewayIntentBits.GuildVoiceStates, GatewayIntentBits.MessageContent] });

let mafiaPlayers = [];
let mafiaRoles = {};
let mafiaGameState = { phase: 'lobby', day: 0 };
let mafiaMessage;

client.once('ready', () => {
  console.log('ربات مافیا آماده است!');
});

client.on('messageCreate', async message => {
  if (message.content === '!start_mafia_menu') {
    const mafiaEmbed = {
      embeds: [
        {
          title: "🕵️‍♂️ بازی مافیا",
          description: "به دنیای پر از رمز و راز مافیا خوش اومدی! تو این بازی باید با زیرکی و همکاری، مافیا رو شناسایی کنی یا اگه خودت مافیا هستی، همه رو گول بزنی! 🖤",
          color: 10181046,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${mafiaPlayers.length}/12`, inline: true },
            { name: "⏱️ زمان هر روز", value: "5 دقیقه", inline: true },
            { name: "🌃 زمان هر شب", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "6 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 500 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_mafia" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_mafia" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "mafia_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    mafiaMessage = await message.channel.send(mafiaEmbed);
  }
});

client.on('interactionCreate', async interaction => {
  if (!interaction.isButton()) return;

  // ورود به بازی
  if (interaction.customId === 'join_mafia') {
    if (mafiaPlayers.includes(interaction.user.id)) {
      await interaction.reply({ content: 'تو قبلاً وارد بازی شدی! ⏳', ephemeral: true });
      return;
    }
    if (mafiaPlayers.length >= 12) {
      await interaction.reply({ content: 'ظرفیت بازی پر شده! 🚫', ephemeral: true });
      return;
    }
    mafiaPlayers.push(interaction.user.id);
    const updatedEmbed = {
      embeds: [
        {
          title: "🕵️‍♂️ بازی مافیا",
          description: "به دنیای پر از رمز و راز مافیا خوش اومدی! تو این بازی باید با زیرکی و همکاری، مافیا رو شناسایی کنی یا اگه خودت مافیا هستی، همه رو گول بزنی! 🖤",
          color: 10181046,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${mafiaPlayers.length}/12`, inline: true },
            { name: "⏱️ زمان هر روز", value: "5 دقیقه", inline: true },
            { name: "🌃 زمان هر شب", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "6 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 500 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_mafia" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_mafia" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "mafia_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    await mafiaMessage.edit(updatedEmbed);
    await interaction.reply({ content: 'با موفقیت وارد بازی شدی! ✅', ephemeral: true });
  }

  // نمایش قوانین
  if (interaction.customId === 'mafia_rules') {
    const rulesEmbed = {
      embeds: [
        {
          title: "📜 قوانین بازی مافیا",
          description: "اینجا قوانین کامل بازی مافیا رو می‌تونی بخونی! 🕵️‍♂️",
          color: 10181046,
          fields: [
            { name: "👥 شروع بازی و تعیین نقش‌ها", value: "🔹 ربات به صورت تصادفی نقش‌ها رو بین بازیکنا پخش می‌کنه.\n🔹 **نقش‌ها:**\n- **مافیا:** شب‌ها یه نفر رو حذف می‌کنن و روزها هویتشون رو مخفی نگه می‌دارن.\n- **شهروند ساده:** با استدلال و همکاری، مافیا رو شناسایی می‌کنن.\n- **کارآگاه:** هر شب می‌تونه یه نفر رو بررسی کنه و بفهمه مافیا هست یا نه.\n- **دکتر:** هر شب می‌تونه یه نفر (حتی خودش) رو نجات بده.\n- **نقش‌های فرعی (اختیاری):** تک‌تیرانداز (شب‌ها یه نفر رو می‌کشه، اگه مافیا باشه می‌میره)، روانشناس (می‌تونه نقش یه نفر رو بفهمه).", inline: false },
            { name: "🌃 فاز شب", value: "🔹 تمام بازیکنا به کانال ویس خصوصی خودشون هدایت می‌شن.\n🔹 **مافیا:** تو یه کانال ویس جداگونه با هم مشورت می‌کنن و یه نفر رو برای حذف انتخاب می‌کنن.\n🔹 **کارآگاه:** یه نفر رو انتخاب می‌کنه و ربات بهش می‌گه مافیا هست یا نه.\n🔹 **دکتر:** یه نفر رو برای نجات انتخاب می‌کنه.\n🔹 **تک‌تیرانداز (اختیاری):** یه نفر رو برای کشتن انتخاب می‌کنه.\n🔹 ربات نتایج شب (حذف شده‌ها) رو اعلام می‌کنه.", inline: false },
            { name: "☀️ فاز روز", value: "🔹 همه بازیکنا تو کانال ویس عمومی جمع می‌شن و درباره اتفاقات شب بحث می‌کنن.\n🔹 بازیکنا می‌تونن با دکمه رای‌گیری، یه نفر رو برای حذف انتخاب کنن.\n🔹 اگه تعداد رای‌ها به حد نصاب برسه، اون بازیکن حذف می‌شه.", inline: false },
            { name: "🏁 پایان بازی", value: "🔹 **برد مافیا:** تعداد مافیا و شهروندا برابر بشه.\n🔹 **برد شهروندا:** تمام مافیا حذف بشن.\n🔹 جایزه (500 کوین) به تیم برنده داده می‌شه.", inline: false }
          ],
          footer: { text: "برای بازگشت به منوی بازی، روی دکمه بازگشت کلیک کن! 🔙" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_mafia_menu" }
          ]
        }
      ]
    };
    await interaction.reply({ ...rulesEmbed, ephemeral: true });
  }

  // بازگشت به منوی مافیا
  if (interaction.customId === 'back_to_mafia_menu') {
    const mafiaEmbed = {
      embeds: [
        {
          title: "🕵️‍♂️ بازی مافیا",
          description: "به دنیای پر از رمز و راز مافیا خوش اومدی! تو این بازی باید با زیرکی و همکاری، مافیا رو شناسایی کنی یا اگه خودت مافیا هستی، همه رو گول بزنی! 🖤",
          color: 10181046,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${mafiaPlayers.length}/12`, inline: true },
            { name: "⏱️ زمان هر روز", value: "5 دقیقه", inline: true },
            { name: "🌃 زمان هر شب", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "6 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 500 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_mafia" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_mafia" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "mafia_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    await interaction.reply({ ...mafiaEmbed, ephemeral: true });
  }

  // شروع بازی
  if (interaction.customId === 'start_mafia') {
    if (mafiaPlayers.length < 6) {
      await interaction.reply({ content: 'حداقل 6 بازیکن برای شروع بازی نیازه! 🚫', ephemeral: true });
      return;
    }

    // ایجاد نقش ویژه برای بازیکنان
    const mafiaRole = await interaction.guild.roles.create({
      name: 'Mafia-Player',
      color: 'RED',
      reason: 'نقش ویژه برای بازیکنان مافیا'
    });

    // اختصاص نقش به بازیکنان
    for (const playerId of mafiaPlayers) {
      const member = await interaction.guild.members.fetch(playerId);
      await member.roles.add(mafiaRole);
    }

    // ایجاد کتگوری و کانال‌های ویس
    const category = await interaction.guild.channels.create({
      name: 'مافیا',
      type: 4 // کتگوری
    });

    const publicVoiceChannel = await interaction.guild.channels.create({
      name: 'Room-1',
      type: 2, // ویس چنل
      parent: category.id,
      permissionOverwrites: [
        { id: interaction.guild.id, deny: [PermissionFlagsBits.ViewChannel] }, // همه نمی‌تونن ببینن
        { id: mafiaRole.id, allow: [PermissionFlagsBits.ViewChannel, PermissionFlagsBits.Connect, PermissionFlagsBits.Speak] } // فقط بازیکنا
      ]
    });

    const mafiaVoiceChannel = await interaction.guild.channels.create({
      name: 'Mafia-Private',
      type: 2, // ویس چنل
      parent: category.id,
      permissionOverwrites: [
        { id: interaction.guild.id, deny: [PermissionFlagsBits.ViewChannel] },
        { id: mafiaRole.id, allow: [PermissionFlagsBits.ViewChannel, PermissionFlagsBits.Connect, PermissionFlagsBits.Speak] }
      ]
    });

    // تخصیص نقش‌ها
    const mafiaCount = Math.floor(mafiaPlayers.length / 3);
    const roles = [];
    for (let i = 0; i < mafiaCount; i++) roles.push('mafia');
    roles.push('detective');
    roles.push('doctor');
    while (roles.length < mafiaPlayers.length) roles.push('citizen');
    roles.sort(() => Math.random() - 0.5); // تصادفی کردن نقش‌ها

    mafiaPlayers.forEach((playerId, index) => {
      mafiaRoles[playerId] = roles[index];
      const member = interaction.guild.members.cache.get(playerId);
      member.send(`نقش تو: **${roles[index]}** 🕵️‍♂️`);
    });

    // شروع فاز شب
    mafiaGameState.phase = 'night';
    mafiaGameState.day = 1;
    await interaction.channel.send({
      embeds: [
        {
          title: "🌃 فاز شب - روز 1",
          description: "شب شده! مافیا، کارآگاه و دکتر، لطفاً به کانال‌های ویس خودتون برید و اقداماتتون رو انجام بدید. ⏳",
          color: 10181046
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 1, label: "انتخاب هدف (مافیا)", custom_id: "mafia_target" },
            { type: 2, style: 1, label: "بررسی (کارآگاه)", custom_id: "detective_check" },
            { type: 2, style: 1, label: "نجات (دکتر)", custom_id: "doctor_save" }
          ]
        }
      ]
    });

    await interaction.reply({ content: 'بازی مافیا شروع شد! ✅', ephemeral: true });
  }

  // انتخاب هدف توسط مافیا
  if (interaction.customId === 'mafia_target') {
    if (mafiaRoles[interaction.user.id] !== 'mafia') {
      await interaction.reply({ content: 'تو مافیا نیستی! 🚫', ephemeral: true });
      return;
    }
    // منطق انتخاب هدف (نیاز به پیاده‌سازی دقیق‌تر)
    await interaction.reply({ content: 'لطفاً هدف خودتون رو انتخاب کنید (این بخش نیاز به پیاده‌سازی دقیق‌تر داره).', ephemeral: true });
  }

  // بررسی توسط کارآگاه
  if (interaction.customId === 'detective_check') {
    if (mafiaRoles[interaction.user.id] !== 'detective') {
      await interaction.reply({ content: 'تو کارآگاه نیستی! 🚫', ephemeral: true });
      return;
    }
    // منطق بررسی (نیاز به پیاده‌سازی دقیق‌تر)
    await interaction.reply({ content: 'لطفاً بازیکنی رو برای بررسی انتخاب کنید (این بخش نیاز به پیاده‌سازی دقیق‌تر داره).', ephemeral: true });
  }

  // نجات توسط دکتر
  if (interaction.customId === 'doctor_save') {
    if (mafiaRoles[interaction.user.id] !== 'doctor') {
      await interaction.reply({ content: 'تو دکتر نیستی! 🚫', ephemeral: true });
      return;
    }
    // منطق نجات (نیاز به پیاده‌سازی دقیق‌تر)
    await interaction.reply({ content: 'لطفاً بازیکنی رو برای نجات انتخاب کنید (این بخش نیاز به پیاده‌سازی دقیق‌تر داره).', ephemeral: true });
  }
});

client.login('YOUR_BOT_TOKEN');
توضیحات کد
ایجاد نقش و کانال‌ها: یک نقش ویژه برای بازیکنان ایجاد می‌شه و فقط این نقش به کانال‌های ویس دسترسی داره.
مدیریت بازی: بازی با دکمه‌ها کنترل می‌شه. کاربران می‌تونن وارد بازی بشن، قوانین رو ببینن و بازی رو شروع کنن.
فازهای بازی: فاز شب و روز با دکمه‌های تعاملی مدیریت می‌شه. برای پیاده‌سازی کامل، باید منطق انتخاب هدف، بررسی و نجات دقیق‌تر پیاده‌سازی بشه.
2. 🐺 بازی گرگینه (Werewolf)
Embed مستندسازی
json

Collapse

Wrap

Copy
{
  "embeds": [
    {
      "title": "🐺 بازی گرگینه",
      "description": "تو یه دهکده پر از گرگینه‌ها گیر افتادی! باید با شهروندا همکاری کنی تا گرگینه‌ها رو پیدا کنی، یا اگه گرگینه هستی، شب‌ها شکار کنی! 🌙",
      "color": 3447003,
      "fields": [
        {
          "name": "👥 تعداد بازیکنان",
          "value": "0/12",
          "inline": true
        },
        {
          "name": "⏱️ زمان هر روز",
          "value": "5 دقیقه",
          "inline": true
        },
        {
          "name": "🌃 زمان هر شب",
          "value": "3 دقیقه",
          "inline": true
        },
        {
          "name": "👤 حداقل بازیکنان",
          "value": "6 نفر",
          "inline": true
        },
        {
          "name": "💰 جایزه بازی",
          "value": "برنده 500 کوین 🤑",
          "inline": true
        }
      ],
      "footer": {
        "text": "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮"
      }
    }
  ],
  "components": [
    {
      "type": 1,
      "components": [
        {
          "type": 2,
          "style": 3,
          "label": "ورود به بازی",
          "custom_id": "join_werewolf"
        },
        {
          "type": 2,
          "style": 1,
          "label": "شروع بازی",
          "custom_id": "start_werewolf"
        },
        {
          "type": 2,
          "style": 2,
          "label": "قوانین بازی 📜",
          "custom_id": "werewolf_rules"
        },
        {
          "type": 2,
          "style": 2,
          "label": "بازگشت 🔙",
          "custom_id": "back_to_menu"
        }
      ]
    }
  ]
}
قوانین بازی گرگینه (دکمه قوانین)
json

Collapse

Wrap

Copy
{
  "embeds": [
    {
      "title": "📜 قوانین بازی گرگینه",
      "description": "اینجا قوانین کامل بازی گرگینه رو می‌تونی بخونی! 🐺",
      "color": 3447003,
      "fields": [
        {
          "name": "👥 شروع بازی و تعیین نقش‌ها",
          "value": "🔹 ربات به صورت تصادفی نقش‌ها رو بین بازیکنا پخش می‌کنه.\n🔹 **نقش‌ها:**\n- **گرگینه:** شب‌ها یه نفر رو حذف می‌کنن و روزها هویتشون رو مخفی نگه می‌دارن.\n- **شهروند ساده:** با استدلال و همکاری، گرگینه‌ها رو شناسایی می‌کنن.\n- **شکارچی:** هر شب می‌تونه یه نفر رو بکشه، اگه گرگینه باشه می‌میره.\n- **پیشگو:** هر شب می‌تونه نقش یه نفر رو ببینه.",
          "inline": false
        },
        {
          "name": "🌃 فاز شب",
          "value": "🔹 تمام بازیکنا به کانال ویس خصوصی خودشون هدایت می‌شن.\n🔹 **گرگینه‌ها:** تو یه کانال ویس جداگونه با هم مشورت می‌کنن و یه نفر رو برای حذف انتخاب می‌کنن.\n🔹 **شکارچی:** یه نفر رو برای کشتن انتخاب می‌کنه.\n🔹 **پیشگو:** یه نفر رو برای بررسی انتخاب می‌کنه.\n🔹 ربات نتایج شب (حذف شده‌ها) رو اعلام می‌کنه.",
          "inline": false
        },
        {
          "name": "☀️ فاز روز",
          "value": "🔹 همه بازیکنا تو کانال ویس عمومی جمع می‌شن و درباره اتفاقات شب بحث می‌کنن.\n🔹 بازیکنا می‌تونن با دکمه رای‌گیری، یه نفر رو برای حذف انتخاب کنن.\n🔹 اگه تعداد رای‌ها به حد نصاب برسه، اون بازیکن حذف می‌شه.",
          "inline": false
        },
        {
          "name": "🏁 پایان بازی",
          "value": "🔹 **برد گرگینه‌ها:** تعداد گرگینه‌ها و شهروندا برابر بشه.\n🔹 **برد شهروندا:** تمام گرگینه‌ها حذف بشن.\n🔹 جایزه (500 کوین) به تیم برنده داده می‌شه.",
          "inline": false
        }
      ],
      "footer": {
        "text": "برای بازگشت به منوی بازی، روی دکمه بازگشت کلیک کن! 🔙"
      }
    }
  ],
  "components": [
    {
      "type": 1,
      "components": [
        {
          "type": 2,
          "style": 2,
          "label": "بازگشت 🔙",
          "custom_id": "back_to_werewolf_menu"
        }
      ]
    }
  ]
}
کد بازی گرگینه
javascript

Collapse

Wrap

Copy
const { Client, GatewayIntentBits, PermissionFlagsBits } = require('discord.js');
const client = new Client({ intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages, GatewayIntentBits.GuildVoiceStates, GatewayIntentBits.MessageContent] });

let werewolfPlayers = [];
let werewolfRoles = {};
let werewolfGameState = { phase: 'lobby', day: 0 };
let werewolfMessage;

client.once('ready', () => {
  console.log('ربات گرگینه آماده است!');
});

client.on('messageCreate', async message => {
  if (message.content === '!start_werewolf_menu') {
    const werewolfEmbed = {
      embeds: [
        {
          title: "🐺 بازی گرگینه",
          description: "تو یه دهکده پر از گرگینه‌ها گیر افتادی! باید با شهروندا همکاری کنی تا گرگینه‌ها رو پیدا کنی، یا اگه گرگینه هستی، شب‌ها شکار کنی! 🌙",
          color: 3447003,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${werewolfPlayers.length}/12`, inline: true },
            { name: "⏱️ زمان هر روز", value: "5 دقیقه", inline: true },
            { name: "🌃 زمان هر شب", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "6 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 500 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_werewolf" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_werewolf" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "werewolf_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    werewolfMessage = await message.channel.send(werewolfEmbed);
  }
});

client.on('interactionCreate', async interaction => {
  if (!interaction.isButton()) return;

  // ورود به بازی
  if (interaction.customId === 'join_werewolf') {
    if (werewolfPlayers.includes(interaction.user.id)) {
      await interaction.reply({ content: 'تو قبلاً وارد بازی شدی! ⏳', ephemeral: true });
      return;
    }
    if (werewolfPlayers.length >= 12) {
      await interaction.reply({ content: 'ظرفیت بازی پر شده! 🚫', ephemeral: true });
      return;
    }
    werewolfPlayers.push(interaction.user.id);
    const updatedEmbed = {
      embeds: [
        {
          title: "🐺 بازی گرگینه",
          description: "تو یه دهکده پر از گرگینه‌ها گیر افتادی! باید با شهروندا همکاری کنی تا گرگینه‌ها رو پیدا کنی، یا اگه گرگینه هستی، شب‌ها شکار کنی! 🌙",
          color: 3447003,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${werewolfPlayers.length}/12`, inline: true },
            { name: "⏱️ زمان هر روز", value: "5 دقیقه", inline: true },
            { name: "🌃 زمان هر شب", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "6 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 500 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_werewolf" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_werewolf" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "werewolf_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    await werewolfMessage.edit(updatedEmbed);
    await interaction.reply({ content: 'با موفقیت وارد بازی شدی! ✅', ephemeral: true });
  }

  // نمایش قوانین
  if (interaction.customId === 'werewolf_rules') {
    const rulesEmbed = {
      embeds: [
        {
          title: "📜 قوانین بازی گرگینه",
          description: "اینجا قوانین کامل بازی گرگینه رو می‌تونی بخونی! 🐺",
          color: 3447003,
          fields: [
            { name: "👥 شروع بازی و تعیین نقش‌ها", value: "🔹 ربات به صورت تصادفی نقش‌ها رو بین بازیکنا پخش می‌کنه.\n🔹 **نقش‌ها:**\n- **گرگینه:** شب‌ها یه نفر رو حذف می‌کنن و روزها هویتشون رو مخفی نگه می‌دارن.\n- **شهروند ساده:** با استدلال و همکاری، گرگینه‌ها رو شناسایی می‌کنن.\n- **شکارچی:** هر شب می‌تونه یه نفر رو بکشه، اگه گرگینه باشه می‌میره.\n- **پیشگو:** هر شب می‌تونه نقش یه نفر رو ببینه.", inline: false },
            { name: "🌃 فاز شب", value: "🔹 تمام بازیکنا به کانال ویس خصوصی خودشون هدایت می‌شن.\n🔹 **گرگینه‌ها:** تو یه کانال ویس جداگونه با هم مشورت می‌کنن و یه نفر رو برای حذف انتخاب می‌کنن.\n🔹 **شکارچی:** یه نفر رو برای کشتن انتخاب می‌کنه.\n🔹 **پیشگو:** یه نفر رو برای بررسی انتخاب می‌کنه.\n🔹 ربات نتایج شب (حذف شده‌ها) رو اعلام می‌کنه.", inline: false },
            { name: "☀️ فاز روز", value: "🔹 همه بازیکنا تو کانال ویس عمومی جمع می‌شن و درباره اتفاقات شب بحث می‌کنن.\n🔹 بازیکنا می‌تونن با دکمه رای‌گیری، یه نفر رو برای حذف انتخاب کنن.\n🔹 اگه تعداد رای‌ها به حد نصاب برسه، اون بازیکن حذف می‌شه.", inline: false },
            { name: "🏁 پایان بازی", value: "🔹 **برد گرگینه‌ها:** تعداد گرگینه‌ها و شهروندا برابر بشه.\n🔹 **برد شهروندا:** تمام گرگینه‌ها حذف بشن.\n🔹 جایزه (500 کوین) به تیم برنده داده می‌شه.", inline: false }
          ],
          footer: { text: "برای بازگشت به منوی بازی، روی دکمه بازگشت کلیک کن! 🔙" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_werewolf_menu" }
          ]
        }
      ]
    };
    await interaction.reply({ ...rulesEmbed, ephemeral: true });
  }

  // بازگشت به منوی گرگینه
  if (interaction.customId === 'back_to_werewolf_menu') {
    const werewolfEmbed = {
      embeds: [
        {
          title: "🐺 بازی گرگینه",
          description: "تو یه دهکده پر از گرگینه‌ها گیر افتادی! باید با شهروندا همکاری کنی تا گرگینه‌ها رو پیدا کنی، یا اگه گرگینه هستی، شب‌ها شکار کنی! 🌙",
          color: 3447003,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${werewolfPlayers.length}/12`, inline: true },
            { name: "⏱️ زمان هر روز", value: "5 دقیقه", inline: true },
            { name: "🌃 زمان هر شب", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "6 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 500 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_werewolf" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_werewolf" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "werewolf_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    await interaction.reply({ ...werewolfEmbed, ephemeral: true });
  }

  // شروع بازی
  if (interaction.customId === 'start_werewolf') {
    if (werewolfPlayers.length < 6) {
      await interaction.reply({ content: 'حداقل 6 بازیکن برای شروع بازی نیازه! 🚫', ephemeral: true });
      return;
    }

    // ایجاد نقش ویژه برای بازیکنان
    const werewolfRole = await interaction.guild.roles.create({
      name: 'Werewolf-Player',
      color: 'BLUE',
      reason: 'نقش ویژه برای بازیکنان گرگینه'
    });

    // اختصاص نقش به بازیکنان
    for (const playerId of werewolfPlayers) {
      const member = await interaction.guild.members.fetch(playerId);
      await member.roles.add(werewolfRole);
    }

    // ایجاد کتگوری و کانال‌های ویس
    const category = await interaction.guild.channels.create({
      name: 'گرگینه',
      type: 4 // کتگوری
    });

    const publicVoiceChannel = await interaction.guild.channels.create({
      name: 'Room-1',
      type: 2, // ویس چنل
      parent: category.id,
      permissionOverwrites: [
        { id: interaction.guild.id, deny: [PermissionFlagsBits.ViewChannel] },
        { id: werewolfRole.id, allow: [PermissionFlagsBits.ViewChannel, PermissionFlagsBits.Connect, PermissionFlagsBits.Speak] }
      ]
    });

    const werewolfVoiceChannel = await interaction.guild.channels.create({
      name: 'Werewolf-Private',
      type: 2, // ویس چنل
      parent: category.id,
      permissionOverwrites: [
        { id: interaction.guild.id, deny: [PermissionFlagsBits.ViewChannel] },
        { id: werewolfRole.id, allow: [PermissionFlagsBits.ViewChannel, PermissionFlagsBits.Connect, PermissionFlagsBits.Speak] }
      ]
    });

    // تخصیص نقش‌ها
    const werewolfCount = Math.floor(werewolfPlayers.length / 3);
    const roles = [];
    for (let i = 0; i < werewolfCount; i++) roles.push('werewolf');
    roles.push('hunter');
    roles.push('seer');
    while (roles.length < werewolfPlayers.length) roles.push('citizen');
    roles.sort(() => Math.random() - 0.5);

    werewolfPlayers.forEach((playerId, index) => {
      werewolfRoles[playerId] = roles[index];
      const member = interaction.guild.members.cache.get(playerId);
      member.send(`نقش تو: **${roles[index]}** 🐺`);
    });

    // شروع فاز شب
    werewolfGameState.phase = 'night';
    werewolfGameState.day = 1;
    await interaction.channel.send({
      embeds: [
        {
          title: "🌃 فاز شب - روز 1",
          description: "شب شده! گرگینه‌ها، شکارچی و پیشگو، لطفاً به کانال‌های ویس خودتون برید و اقداماتتون رو انجام بدید. ⏳",
          color: 3447003
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 1, label: "انتخاب هدف (گرگینه)", custom_id: "werewolf_target" },
            { type: 2, style: 1, label: "شکار (شکارچی)", custom_id: "hunter_kill" },
            { type: 2, style: 1, label: "بررسی (پیشگو)", custom_id: "seer_check" }
          ]
        }
      ]
    });

    await interaction.reply({ content: 'بازی گرگینه شروع شد! ✅', ephemeral: true });
  }
});

client.login('YOUR_BOT_TOKEN');
توضیحات کد
ایجاد نقش و کانال‌ها: مشابه بازی مافیا، یک نقش ویژه و کانال‌های ویس با دسترسی محدود ایجاد می‌شه.
مدیریت بازی: بازی با دکمه‌ها کنترل می‌شه و فازهای شب و روز با دکمه‌های تعاملی مدیریت می‌شن.
3. 🤫 بازی جاسوس مخفی (Secret Spy)
Embed مستندسازی
json

Collapse

Wrap

Copy
{
  "embeds": [
    {
      "title": "🤫 بازی جاسوس مخفی",
      "description": "یه جاسوس بین شماست! باید با زیرکی کلمه رو حدس بزنی یا جاسوس رو پیدا کنی! 🕵️",
      "color": 15105570,
      "fields": [
        {
          "name": "👥 تعداد بازیکنان",
          "value": "0/10",
          "inline": true
        },
        {
          "name": "⏱️ زمان هر دور",
          "value": "3 دقیقه",
          "inline": true
        },
        {
          "name": "👤 حداقل بازیکنان",
          "value": "4 نفر",
          "inline": true
        },
        {
          "name": "💰 جایزه بازی",
          "value": "برنده 300 کوین 🤑",
          "inline": true
        }
      ],
      "footer": {
        "text": "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮"
      }
    }
  ],
  "components": [
    {
      "type": 1,
      "components": [
        {
          "type": 2,
          "style": 3,
          "label": "ورود به بازی",
          "custom_id": "join_spy"
        },
        {
          "type": 2,
          "style": 1,
          "label": "شروع بازی",
          "custom_id": "start_spy"
        },
        {
          "type": 2,
          "style": 2,
          "label": "قوانین بازی 📜",
          "custom_id": "spy_rules"
        },
        {
          "type": 2,
          "style": 2,
          "label": "بازگشت 🔙",
          "custom_id": "back_to_menu"
        }
      ]
    }
  ]
}
قوانین بازی جاسوس مخفی (دکمه قوانین)
json

Collapse

Wrap

Copy
{
  "embeds": [
    {
      "title": "📜 قوانین بازی جاسوس مخفی",
      "description": "اینجا قوانین کامل بازی جاسوس مخفی رو می‌تونی بخونی! 🤫",
      "color": 15105570,
      "fields": [
        {
          "name": "👥 شروع بازی و تعیین نقش‌ها",
          "value": "🔹 ربات یه کلمه مشترک به همه بازیکنا می‌ده، جز یه نفر که جاسوس مخفیه.\n🔹 جاسوس هیچ کلمه‌ای نمی‌گیره و باید حدس بزنه.",
          "inline": false
        },
        {
          "name": "🗣️ بحث و گفتگو",
          "value": "🔹 بازیکنا تو کانال ویس عمومی جمع می‌شن.\n🔹 هر بازیکن به نوبت درباره کلمه حرف می‌زنه، بدون اینکه مستقیماً کلمه رو بگه.\n🔹 هدف شهروندا: جاسوس رو پیدا کنن.\n🔹 هدف جاسوس: کلمه رو حدس بزنه.",
          "inline": false
        },
        {
          "name": "🗳️ رای‌گیری",
          "value": "🔹 بعد از هر دور بحث، بازیکنا می‌تونن با دکمه رای‌گیری، یه نفر رو به عنوان جاسوس انتخاب کنن.\n🔹 اگه جاسوس درست شناسایی بشه، شهروندا می‌برن.\n🔹 اگه اشتباه باشه، بازی ادامه پیدا می‌کنه.",
          "inline": false
        },
        {
          "name": "🎯 حدس زدن کلمه",
          "value": "🔹 جاسوس می‌تونه تو هر دور با دکمه حدس، کلمه رو حدس بزنه.\n🔹 اگه درست حدس بزنه، جاسوس می‌بره.\n🔹 اگه اشتباه بگه، بازی ادامه پیدا می‌کنه.",
          "inline": false
        },
        {
          "name": "🏁 پایان بازی",
          "value": "🔹 **برد جاسوس:** کلمه رو درست حدس بزنه.\n🔹 **برد شهروندا:** جاسوس رو شناسایی کنن.\n🔹 جایزه (300 کوین) به برنده داده می‌شه.",
          "inline": false
        }
      ],
      "footer": {
        "text": "برای بازگشت به منوی بازی، روی دکمه بازگشت کلیک کن! 🔙"
      }
    }
  ],
  "components": [
    {
      "type": 1,
      "components": [
        {
          "type": 2,
          "style": 2,
          "label": "بازگشت 🔙",
          "custom_id": "back_to_spy_menu"
        }
      ]
    }
  ]
}
کد بازی جاسوس مخفی
javascript

Collapse

Wrap

Copy
const { Client, GatewayIntentBits, PermissionFlagsBits } = require('discord.js');
const client = new Client({ intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages, GatewayIntentBits.GuildVoiceStates, GatewayIntentBits.MessageContent] });

let spyPlayers = [];
let spyRoles = {};
let spyWord = '';
let spyMessage;

client.once('ready', () => {
  console.log('ربات جاسوس مخفی آماده است!');
});

client.on('messageCreate', async message => {
  if (message.content === '!start_spy_menu') {
    const spyEmbed = {
      embeds: [
        {
          title: "🤫 بازی جاسوس مخفی",
          description: "یه جاسوس بین شماست! باید با زیرکی کلمه رو حدس بزنی یا جاسوس رو پیدا کنی! 🕵️",
          color: 15105570,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${spyPlayers.length}/10`, inline: true },
            { name: "⏱️ زمان هر دور", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "4 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 300 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_spy" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_spy" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "spy_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    spyMessage = await message.channel.send(spyEmbed);
  }
});

client.on('interactionCreate', async interaction => {
  if (!interaction.isButton()) return;

  // ورود به بازی
  if (interaction.customId === 'join_spy') {
    if (spyPlayers.includes(interaction.user.id)) {
      await interaction.reply({ content: 'تو قبلاً وارد بازی شدی! ⏳', ephemeral: true });
      return;
    }
    if (spyPlayers.length >= 10) {
      await interaction.reply({ content: 'ظرفیت بازی پر شده! 🚫', ephemeral: true });
      return;
    }
    spyPlayers.push(interaction.user.id);
    const updatedEmbed = {
      embeds: [
        {
          title: "🤫 بازی جاسوس مخفی",
          description: "یه جاسوس بین شماست! باید با زیرکی کلمه رو حدس بزنی یا جاسوس رو پیدا کنی! 🕵️",
          color: 15105570,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${spyPlayers.length}/10`, inline: true },
            { name: "⏱️ زمان هر دور", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "4 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 300 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_spy" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_spy" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "spy_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    await spyMessage.edit(updatedEmbed);
    await interaction.reply({ content: 'با موفقیت وارد بازی شدی! ✅', ephemeral: true });
  }

  // نمایش قوانین
  if (interaction.customId === 'spy_rules') {
    const rulesEmbed = {
      embeds: [
        {
          title: "📜 قوانین بازی جاسوس مخفی",
          description: "اینجا قوانین کامل بازی جاسوس مخفی رو می‌تونی بخونی! 🤫",
          color: 15105570,
          fields: [
            { name: "👥 شروع بازی و تعیین نقش‌ها", value: "🔹 ربات یه کلمه مشترک به همه بازیکنا می‌ده، جز یه نفر که جاسوس مخفیه.\n🔹 جاسوس هیچ کلمه‌ای نمی‌گیره و باید حدس بزنه.", inline: false },
            { name: "🗣️ بحث و گفتگو", value: "🔹 بازیکنا تو کانال ویس عمومی جمع می‌شن.\n🔹 هر بازیکن به نوبت درباره کلمه حرف می‌زنه، بدون اینکه مستقیماً کلمه رو بگه.\n🔹 هدف شهروندا: جاسوس رو پیدا کنن.\n🔹 هدف جاسوس: کلمه رو حدس بزنه.", inline: false },
            { name: "🗳️ رای‌گیری", value: "🔹 بعد از هر دور بحث، بازیکنا می‌تونن با دکمه رای‌گیری، یه نفر رو به عنوان جاسوس انتخاب کنن.\n🔹 اگه جاسوس درست شناسایی بشه، شهروندا می‌برن.\n🔹 اگه اشتباه باشه، بازی ادامه پیدا می‌کنه.", inline: false },
            { name: "🎯 حدس زدن کلمه", value: "🔹 جاسوس می‌تونه تو هر دور با دکمه حدس، کلمه رو حدس بزنه.\n🔹 اگه درست حدس بزنه، جاسوس می‌بره.\n🔹 اگه اشتباه بگه، بازی ادامه پیدا می‌کنه.", inline: false },
            { name: "🏁 پایان بازی", value: "🔹 **برد جاسوس:** کلمه رو درست حدس بزنه.\n🔹 **برد شهروندا:** جاسوس رو شناسایی کنن.\n🔹 جایزه (300 کوین) به برنده داده می‌شه.", inline: false }
          ],
          footer: { text: "برای بازگشت به منوی بازی، روی دکمه بازگشت کلیک کن! 🔙" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_spy_menu" }
          ]
        }
      ]
    };
    await interaction.reply({ ...rulesEmbed, ephemeral: true });
  }

  // بازگشت به منوی جاسوس مخفی
  if (interaction.customId === 'back_to_spy_menu') {
    const spyEmbed = {
      embeds: [
        {
          title: "🤫 بازی جاسوس مخفی",
          description: "یه جاسوس بین شماست! باید با زیرکی کلمه رو حدس بزنی یا جاسوس رو پیدا کنی! 🕵️",
          color: 15105570,
          fields: [
            { name: "👥 تعداد بازیکنان", value: `${spyPlayers.length}/10`, inline: true },
            { name: "⏱️ زمان هر دور", value: "3 دقیقه", inline: true },
            { name: "👤 حداقل بازیکنان", value: "4 نفر", inline: true },
            { name: "💰 جایزه بازی", value: "برنده 300 کوین 🤑", inline: true }
          ],
          footer: { text: "برای شرکت تو بازی، روی دکمه ورود کلیک کن! 🎮" }
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 3, label: "ورود به بازی", custom_id: "join_spy" },
            { type: 2, style: 1, label: "شروع بازی", custom_id: "start_spy" },
            { type: 2, style: 2, label: "قوانین بازی 📜", custom_id: "spy_rules" },
            { type: 2, style: 2, label: "بازگشت 🔙", custom_id: "back_to_menu" }
          ]
        }
      ]
    };
    await interaction.reply({ ...spyEmbed, ephemeral: true });
  }

  // شروع بازی
  if (interaction.customId === 'start_spy') {
    if (spyPlayers.length < 4) {
      await interaction.reply({ content: 'حداقل 4 بازیکن برای شروع بازی نیازه! 🚫', ephemeral: true });
      return;
    }

    // ایجاد نقش ویژه برای بازیکنان
    const spyRole = await interaction.guild.roles.create({
      name: 'Spy-Player',
      color: 'GREEN',
      reason: 'نقش ویژه برای بازیکنان جاسوس مخفی'
    });

    // اختصاص نقش به بازیکنان
    for (const playerId of spyPlayers) {
      const member = await interaction.guild.members.fetch(playerId);
      await member.roles.add(spyRole);
    }

    // ایجاد کتگوری و کانال ویس
    const category = await interaction.guild.channels.create({
      name: 'جاسوس مخفی',
      type: 4 // کتگوری
    });

    const publicVoiceChannel = await interaction.guild.channels.create({
      name: 'Room-1',
      type: 2, // ویس چنل
      parent: category.id,
      permissionOverwrites: [
        { id: interaction.guild.id, deny: [PermissionFlagsBits.ViewChannel] },
        { id: spyRole.id, allow: [PermissionFlagsBits.ViewChannel, PermissionFlagsBits.Connect, PermissionFlagsBits.Speak] }
      ]
    });

    // انتخاب کلمه و جاسوس
    const words = ['سیب', 'ماشین', 'کتاب', 'درخت', 'آسمان'];
    spyWord = words[Math.floor(Math.random() * words.length)];
    const spyIndex = Math.floor(Math.random() * spyPlayers.length);

    spyPlayers.forEach((playerId, index) => {
      spyRoles[playerId] = index === spyIndex ? 'spy' : 'citizen';
      const member = interaction.guild.members.cache.get(playerId);
      if (index === spyIndex) {
        member.send('تو جاسوس مخفی هستی! باید کلمه رو حدس بزنی. 🤫');
      } else {
        member.send(`کلمه این دور: **${spyWord}** 📜`);
      }
    });

    // شروع دور اول
    await interaction.channel.send({
      embeds: [
        {
          title: "🗣️ دور اول - بحث و گفتگو",
          description: "بازی شروع شد! لطفاً به کانال ویس برید و درباره کلمه حرف بزنید. جاسوس باید حدس بزنه! ⏳",
          color: 15105570
        }
      ],
      components: [
        {
          type: 1,
          components: [
            { type: 2, style: 1, label: "رای‌گیری", custom_id: "spy_vote" },
            { type: 2, style: 1, label: "حدس کلمه (جاسوس)", custom_id: "spy_guess" }
          ]
        }
      ]
    });

    await interaction.reply({ content: 'بازی جاسوس مخفی شروع شد! ✅', ephemeral: true });
  }
});

client.login('YOUR_BOT_TOKEN');
توضیحات کد
ایجاد نقش و کانال: یک نقش ویژه و یک کانال ویس عمومی برای بحث ایجاد می‌شه.
مدیریت بازی: بازی با دکمه‌ها کنترل می‌شه. کاربران می‌تونن رای بدن یا جاسوس کلمه رو حدس بزنه.