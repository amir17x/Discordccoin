# راهنمای عیب‌یابی پنل مدیریت

این راهنما به شما کمک می‌کند تا مشکلات رایج در پنل مدیریت را شناسایی و برطرف کنید.

## مشکلات رایج و راه‌حل‌ها

### 1. مشکل صفحه سیاه 🖥️

**علائم:** صفحه کاملاً سیاه می‌شود یا محتوای صفحه نمایش داده نمی‌شود.

**راه‌حل:**
1. بررسی وجود خطاهای جاوااسکریپت در کنسول مرورگر
2. اطمینان از بارگذاری صحیح فایل‌های CSS و JS
3. بررسی تداخل میان فایل‌های جاوااسکریپت (خصوصاً در `vision-charts-simplified.js`)
4. اطمینان از سازگاری کد ES6 با مرورگر (تبدیل template literals به concatenation سنتی)

### 2. مشکل دکمه‌های تأیید در مودال‌ها 🔘

**علائم:** دکمه‌های تأیید در مودال‌ها کار نمی‌کنند یا فرم‌ها ارسال نمی‌شوند.

**راه‌حل:**
1. اطمینان از بارگذاری `modal-confirmation-fix.js`
2. بررسی اینکه آیا رویدادهای کلیک به درستی به دکمه‌ها متصل شده‌اند
3. بررسی مقادیر `data-*` دکمه‌ها (مانند `data-user-id`)
4. بررسی خطاهای شبکه (network errors) هنگام ارسال فرم
5. اطمینان از وجود `id` مناسب برای فرم‌ها (مثلاً `add-coins-form`)

### 3. مشکل منوی کناری 📋

**علائم:** منوی کناری باز/بسته نمی‌شود یا زیرمنوها کار نمی‌کنند.

**راه‌حل:**
1. بررسی بارگذاری `sidebar-controller.js`
2. اطمینان از وجود کلاس‌های لازم برای المان‌های منو
3. بررسی خطاهای CSS مربوط به ترنزیشن‌ها
4. بررسی تداخل اسکریپت‌های متعدد با `sidebar-controller.js`

### 4. مشکل نمودارها و گراف‌ها 📊

**علائم:** نمودارها نمایش داده نمی‌شوند یا داده‌های آنها نادرست است.

**راه‌حل:**
1. بررسی بارگذاری کتابخانه Chart.js
2. اطمینان از بارگذاری `vision-charts-simplified.js`
3. بررسی ساختار داده‌های ارسالی به توابع رسم نمودار
4. بررسی وجود `canvas` با `id` درست در صفحه

### 5. مشکل اعلان‌ها 🔔

**علائم:** اعلان‌ها نمایش داده نمی‌شوند یا به سرعت ناپدید می‌شوند.

**راه‌حل:**
1. بررسی بارگذاری `notification-center.js`
2. اطمینان از وجود المان با کلاس `.notifications-container` در صفحه
3. بررسی مقدار زمان نمایش اعلان‌ها
4. بررسی تداخل استایل‌های CSS با کلاس‌های اعلان

### 6. مشکل آپلود فایل 📁

**علائم:** آپلود فایل‌ها کار نمی‌کند یا پیشرفت آپلود نمایش داده نمی‌شود.

**راه‌حل:**
1. بررسی تنظیمات `enctype="multipart/form-data"` در فرم
2. اطمینان از وجود `name` مناسب برای فیلد آپلود
3. بررسی محدودیت سایز فایل در تنظیمات سرور
4. بررسی مسیر ذخیره فایل‌ها در سرور و دسترسی‌های لازم

### 7. مشکل دسترسی به API ها 🔌

**علائم:** خطاهای 404، 500 یا عدم دریافت/ارسال داده‌ها.

**راه‌حل:**
1. بررسی آدرس‌های API در فایل‌های جاوااسکریپت
2. بررسی پارامترهای ارسالی به API ها
3. بررسی سرور و لاگ‌های اکسپرس
4. اطمینان از اینکه CORS مشکلی ایجاد نمی‌کند

## نکات عیب‌یابی پیشرفته

### بررسی رویدادها

برای بررسی صحت عملکرد رویدادها، می‌توانید رویدادها را در کنسول مرورگر ردیابی کنید:

```javascript
// قبل از اجرای اصلی، این کد را در کنسول اجرا کنید
const originalAddEventListener = EventTarget.prototype.addEventListener;
EventTarget.prototype.addEventListener = function(type, listener, options) {
  console.log(`Event listener added: ${type} to`, this);
  return originalAddEventListener.call(this, type, listener, options);
};
```

### بررسی مسیر اجرای کد

برای بررسی اینکه کدام بخش‌های کد اجرا می‌شوند، می‌توانید از این روش استفاده کنید:

```javascript
// در نقاط مختلف کد این را قرار دهید
console.log('[DEBUG] Reached point X in function Y');
```

### بررسی خطاهای AJAX

برای ردیابی خطاهای AJAX و درخواست‌های HTTP، می‌توانید از این روش استفاده کنید:

```javascript
// قبل از اجرای اصلی، این کد را در کنسول اجرا کنید
const originalFetch = window.fetch;
window.fetch = function() {
  console.log('Fetch request:', arguments);
  return originalFetch.apply(this, arguments)
    .then(response => {
      console.log('Fetch response:', response);
      return response;
    })
    .catch(error => {
      console.error('Fetch error:', error);
      throw error;
    });
};

// برای jQuery AJAX
$(document).ajaxSend(function(event, xhr, settings) {
  console.log('AJAX request:', settings);
});
$(document).ajaxComplete(function(event, xhr, settings) {
  console.log('AJAX response:', xhr);
});
$(document).ajaxError(function(event, xhr, settings, error) {
  console.error('AJAX error:', error);
});
```

## اقدامات پیشگیرانه

برای جلوگیری از بروز مشکلات در آینده، این اقدامات را انجام دهید:

1. **پشتیبان‌گیری منظم:** از کدها و پایگاه داده به صورت منظم پشتیبان تهیه کنید.
2. **آزمایش تغییرات:** قبل از اعمال تغییرات در محیط اصلی، آنها را در محیط آزمایشی تست کنید.
3. **ثبت تغییرات:** تمام تغییرات را با ذکر تاریخ و هدف آنها ثبت کنید.
4. **بررسی دوره‌ای:** به صورت دوره‌ای عملکرد تمام بخش‌های پنل مدیریت را بررسی کنید.
5. **به‌روزرسانی کتابخانه‌ها:** کتابخانه‌های مورد استفاده را به آخرین نسخه به‌روزرسانی کنید.

## تماس با پشتیبانی

در صورت بروز مشکلاتی که قادر به حل آنها نیستید، با پشتیبانی به آدرس زیر تماس بگیرید:

ایمیل: support@ccoin.example.com