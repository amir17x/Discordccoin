<div class="dashboard-header">
    <h1>داشبورد</h1>
    <p>خوش آمدید! آمار و اطلاعات سیستم را در اینجا مشاهده کنید.</p>
</div>

<div class="dashboard-stats">
    <div class="stat-card">
        <div class="stat-icon blue">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
            <h3 class="stat-value" id="onlineUsers"><%= stats.onlineUsers %></h3>
            <p class="stat-label">کاربران آنلاین</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon green">
            <i class="fas fa-terminal"></i>
        </div>
        <div class="stat-content">
            <h3 class="stat-value" id="totalCommands"><%= stats.totalCommands %></h3>
            <p class="stat-label">دستورات اجرا شده</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon orange">
            <i class="fas fa-coins"></i>
        </div>
        <div class="stat-content">
            <h3 class="stat-value" id="coinsCirculation"><%= stats.coinsCirculation.toLocaleString() %></h3>
            <p class="stat-label">سکه در گردش</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon red">
            <i class="fas fa-server"></i>
        </div>
        <div class="stat-content">
            <h3 class="stat-value" id="serverLoad"><%= stats.serverLoad %>%</h3>
            <p class="stat-label">بار سرور</p>
        </div>
    </div>
</div>

<div class="dashboard-row">
    <div class="dashboard-col-7">
        <div class="chart-container">
            <div class="chart-header">
                <h3 class="chart-title">فعالیت کاربران</h3>
            </div>
            <canvas id="userActivityChart"></canvas>
        </div>
        
        <div class="chart-container">
            <div class="chart-header">
                <h3 class="chart-title">آمار اقتصادی</h3>
            </div>
            <canvas id="economyStatsChart"></canvas>
        </div>
    </div>
    
    <div class="dashboard-col-5">
        <div class="card">
            <div class="card-header">
                <h3>رویدادهای اخیر</h3>
            </div>
            <div class="card-body">
                <div class="events-list" id="recentEvents">
                    <% if (stats.recentEvents && stats.recentEvents.length > 0) { %>
                        <% stats.recentEvents.forEach(event => { %>
                            <div class="event-item">
                                <div class="event-icon <%= event.type %>">
                                    <i class="fas <%= getEventIcon(event.type) %>"></i>
                                </div>
                                <div class="event-content">
                                    <div class="event-title"><%= event.title %></div>
                                    <div class="event-time"><%= event.time %></div>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="empty-state">
                            <p>هیچ رویدادی ثبت نشده است</p>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h3>فعالیت‌های اخیر بات</h3>
            </div>
            <div class="card-body">
                <div class="activity-list">
                    <% if (stats.recentActivities && stats.recentActivities.length > 0) { %>
                        <% stats.recentActivities.forEach(activity => { %>
                            <div class="activity-item">
                                <div class="activity-user">
                                    <i class="fas fa-user-circle"></i>
                                    <%= activity.user %>
                                </div>
                                <div class="activity-content">
                                    <%= activity.action %>
                                </div>
                                <div class="activity-time">
                                    <%= activity.time %>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="empty-state">
                            <p>هیچ فعالیتی ثبت نشده است</p>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // داده‌های نمودار فعالیت کاربران
    const userActivityData = {
        labels: <%- JSON.stringify(stats.userActivity.labels) %>,
        values: <%- JSON.stringify(stats.userActivity.values) %>
    };
    
    // داده‌های نمودار اقتصادی
    const economyData = {
        labels: <%- JSON.stringify(stats.economy.labels) %>,
        transactions: <%- JSON.stringify(stats.economy.transactions) %>
    };
    
    // تابع کمکی برای دریافت آیکون مناسب برای هر نوع رویداد
    function getEventIcon(type) {
        switch(type) {
            case 'info': return 'fa-info-circle';
            case 'success': return 'fa-check-circle';
            case 'warning': return 'fa-exclamation-triangle';
            case 'error': return 'fa-times-circle';
            default: return 'fa-circle';
        }
    }
</script>

<!-- اسکریپت Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
